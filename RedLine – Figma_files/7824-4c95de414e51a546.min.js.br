"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="033cf348-7683-5285-b549-78f4989c8182")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[7824],{657507:(e,t,n)=>{n.d(t,{L:()=>i});var a=n(848318);function i(e,t,n){a.useEffect(()=>{let a=a=>{let i=a.target;n&&!i.isConnected||e.current?.contains(i)||t()};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}})}},582538:(e,t,n)=>{n.d(t,{K1:()=>N,Zo:()=>$,xT:()=>R});var a=n(848318),i=n(445777),o=n(536384),l=n.n(o),r=n(601925),d=n(543072),s=n(68134),c=n(266163),u=n(771186),m=n(166365),g=n(442313),p=n(320409),v=n(850898),f=n(877297),E=n(503024),h=n(823888),b=n(810968),I=n(63395),P=n(713407),w=n(715366),C=n(456505),T=n(370328),k=n(954184),_=n(342635),x=n(603386),U=n(696788);function N(e){let t;switch(e.type){case f.cM.NODE:t=e.nodeId;break;case f.cM.IMAGE:t=e.url;break;case f.cM.VIDEO:t=e.path;break;case f.cM.PROTOTYPE:t=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${t}`}function O(e){let[t,n]=a.useState(!e.isThumbnail&&!e.usesPreviewImage);if(a.useEffect(()=>{if(!e.imgUrl)return;let t=new Image;t.src=e.imgUrl,t.onload=()=>{let e=t.width/t.height;n(t=>t&&Math.abs(e-P.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return a.createElement("div",null,(0,g.t)("fig_feed.could_not_load_preview_image"));let i=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return a.createElement(a.Fragment,null,e.showPreviewFacade&&a.createElement("div",{className:T.Hq},a.createElement(c.pz,{onClick:e.onUpdatePreviewImage},(0,g.t)("fig_feed.update_preview_image"))),a.createElement("img",{src:i,alt:(0,g.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:l()(T.tv,e.isThumbnail&&T.Jq,t&&T.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?a.createElement("div",{className:T.mB},(0,g.t)("fig_feed.gif")):null)}function y(e){let t=!!e.editPreviewOptions;return a.createElement("div",{className:T.yE},e.contentItems.map((n,i)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=t=>e.editPreviewOptions.applyToAllCallback(t,N(n))),a.createElement("div",{key:i,className:l()({[T.Xt]:!0,[T.sD]:i===e.selectedIdx})},a.createElement(P.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:t,setContentPreview:i===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[N(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,d.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,d.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:o,imageScale:t?1:void 0,enableZoomKeyControls:i===e.selectedIdx&&(e.source===h.Zp.DETAIL_MODAL||t),enableSnapToGuidelines:t,enableZoomControls:e.source===h.Zp.DETAIL_MODAL}))}))}function A(e){return a.createElement(w.D,{item:e.prototypeContent})}function M(e){let t=!!e.editPreviewOptions;return a.createElement(P.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:t,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[N(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?t=>e.editPreviewOptions.applyToAllCallback(t,N(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,d.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,d.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===h.Zp.DETAIL_MODAL||t,enableSnapToGuidelines:t,enableZoomControls:e.source===h.Zp.DETAIL_MODAL})}function S(e){let t=(0,C.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(C.l0,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function B(e){return e.isThumbnail?a.createElement("div",null,(0,g.tx)("fig_feed.video")):a.createElement("div",null,(0,g.tx)("fig_feed.transcode_after_submit"))}function D(e){if(v.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return a.createElement(B,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return a.createElement(O,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let t=(0,C.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(C.l0,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function L(e){return a.createElement(a.Fragment,null,a.createElement(u.x,{isLoading:!e.content.imageUrl},()=>a.createElement(O,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&a.createElement("div",{className:T.mB},(0,g.tx)("fig_feed.prototype_badge")))}function z(e){let t=e.contentItems[e.selectedIdx];switch(t.type){case f.cM.NODE:return a.createElement(y,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return a.createElement(M,{imageContent:t,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return a.createElement(S,{videoContent:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return a.createElement(A,{prototypeContent:t});default:(0,i.xb)(t)}}function H(e){switch(e.content.type){case f.cM.NODE:let t=e.content,n=t.mediumImageUrl??t.preview_image_url??t.image_url,o=t.preview_image_url??t.image_url;return a.createElement(u.x,{isLoading:!!t.isLoading},()=>a.createElement(O,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!t.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:t.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let l=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,r=e.content.preview_image_url??e.content.url;return a.createElement(O,{imgUrl:e.isEditing?r:l,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?r:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return a.createElement(D,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return a.createElement(L,{content:e.content,isThumbnail:e.isThumbnail});default:(0,i.xb)(e.content)}}function R(e){let t=!!e.editPreviewOptions,n=e.contentItems.length>1||t,{selectedContentIdx:i,pageBackgroundColor:o,setSelectedContentIdx:r,contentItems:c,onContentHover:p}=e,[v,h]=(0,s.M)();a.useEffect(()=>{p?.(h)},[h,p]);let I=a.useMemo(()=>c[i],[c,i]),P=a.useMemo(()=>n?a.createElement(F,{direction:"horizontal",contentItems:c,selectedIdx:i,setSelectedIdx:r,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,c,i,r,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&I&&"node"===I.type&&I.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,d.H0)(I.backgroundColor)??void 0);let{openEditPreviewModalCallback:w,deleteSelectedItemCallback:C}=e,[k,x]=a.useState(!1),U=a.useMemo(()=>{if(!w&&!C||!k||!I)return null;let e=n?T.IN:T.r$;return a.createElement("div",{className:e},I&&(0,f.aT)(I)&&w&&a.createElement("div",null,a.createElement("button",{onClick:w,className:T.nY},(0,g.tx)("fig_feed.edit_preview"))),C&&a.createElement(m.B,{svg:_.A,className:T.j5,onClick:C,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,g.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[k,I,n,w,C]);return a.createElement("div",{className:l()(T.qG,t&&T.Mm)},a.createElement("div",{ref:v,className:n&&!t?T.Uz:T.xs,style:{backgroundColor:(0,b.mz)(I,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>x(!0),onPointerLeave:()=>x(!1),"data-testid":"feed-post-content-section"},U,a.createElement(u.x,{isLoading:!I},()=>e.staticContent?a.createElement(H,{content:I,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):a.createElement(z,{contentItems:c.filter(e=>null!==e),selectedIdx:i,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),P)}function F(e){let t=a.useRef(null);a.useEffect(()=>{let n=t.current,a=t.current?.children[e.selectedIdx];if(!n||!a)return;let i=n?.getBoundingClientRect();i?.top>=0&&i?.left>=0&&i?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i?.right<=(window.innerWidth||document.documentElement.clientWidth)&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,C.pN)(),{scrollToItem:i,onReorderCallback:o,setSelectedIdx:d,deleteItem:s}=e,[c,u]=a.useState(null),g=e.thumbnailType||"wide",v=a.useCallback((t,o,r)=>{let m=l()(T.iD,r&&T.Ut,"small"===g&&T.kL,"wide"===g&&T.Wr);return a.createElement("div",{className:m,onMouseDown:()=>{n(e.feedPostUuid),i?.(o),d?.(o)},onPointerEnter:()=>u(o),onPointerLeave:()=>u(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(t,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},a.createElement(H,{content:t,isThumbnail:!0,isEditing:e.isEditing}),s&&o===c&&a.createElement("div",{className:T.nx},a.createElement("div",{className:T.fy,onClick:e=>{e.stopPropagation(),s(o)},role:"button",tabIndex:0},a.createElement(I.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,g,e.isEditing,c,n,i,d,s]),f=t=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===t?0:e.contentItems.length-1);return a.createElement(p.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===t?-1:1)+e.contentItems.length)%e.contentItems.length;d?.(n)},icon:"left"===t?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=l()(T.sm,"horizontal"===e.direction?T.d9:T.b1);if(o)return a.createElement("div",{className:E},a.createElement(r._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:l()(T.M2,"horizontal"===e.direction?T.AA:T.h0),role:"button",tabIndex:0,ref:t},e.contentItems.map((t,n)=>a.createElement(r._.Item,{value:t,id:N(t),key:N(t),translate:"no"},v(t,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&a.createElement("div",{className:l()(T.iD,"small"===e.thumbnailType&&T.kL,"wide"===e.thumbnailType&&T.Wr,e.isAddingContent?T.ad:T.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},a.createElement(m.B,{svg:k.A}))));{let n=l()(T.M2,"horizontal"===e.direction?T.n2:T.h0);return a.createElement("div",{className:E},f("left"),a.createElement("div",{className:n,ref:t},e.contentItems.map((t,n)=>a.createElement(a.Fragment,{key:n},v(t,n,n===e.selectedIdx)))),f("right"))}}function $(e){let t=e.contentItems[e.selectedIdx],n=t&&(0,f.aT)(t),{onReorderCallback:i,deleteItemAtIdx:o,setSelectedIdx:r,onFileInputChange:d,setContentPreview:s,openPostFromFileModal:c}=e,[p,v]=a.useState(0===e.contentItems.length);a.useEffect(()=>{0===e.contentItems.length?v(!0):v(!1)},[e.contentItems.length]);let h=e.contentItems.length>=1||n,I=a.useCallback(()=>{v(!0)},[]),w=a.useCallback(e=>{r(e),v(!1)},[r]),[C,k]=a.useState(!1),O=a.useMemo(()=>C&&t?a.createElement("div",{className:T.r$},o&&a.createElement(m.B,{svg:_.A,className:T.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,g.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[t,C,e.selectedIdx,o]),y=a.useRef(null),A=(e,t,n,i)=>a.createElement("div",{className:T.c9,onClick:i,role:"button",tabIndex:0},a.createElement(m.B,{svg:n}),a.createElement("div",{className:T.LO},a.createElement("div",{className:T.Gq},e),t)),M=a.useCallback((n,a,i)=>{let o=N(t);t&&o&&!(0,P.L$)(a,e.snapshotStates[o])&&s(o,n,a)},[t,e.snapshotStates,s]),S=(t,n)=>{M(t,n,e.selectedIdx)},[B,D]=a.useState({}),L=a.useCallback(()=>{D(e=>({...e,[N(t)]:!0}))},[t]);return a.createElement("div",null,(()=>{if(p){let t=null===e.attachedFile?(0,g.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,g.t)("fig_feed.share_something_from_figjam"):(0,g.t)("fig_feed.add_frames_from_this_figma_file");return a.createElement("div",{className:l()(T.Er,h&&T.QX)},a.createElement("div",{className:l()(T.hM,e.dragging&&T.cB)},A((0,g.t)("fig_feed.choose_frames"),t,x.A,c),a.createElement("form",null,a.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:y,onChange:d(y),multiple:!0,className:T.Fg}),a.createElement("label",{htmlFor:"fileInput"},A((0,g.t)("fig_feed.upload_files"),(0,g.t)("fig_feed.add_images_or_videos"),U.A)))))}return a.createElement("div",{className:l()(T.Er,h&&T.QX),style:{backgroundColor:(0,b.mz)(t,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>k(!0),onPointerLeave:()=>k(!1)},O,a.createElement(u.x,{isLoading:!t},()=>(0,f.aT)(t)&&("edit"===e.mode&&(B[N(t)]||!t.shouldBlockEditPreview)||"create"===e.mode)?a.createElement(z,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:S,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):a.createElement(H,{content:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(t)&&t.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?L:void 0})),e.dragging&&a.createElement("div",{className:T.c$},a.createElement("div",{className:T.W9})))})(),h?a.createElement(F,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:i,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:w,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:p,setAddingActive:I,isEditing:!0}):null)}},853807:(e,t,n)=>{n.d(t,{A:()=>v,B:()=>p});var a=n(848318),i=n(716544),o=n(536384),l=n.n(o),r=n(785572),d=n(753131),s=n(576220),c=n(790355),u=n(584305),m=n(672182),g=n(927317);function p(e){let t=e.date&&a.createElement(d.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[a.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:l()(e.onTileMouseDown&&g.WJ,g.PI)},t)];return a.createElement("div",{className:g.ME},a.createElement(v,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function v(e){let t=(0,i.wA)(),n=a.useCallback(n=>{n.stopPropagation(),e.user.id&&t(c.$T({view:"user",userId:e.user.id,userViewTab:m.o.INTERNAL_PROFILE_POSTS}))},[t,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return a.createElement("div",{className:g.ME},!e.noAvatar&&a.createElement(r.N,{onClick:n,trusted:!0,onMouseDown:u.dG},a.createElement(s.H8,{user:e.user,size:e.size??s.Pf.LARGE})),o&&a.createElement("div",{className:g.Qs},!e.noHandle&&a.createElement(r.N,{className:g.TK,onClick:n,trusted:!0},a.createElement("div",{className:g.p$},e.user.handle)),e.appendToHandle))}}}]);

//# debugId=033cf348-7683-5285-b549-78f4989c8182

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/57a1f9c40f2b87f5b1c7ce8b4dd65c7ff5150dda/7824-4c95de414e51a546.min.js.map