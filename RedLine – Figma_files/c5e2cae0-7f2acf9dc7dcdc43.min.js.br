"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9be8635d-fb76-55a6-a575-fc6000774cdf")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2677],{859355:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>l,E8:()=>E,G8:()=>T,Jh:()=>o,Mm:()=>c,Ms:()=>y,Q$:()=>N,QB:()=>v,VA:()=>f,Vf:()=>_,W2:()=>d,_R:()=>u,b:()=>i,gt:()=>x,hx:()=>n,jG:()=>h,o:()=>s,oE:()=>g,y3:()=>S,yH:()=>m,yl:()=>r});let r="org_upgrade_single_team_modal--modal--ksTCZ",s="org_upgrade_single_team_modal--planModalHeader--NF9Rm",l="org_upgrade_single_team_modal--planModalHeaderText--ooJle",n="org_upgrade_single_team_modal--planModalTitle--i2U18 text--fontPos24--YppUD text--_fontBase--QdLsd",i="org_upgrade_single_team_modal--closeButton--xlW3E",o="org_upgrade_single_team_modal--planModalHeaderDivider--h1IPt",m="org_upgrade_single_team_modal--planGrid--vjBAw",c="org_upgrade_single_team_modal--planGrid__vertDivided--GAHYl",d="org_upgrade_single_team_modal--seeAllFeatures--86diJ",_="org_upgrade_single_team_modal--teamPlan--K5SN-",u="org_upgrade_single_team_modal--itemList--pQSea",p="org_upgrade_single_team_modal--planItem--BQHfH",g="org_upgrade_single_team_modal--checkIcon--vhgrx",E="org_upgrade_single_team_modal--planSelectButton--CKoDi",h="org_upgrade_single_team_modal--scrollContainer--sufjZ",f="org_upgrade_single_team_modal--subtitle--nt2Dh",v="org_upgrade_single_team_modal--planNameBase--R8WKM text--fontPos16--oMC-G text--_fontBase--QdLsd",y="org_upgrade_single_team_modal--planPriceView--L7aSJ",S="org_upgrade_single_team_modal--priceRow--jzozY text--fontPos11--2LvXf text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--priceFigureWithFigjam--0E8M8 text--fontPos16--oMC-G text--_fontBase--QdLsd",N="org_upgrade_single_team_modal--figmaPriceWithDevMode--k-2WW",x="org_upgrade_single_team_modal--devModeText--EKgJM"},62130:(e,t,a)=>{a.d(t,{$g:()=>c,DI:()=>m,Eh:()=>n,GK:()=>s,J1:()=>o,KV:()=>l,b:()=>r,cr:()=>g,jG:()=>d,kz:()=>_,nW:()=>p,o8:()=>u,u1:()=>i,wv:()=>E});let r="universal_upgrade_sequence--closeButton--Us7fC",s="universal_upgrade_sequence--modalTitle--j-zLx text--fontPos18--rYXJb text--_fontBase--QdLsd",l="universal_upgrade_sequence--modalSubtitle--ucPxW text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--createTeamInput--kWzFx basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",i="universal_upgrade_sequence--spinner--CvsHJ",o="universal_upgrade_sequence--tileUpgradeButton--GxMSU",m="universal_upgrade_sequence--nextButtonSmall--tUSIb universal_upgrade_sequence--nextButton--F2XJ4",c="universal_upgrade_sequence--createTeamSection--XhWMJ",d="universal_upgrade_sequence--scrollContainer--BQFbB",_="universal_upgrade_sequence--scrollContainerTopBorder--yuAD-",u="universal_upgrade_sequence--scrollContainerBottomBorder--CwNTV",p="universal_upgrade_sequence--teamTileContainer--kS2oM org_self_serve--teamLargeTileContainer--QLNdE",g="universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--45rbF text--fontPos14--OL9Hp text--_fontBase--QdLsd",E="universal_upgrade_sequence--lastTeamTile--zfV5W universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--45rbF text--fontPos14--OL9Hp text--_fontBase--QdLsd"},683148:(e,t,a)=>{a.d(t,{$M:()=>G,$y:()=>k,BP:()=>D,Bb:()=>eo,ER:()=>ed,Ed:()=>Z,Et:()=>n,F0:()=>r,Hl:()=>es,I1:()=>J,Jo:()=>Y,K6:()=>ec,KZ:()=>w,LQ:()=>b,M7:()=>l,N5:()=>K,Nd:()=>o,Nv:()=>L,O:()=>W,O2:()=>er,OL:()=>c,Or:()=>F,Ov:()=>u,Ps:()=>M,Qv:()=>X,S$:()=>O,SU:()=>V,Sv:()=>p,TB:()=>_,TK:()=>h,Uu:()=>f,V:()=>ei,W:()=>m,Xq:()=>q,Yn:()=>y,ZE:()=>j,ZM:()=>E,_h:()=>s,aK:()=>g,aQ:()=>P,bv:()=>S,cH:()=>I,cc:()=>et,er:()=>d,ex:()=>$,fI:()=>x,gn:()=>H,i9:()=>v,iv:()=>Q,jg:()=>en,kH:()=>em,lQ:()=>ee,li:()=>i,ll:()=>U,nm:()=>ea,nz:()=>B,o1:()=>R,rh:()=>N,sk:()=>T,tZ:()=>C,uC:()=>el,uD:()=>z,xr:()=>A});let r="org_self_serve_figjam--selfServePage--1Pd61",s="org_self_serve_figjam--stepContainer--4DmH4",l="org_self_serve_figjam--stepContent--sIESH",n="org_self_serve_figjam--stepContentTeamCreation--Fp8lm",i="org_self_serve_figjam--menuContainer--mhFPU",o="org_self_serve_figjam--cancelMenuItem--VDc0F",m="org_self_serve_figjam--pageTitle--GeIxz",c="org_self_serve_figjam--pageSubTitle--MWg3I",d="org_self_serve_figjam--purchaseSummary--BdFGK",_="org_self_serve_figjam--sidebarScrollContainer--6fUvG",u="org_self_serve_figjam--summaryHeader--mJZjx",p="org_self_serve_figjam--subText--ecX4J",g="org_self_serve_figjam--summaryDivider--h5Ism",E="org_self_serve_figjam--summaryDividerFull--ILYn1 org_self_serve_figjam--summaryDivider--h5Ism",h="org_self_serve_figjam--headerText--k5cYS",f="org_self_serve_figjam--flex--vx--y",v="org_self_serve_figjam--svgText--1Kze3 org_self_serve_figjam--flex--vx--y",y="org_self_serve_figjam--lineItem--zQ4al org_self_serve_figjam--flex--vx--y",S="org_self_serve_figjam--boldText--hIwy6 org_self_serve_figjam--headerText--k5cYS",T="org_self_serve_figjam--nextStep--0Rz7F",N="org_self_serve_figjam--nextStepContainer--4SJ1R",x="org_self_serve_figjam--paymentForm--LZN5V",b="org_self_serve_figjam--teamLargeTileContainer--MyYEC",w="org_self_serve_figjam--teamSmallTileContainer--2h6Fm org_self_serve_figjam--teamLargeTileContainer--MyYEC",C="org_self_serve_figjam--teamTileLarge--4o-QM text--fontPos14--OL9Hp text--_fontBase--QdLsd",A="org_self_serve_figjam--teamTileSmall--T-bgz org_self_serve_figjam--teamTileLarge--4o-QM text--fontPos14--OL9Hp text--_fontBase--QdLsd",I="org_self_serve_figjam--showMoreContainer--8MTd2 visual_bell--messageContainer--fkhJH _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",P="org_self_serve_figjam--showMoreMessage--QFI-6 visual_bell--message--lQw67 visual_bell--messageBase--Dg3ya ellipsis--ellipsis--Tjyfa",k="org_self_serve_figjam--helpIcon--USN0T",D="org_self_serve_figjam--teamText--uM4G9",M="org_self_serve_figjam--teamName--o8fDG text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",O="org_self_serve_figjam--teamEditors--DcRwf text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",R="org_self_serve_figjam--teamCheck--uEUSd",L="org_self_serve_figjam--detailsForm--OP5Xc stripe--stripeCardAndAddress--b42eG org_self_serve_figjam--paymentForm--LZN5V",B="org_self_serve_figjam--stepRect--xun9X org_self_serve_figjam--boxBorder--Ynhnh",V="org_self_serve_figjam--verticalDivider--P62uG",U="org_self_serve_figjam--reviewSummary--L-vwU",$="org_self_serve_figjam--reviewItem--pJrBr",F="org_self_serve_figjam--billingDetails--tP-T7",j="org_self_serve_figjam--billingSubText--F-odd",G="org_self_serve_figjam--billingItem--qC3Rr",z="org_self_serve_figjam--textLink--3YiWl org_self_serve_figjam--billingSubText--F-odd",H="org_self_serve_figjam--confirmPaymentBox--81yT4",W="org_self_serve_figjam--msaCheck--Z6E-I",Y="org_self_serve_figjam--confirmationBox--vwa8o org_self_serve_figjam--stepRect--xun9X org_self_serve_figjam--boxBorder--Ynhnh",K="org_self_serve_figjam--flexBox--27nXS",X="org_self_serve_figjam--confirmationPageText--HepiY text--fontPos13--xW8hS text--_fontBase--QdLsd",J="org_self_serve_figjam--confirmationCharge--xXWDy org_self_serve_figjam--confirmationPageText--HepiY text--fontPos13--xW8hS text--_fontBase--QdLsd",Z="org_self_serve_figjam--confirmationRow--614q1",q="org_self_serve_figjam--confirmationHomeButton--Hmwwi text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",Q="org_self_serve_figjam--confirmationAmountDue--aIA6K",ee="org_self_serve_figjam--reviewSubTitle--xZuB-",et="org_self_serve_figjam--confirmationHeading--qTtpj",ea="org_self_serve_figjam--confirmationLoadingText--P3ZRV org_self_serve_figjam--msaLabelText--Jc4EU",er="org_self_serve_figjam--greenCheck--6H2Yf",es="org_self_serve_figjam--plusSvg--H-S-J",el="org_self_serve_figjam--purchaseMinimumBanner--OhvfQ",en="org_self_serve_figjam--confirmationPage--owo-p",ei="org_self_serve_figjam--currencyText--medYd org_self_serve_figjam--boldText--hIwy6 org_self_serve_figjam--headerText--k5cYS",eo="org_self_serve_figjam--createTeamContainer--278DU",em="org_self_serve_figjam--teamsContainer--KNWir",ec="org_self_serve_figjam--teamCheckboxContainer--PelZQ",ed="org_self_serve_figjam--selectTeamsIcon--y2CIg"},192736:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>x});var r=a(848318),s=a(716544),l=a(925025),n=a(145015),i=a(693965),o=a(693506),m=a(199584),c=a(771186),d=a(20701),_=a(166365),u=a(17755),p=a(442313),g=a(96836),E=a(215874),h=a(790355),f=a(194546),v=a(614337),y=a(155651),S=a(511231),T=a(821527);let N=e=>{let t=(0,s.d4)(t=>{let a=v.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,s.d4)(t=>t.teamUserByTeamId[e]||{}),n=(0,s.wA)();r.useEffect(()=>{n(v.Xw({teamId:e}))},[n,e]);let i=t!==l.r.SUCCESS;return r.useEffect(()=>{if(!i){let e=Object.keys(a).length;n(f.Az({numWhiteboardEditors:e})),n(f.js({numDesignEditors:e}))}},[n,i,a]),i};function x({selectedView:e}){let{teamId:t}=e,a=N(t),l=(0,s.wA)(),v=()=>{l(f.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return r.createElement(y.fu,{name:"Edu Review",properties:{teamId:t}},r.createElement("div",null,r.createElement(o.O,{menu:r.createElement(i.X,{onClick:()=>{l(h.$T({view:"team",teamId:t})),e.onCloseOrComplete?.()}},r.createElement(_.B,{svg:T.default,className:"edu_review--modalCloseX--PeJlf",dataTestId:"close-button"}))},r.createElement("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--p1Flp"},r.createElement(E.J,{index:3})),r.createElement("div",{className:u.s.flex.flexColumn.itemsCenter.alignCenter.$},r.createElement(d.JR,null,(0,p.tx)("edu.almost_done_everything_look_good")),r.createElement(n.Kz,{multiple:4}),r.createElement(c.x,{isLoading:a},()=>r.createElement(m.o,null,r.createElement(g.d,{selectedView:e,onClickConfirm:v,currency:(0,S.LN)(),canSeeBillingAddressExp:!1})))))))}},396960:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>en});var r=a(848318),s=a(716544),l=a(992277),n=a(565460),i=a(157907),o=a(379338),m=a(653959),c=a(773969),d=a(991371),_=a(470403),u=a(145015),p=a(575492),g=a(166365),E=a(17755),h=a(442313),f=a(500276),v=a(61485),y=a(790355),S=a(449737),T=a(180423),N=a(155651),x=a(95646),b=a(171063),w=a(595919),C=a(996511),A=a(511231),I=a(922030),P=a(993421),k=a(832876),D=a(845286),M=a(117592),O=a(445777),R=a(846153),L=a(90741),B=a(882439),V=a(478550),U=a(276430),$=a(194836),F=a(72319),j=a(517989),G=a(376780),z=a(920963);function H({currency:e,hideModal:t,choosePlan:a,TeamIllustration:l,upsellSource:n}){let i=(0,s.wA)();return r.createElement("div",{className:E.s.flex.flexColumn.gap8.$,style:f.sx.add({padding:"48px 56px",maxWidth:"650px"}).$},r.createElement("p",{className:E.s.textHeadingLarge.$},(0,h.tx)("org_upgrade.multi_team.bring_your_teams_together")),r.createElement("p",{className:E.s.textHeadingMedium.$,style:f.sx.add({fontWeight:400}).$},(0,h.tx)("plan_comparison.campfire.org.description")),r.createElement(B.e6,{className:"campfire_org_upgrade_multi_team_modal--closeButton--THg83",onClick:t},r.createElement(R.A,null)),r.createElement("div",{className:E.s.flex.gap16.$},r.createElement("div",{className:E.s.flex.flexColumn.gap16.flex1.mt16.$},r.createElement(K,{currency:e}),r.createElement("div",null,r.createElement(B.Ih,{onClick:a},(0,h.tx)("plan_comparison.campfire.choose_plan")),r.createElement("div",{className:E.s.font11.lh16.alignCenter.mt4.$},(0,h.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:r.createElement("button",{className:E.s.colorTextBrand.cursorPointer.$,onClick:()=>i(S.to({type:V.lk,data:{source:V.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},(0,h.tx)("plan_comparison.campfire.contact_sales"))}))),r.createElement("div",{className:E.s.bt1.bSolid.colorBorder.$}),r.createElement(X,{upsellSource:n})),r.createElement("div",{className:E.s.flex.flex1.itemsCenter.justifyCenter.$},l)))}let W=new F.X([b.ud.EXPERT,b.ud.DEVELOPER,b.ud.COLLABORATOR]),Y=[b.ud.EXPERT,b.ud.DEVELOPER,b.ud.COLLABORATOR];function K({currency:e}){let t={currency:e,tier:P.Ju.ORG,renewalTerm:P.IX.YEAR,unit:P.IX.MONTH},a=(0,x.jv)({billableProductKeys:W,baseQuery:t}),[s]=(0,m.mI)(a);if(null===s.data)throw Error("Price data is null");let l=new A.vr(e);return r.createElement("div",{className:E.s.flex.flexColumn.$},Y.map(e=>r.createElement("div",{key:e,className:E.s.flex.justifyBetween.$},r.createElement("div",{className:E.s.flex.gap4.itemsCenter.$},(0,U.B)({type:e,size:"24",removeBackgroundColor:!0}),r.createElement("p",{className:E.s.textBodyLarge.$},function(e){switch(e){case b.ud.EXPERT:return(0,h.t)("nux.campfire.full_seat");case b.ud.DEVELOPER:return(0,h.t)("nux.campfire.dev_seat");case b.ud.COLLABORATOR:return(0,h.t)("nux.campfire.collab_seat");default:(0,O.xb)(e)}}(e))),r.createElement("p",{className:E.s.textBodyMedium.$},(0,h.tx)("nux.price_per_month",{price:r.createElement("span",{className:E.s.textBodyLargeStrong.$},l.formatMoney(s.data[e].amount))})))))}function X(e){let t=(0,j.H)({useCurrentPlan:!0})&&e.upsellSource===z.b.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,h.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:$.b[G.Ag.ORG]}):null,(0,h.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,h.tx)("plan_comparison.campfire.org.feature.branching"),(0,h.tx)("plan_comparison.campfire.org.feature.security"),(0,h.tx)("plan_comparison.campfire.org.feature.scim"),(0,h.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return r.createElement("div",null,a.map((e,a)=>{let s=t&&0===a?r.createElement("span",{className:E.s.textBodyLargeStrong.$},e):r.createElement("span",null,e);return r.createElement("div",{key:a,className:E.s.flex.$},r.createElement(L.g,{className:E.s.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),r.createElement("p",{className:E.s.textBodyLarge.$},s))}))}let J="org_upgrade_multi_team_modal--planModalDivider--Rnmy0";var Z=a(859355),q=a(7452),Q=a(294813);let ee=(0,o.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),et=(0,o.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),ea=(0,o.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function er(e){return r.createElement("div",{className:"org_upgrade_multi_team_modal--planItem--P4LRr"},r.createElement(g.B,{svg:q.A,className:"org_upgrade_multi_team_modal--checkIcon--KnZJe"}),r.createElement("p",null,e.text))}function es(e){let t=(0,s.wA)(),a=()=>{t(S.Ce())},l=(0,v.sx)(),o=r.useMemo(()=>[(0,h.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,h.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,h.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,h.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),_=()=>{a(),t(y.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},N=e=>r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntry---bU9i",key:e.id},r.createElement(k.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--aJZdJ ellipsis--ellipsis--Tjyfa"},e.name)),C=r.useMemo(()=>{switch(Object.keys(e.teams).length){case 2:return 184;case 3:return 192;default:return 221}},[e.teams]),I=Z.G8,D=(0,A.wU)(),O=w.Oq.dict(e=>({currency:D.currency,billableProductKey:e,tier:P.Ju.ORG,renewalTerm:P.IX.YEAR,unit:P.IX.MONTH})),R=(0,x.SK)(O,x.Fq.UPSELL_MODALS),[L]=(0,m.mI)(R);if(null===L.data)throw Error("Price data is null");let B=L.data,V=r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--MLN4f",style:f.sx.if(l,f.sx.add({width:"200px"})).$},r.createElement("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--KE5ZD"},r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListHeader--Eyf-F"},r.createElement("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--vYLRQ",src:ea,draggable:!1,alt:""}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--EKk6-"},(0,h.tx)("org_upgrade.multi_team.acme_inc")),r.createElement(g.B,{svg:Q.A,className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--V4dem"})),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListDivider--A9NYP"}),(()=>{let t=e.unsortedTeamIds,a=[];for(var s=0;s<Math.min(4,t.length);s++){let r=e.teams[t[s]];a.push(N(r))}return r.createElement("div",{className:"org_upgrade_multi_team_modal--teamList--rzATA"},a)})(),r.createElement("div",{className:l?"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--fHW0n":"org_upgrade_multi_team_modal--teamIllustrationRightSection--irt0w"},r.createElement("img",{className:"org_upgrade_multi_team_modal--filesIllustration--teK60",src:et,draggable:!1,alt:""}),r.createElement("img",{src:ee,draggable:!1,alt:""})),l&&r.createElement("div",{className:E.s.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:f.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$},r.createElement(n.s,{className:E.s.minW16.$}),r.createElement("p",{className:E.s.textBodySmallStrong.$},(0,h.tx)("org_upgrade.illustration.sign_in_with_sso")),r.createElement("div",{className:E.s.absolute.mt32.$,style:f.sx.add({right:"-8px"}).$},r.createElement(el,null)))));return r.createElement(M.Nb,{className:"org_upgrade_multi_team_modal--modal--fVO2l",hide:a,size:"fitContent",useModalViewScroll:!1},l?r.createElement(H,{currency:D.currency,hideModal:a,choosePlan:_,TeamIllustration:V,upsellSource:e.upsellSource}):r.createElement(p.P,{className:"org_upgrade_multi_team_modal--scrollContainer--ZL-IQ"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalHeader--drD3M",style:{height:64,marginBottom:32}},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalTitle--YP3RJ text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600}},(0,h.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")),r.createElement(d.Jn,{className:"org_upgrade_multi_team_modal--closeButton--x3l-2",onClick:a,innerText:"close"})),r.createElement("div",{className:J}),r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetails--Fu8GW"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--mBwlh"},r.createElement("div",{className:"org_upgrade_multi_team_modal--billingCadence--WBrj-"},(0,h.tx)("org_upgrade.multi_team.annual_billing_only")),r.createElement("div",{className:Z.y3},r.createElement("p",{className:Z.Q$},(0,h.tx)("org_upgrade.multi_team.figma"),(0,i.k)().billing_dev_mode_customer_ui&&r.createElement("div",{className:Z.gt},r.createElement(c.G,null))),r.createElement("div",null,(0,h.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:Z.G8},D.formatMoney(B[b.ud.DESIGN].amount))}))),(0,i.k)().billing_dev_mode_customer_ui&&r.createElement("div",{className:Z.y3},(0,h.tx)("org_upgrade.multi_team.dev_mode"),r.createElement("div",null,(0,h.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:Z.G8},D.formatMoney(B[b.ud.DEV_MODE].amount))}))),r.createElement("div",{className:Z.y3},(0,h.tx)("org_upgrade.multi_team.fig_jam"),r.createElement("div",null,(0,h.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:I},D.formatMoney(B[b.ud.FIGJAM].amount))}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--planText--MQX-G"},r.createElement("div",{className:"org_upgrade_multi_team_modal--itemList--SC-iA"},o.map((e,t)=>r.createElement("div",{key:t},r.createElement(er,{text:e}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--seeAll--8WNIM"},r.createElement(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,h.tx)("org_upgrade.multi_team.see_all_features")))))),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--xl3pT",style:{height:C}},V)),r.createElement("div",{className:J}),r.createElement(u.vd,{onClick:_,className:"org_upgrade_multi_team_modal--continueButton--Zo9V7",trackingProperties:{trackingDescriptor:T.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,h.tx)("org_upgrade.multi_team.continue")),r.createElement("div",{className:"org_upgrade_multi_team_modal--spaceFiller--f9bwU"})))}function el(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"17",viewBox:"0 0 15 17",fill:"none"},r.createElement("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black"},r.createElement("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),r.createElement("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"}))}let en=(0,s.Ng)(e=>{let{teams:t}=e;return{teams:t,unsortedTeamIds:(0,I._L)(e.user,e.roles,e.teams)}})((0,N.kp)(function(e){return r.createElement(_.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:l.e.BILLING,fallback:r.createElement(C.K,null)},r.createElement(r.Suspense,{fallback:r.createElement(D.N,{hiddenTitle:(0,h.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500})},r.createElement(es,{...e})))},"Multi-Team Org Upgrade Modal"))},949364:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>G,PlanWithFigjamPriceView:()=>F});var r=a(848318),s=a(716544),l=a(992277),n=a(157907),i=a(536384),o=a.n(i),m=a(653959),c=a(773969),d=a(991371),_=a(470403),u=a(145015),p=a(575492),g=a(166365),E=a(442313),h=a(61485),f=a(790355),v=a(449737),y=a(180423),S=a(155651),T=a(95646),N=a(171063),x=a(595919),b=a(996511),w=a(976308),C=a(376780),A=a(511231),I=a(572699),P=a(922030),k=a(993421),D=a(988540),M=a(845286),O=a(117592),R=a(515071),L=a(859355),B=a(545655),V=a(871993);function U(e){return r.createElement(r.Fragment,null,r.createElement(g.B,{svg:e.isArrow?B.A:V.A,className:L.oE}),r.createElement("p",null,e.text))}function $(e){return r.createElement("div",{className:L.Vf},r.createElement("div",{className:L._R},e.features.map((e,t)=>r.createElement("div",{key:t,className:L.$P},r.createElement(U,{text:e.text,isArrow:e.isArrow}))),e.plan===C.Ag.ORG&&r.createElement("div",{className:L.W2},r.createElement(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,E.tx)("org_upgrade.single_team.see_all_features"))),e.plan===C.Ag.ORG&&r.createElement(u.vd,{onClick:e.onUpgrade,className:L.E8,trackingProperties:{trackingDescriptor:y.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,E.tx)("org_upgrade.single_team.upgrade_to_an_organization"))))}function F(e){return r.createElement("div",{className:L.Ms,style:{padding:e.padding},"data-testid":e.dataTestId},r.createElement("h2",{className:L.QB},e.name),r.createElement("p",{className:L.VA},e.subtitle),r.createElement("div",{className:L.y3},r.createElement("p",{className:L.Q$},(0,E.tx)("plan_details.figma"),(0,n.k)().billing_dev_mode_customer_ui&&r.createElement("div",{className:L.gt},r.createElement(c.G,null))),r.createElement("div",null,r.createElement("p",{className:L.G8},e.prices[N.ud.DESIGN]))),(0,n.k)().billing_dev_mode_customer_ui&&e.prices[N.ud.DEV_MODE]&&r.createElement("div",{className:L.y3},r.createElement("p",null,(0,E.tx)("plan_details.dev_mode_only")),r.createElement("div",null,r.createElement("p",{className:L.G8},e.prices[N.ud.DEV_MODE]))),r.createElement("div",{className:L.y3},r.createElement("p",null,(0,E.tx)("plan_details.fig_jam")),r.createElement("div",null,r.createElement("p",{className:L.G8},e.prices[N.ud.FIGJAM]))))}function j(e){let t=(0,I.rC)({reportErrorsToTeam:l.e.BILLING}),a={planParentId:t.key.parentId||"",planType:t.key.type},n=(0,T.vK)(a),[i]=(0,m.mI)(n),c=(0,T.vu)(i);if(null===c.data)throw Error("Contract prices currency was null");let _=c.data,u=x.Oq.exclude([N.ud.DEV_MODE]),g=u.dict(e=>({currency:_,billableProductKey:e,tier:k.Ju.PRO,renewalTerm:k.IX.YEAR,unit:k.IX.MONTH})),h=(0,T.ic)(g,a,T.Fq.UPSELL_MODALS_CONTRACT),y=(0,T.jv)({billableProductKeys:x.Oq,baseQuery:{currency:_,tier:k.Ju.ORG,renewalTerm:k.IX.YEAR,unit:k.IX.MONTH}}),[S,b]=(0,m.mI)(h,y),w=(0,T.vu)(S);if(null===w.data)throw Error("Contract price data was null");let P=(0,T.vu)(b);if(null===P.data)throw Error("Sticker price data was null");let D=w.data,M=P.data,R=(0,s.wA)(),B=()=>{R(v.Ce())},V=new A.vr(_);return r.createElement(O.Nb,{className:L.yl,hide:B,size:586,useModalViewScroll:!1},r.createElement(p.P,{className:L.jG},r.createElement("div",{className:L.o},r.createElement("div",{className:L.Dz},r.createElement("div",{className:L.hx},(0,E.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"))),r.createElement(d.Jn,{className:L.b,onClick:B,innerText:"close"})),r.createElement("div",{className:o()(L.yH,L.Mm)},r.createElement(F,{dataTestId:"pro-prices",name:(0,E.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,E.t)("org_upgrade.single_team.price_when_billed_annually"),prices:u.dict(e=>`${V.formatMoney(D[e].amount)}`),padding:"16px 31px 16px 36px"}),r.createElement(F,{dataTestId:"org-prices",name:(0,E.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,E.t)("org_upgrade.single_team.annual_billing_only"),prices:x.Oq.dict(e=>`${V.formatMoney(M[e].amount)}`),padding:"16px 32px 16px 33px"})),r.createElement("div",{className:L.Jh}),r.createElement("div",{className:L.yH},r.createElement($,{plan:C.Ag.PRO,features:[{text:(0,E.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,E.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,E.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),r.createElement($,{plan:C.Ag.ORG,features:[{text:(0,E.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,E.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,E.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,E.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,E.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,E.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,E.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{B(),R(f.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource}))))}let G=(0,S.kp)(function(e){let t=(0,h.sx)(),a=(0,P.ol)();return r.createElement(_.tH,{boundaryKey:"OrgUpgradeSingleTeamModal",team:l.e.BILLING,fallback:r.createElement(b.K,null)},r.createElement(r.Suspense,{fallback:r.createElement(M.N,{hiddenTitle:(0,E.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586})},t?r.createElement(R.bP,{team:a,resource:D.Bi.ORG,currentPlan:w.F.Plan.PRO,upsellPlan:w.F.Plan.ORG,editorType:C._Y.DESIGN,upsellSource:e.upsellSource}):r.createElement(j,{...e})))},"Single-Team Org Upgrade Modal")},39915:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>j});var r=a(848318),s=a(716544),l=a(141039),n=a(730169),i=a(991371),o=a(145015),m=a(442313),c=a(124033),d=a(790355),_=a(110979),u=a(449737),p=a(194546),g=a(155651),E=a(841747),h=a(834996),f=a(511231),v=a(710665),y=a(515673),S=a(217084),T=a(117592),N=a(551316),x=a(579463),b=a(757033),w=a(608321),C=a(282424),A=a(473889),I=a(8374),P=a(452546),k=a(106067),D=a(802780),M=a(481540),O=a(661780),R=a(111693),L=a(962700),B=a(62130);let V=(0,I.nF)((e,{teamName:t,selectedView:a,currency:r,onSuccess:s,onError:l,onBillingCompleteRedirectInfo:n})=>{let i;b.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(i="team"in t.meta?t.meta.team:t.meta,e.dispatch(k.bE({team:i})),(0,M._J)("Team Created",i.id,e.getState()),L.G.getTeam({teamId:i.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(P.bE({role:a}));s(),e.dispatch(p.WX({teamId:i.id,selectedView:a,newTeam:!0,currency:r,...n?{onBillingCompleteRedirectInfo:n}:{}}))}).catch(()=>{l()})});function U(e){let t=(0,s.wA)(),a=(0,O.TA)(),l=(0,s.d4)(R.P),n=(0,s.d4)(e=>e.roles.byTeamId),[i,c]=r.useState(!1),[d,_]=r.useState(!1),[p,g]=r.useState(""),E=(0,f.LN)(),h=(0,x.I7)("starter_team_loophole_experiment_m0"),v=(0,x.I7)("starter_team_loophole_experiment_m1"),y=()=>{t(u.Ce())},S=(0,N.s)(()=>{c(!0),p?t(V({teamName:p,selectedView:e.selectedView,currency:E,onSuccess:y,onError:()=>{c(!1),_(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(c(!1),_(!0))});return a&&!(0,D.e5)({userId:a,teams:Object.values(l),rolesByTeamId:n,getM0Config:h.getConfig,getM1Config:v.getConfig})?r.createElement("div",{"data-testid":"createTeamToUpgradeView"},r.createElement("p",{className:B.KV},(0,m.tx)("universal_upgrade_sequence.subtitle")),d&&r.createElement(r.Fragment,null,r.createElement(w.I,{message:(0,m.t)("universal_upgrade_sequence.error"),marginTop:16}),r.createElement(o.Kz,{multiple:1})),r.createElement(o.Kz,{multiple:2}),r.createElement("div",{className:B.$g},r.createElement("div",{className:B.Eh},r.createElement(C.L,{dataTestId:"createTeamInput",placeholder:(0,m.t)("universal_upgrade_sequence.team_name.placeholder"),value:p||"",onChange:e=>{g(e.target.value)},required:!0,maxLength:255})),r.createElement(o.vd,{dataTestId:"nextButton",className:B.DI,disabled:!p||i,onClick:S},i?r.createElement(A.kt,{className:B.u1}):(0,m.tx)("universal_upgrade_sequence.next")))):null}var $=a(67438),F=a(651631);function j(e){let[t,a]=r.useState("selectTeam"),N=(0,s.wA)(),x=(0,h._6)(),b=(0,E.FC)(),w=(0,s.d4)(e=>e.payment.promo),C=(0,s.d4)(e=>e.payment.billingPeriod),A=()=>{N(u.Lo())},I=()=>{N(u.Ce()),e.onDone?.()},P=t=>{"teamUpgrade"===x.view?N(d.$T({...x,teamFlowType:S.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,c.kR)(x.paymentStep,S.SC.UPGRADE_EXISTING_TEAM,x.billingPeriod||null,w,x.planType||S.Sc.UNDETERMINED,w?y.tn.CONFIRM_PAY:y.tn.CHOOSE_PLAN),billingPeriod:e.billingPeriod||C,entryPoint:e.entryPoint})):N(p.WX({teamId:t.id,selectedView:x,newTeam:!1,currency:(0,f.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:e.entryPoint,openInNewTab:e.openInNewTab})),I()},k=()=>{0===(0,v.PS)(b).length?(N(_.Dw({openInNewTab:!l.eD})),a("createTeam")):a("selectTeam")};return((0,n.h)(()=>{e.plan===$.I.PRO&&k()}),"selectTeam"===t)?(()=>{let t=(0,v.PS)(b);return r.createElement(g.fu,{name:"Upgrade Select Team Modal"},r.createElement(T.Nb,{hide:A,size:436},r.createElement("h1",{"data-testid":"modalTitle",className:B.GK},(0,m.tx)("universal_upgrade_sequence.title")),r.createElement(i.Jn,{dataTestId:"closeButton",className:B.b,onClick:A,innerText:(0,m.t)("universal_upgrade_sequence.close_modal")}),r.createElement(o.Kz,{multiple:2}),r.createElement(F.I,{eligibleTeams:t,selectTeam:P}),r.createElement(o.Kz,{multiple:2}),r.createElement(U,{selectedView:x,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})))})():r.createElement(r.Fragment,null)}},651631:(e,t,a)=>{a.d(t,{I:()=>_});var r=a(848318),s=a(145015),l=a(575492),n=a(442313),i=a(180423),o=a(155651),m=a(710665),c=a(832876),d=a(62130);function _({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:_,showEditorCount:u=!0}){let[p,g]=(0,r.useState)(!1),[E,h]=(0,r.useState)(!1);r.useEffect(()=>{g(t.length>=5)},[t]);let f=`${d.jG}`;p&&(f+=` ${d.o8}`),E&&(f+=` ${d.kz}`);let v=t[t.length-1],y=_&&_.length===t.length;return r.createElement(l.P,{onScroll:(e,a)=>{let r=t.length>=5,s=r&&0!==e,l=r&&e+a.trackHeight!==a.scrollHeight;l!==p&&g(l),s!==E&&h(s)},className:f,scrollingDisabled:!1},r.createElement("div",{className:d.nW},t.map((t,l)=>r.createElement(o.jm,{key:t.id,className:t===v?d.wv:d.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:i.c.UPGRADE},innerText:"Upgrade"},r.createElement("div",{className:"org_self_serve--teamInfo--tsf0R"},r.createElement(c.Ro,{className:"org_self_serve--teamIcon--qumUh",entity:t,size:40,shape:"SQUARE"}),r.createElement("div",{className:"org_self_serve--teamText--7uAPL"},r.createElement("p",{className:"org_self_serve--teamName--8Tpxm text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.name),r.createElement("p",{className:"org_self_serve--teamEditors--aUMr9 text--fontPos11--2LvXf text--_fontBase--QdLsd"},!y&&u&&(0,n.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),y&&_&&(0,n.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:_[l],numFreeFilesAllowed:m.WW})))),r.createElement(s.nR,{className:d.J1,dataTestId:"select_team.upgrade"},e??(0,n.tx)("universal_upgrade.select_team.upgrade"))))))}},748874:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>k});var r=a(848318),s=a(716544),l=a(551316),n=a(994811),i=a(757033),o=a(991371),m=a(608321),c=a(145015),d=a(166365),_=a(442313),u=a(449737),p=a(802780),g=a(155651),E=a(988540),h=a(464012),f=a(678290),v=a(117592),y=a(734904);let S="upgrade_contact_sales_modal--closeButton--715WY";var T=a(364616),N=a(933949);let x=()=>[{name:(0,_.t)("universal_upgrade.1_10"),value:"1-10"},{name:(0,_.t)("universal_upgrade.11_50"),value:"11-50"},{name:(0,_.t)("universal_upgrade.51_250"),value:"51-250"},{name:(0,_.t)("universal_upgrade.251_1_k"),value:"251-1K"},{name:(0,_.t)("universal_upgrade.1_k_5_k"),value:"1K-5K"},{name:(0,_.t)("universal_upgrade.5_k_10_k"),value:"5K-10K"},{name:(0,_.t)("universal_upgrade.10_k_50_k"),value:"10K-50K"},{name:(0,_.t)("universal_upgrade.50_k_100_k"),value:"50K-100K"},{name:(0,_.t)("universal_upgrade.100_k"),value:"100K+"}],b=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("universal_upgrade.company_size")),x().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),w=()=>[{name:(0,_.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,_.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,_.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,_.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],C=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("contact_sales.which_topic_best_fits_your_needs")),w().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),A=()=>[{name:(0,_.t)("contact_sales.product.design"),value:"design"},{name:(0,_.t)("contact_sales.product.figjam"),value:"figjam"},{name:(0,_.t)("contact_sales.product.dev_mode"),value:"dev_mode"},{name:(0,_.t)("contact_sales.product.all_products"),value:"all_products"}],I=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("contact_sales.which_product_are_you_most_interested_in")),A().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),P=(0,h.Ju)(function({hideModal:e}){return r.createElement(g.fu,{name:"Upgrade Contact Sales Success Modal"},r.createElement(v.Nb,{hide:e,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalWrapper--xA5Mp"},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalTitle--Xgt1f upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement(d.B,{className:"upgrade_contact_sales_modal--successIcon---zT4I",svg:N.A}),(0,_.tx)("universal_upgrade.contact_sales.thank_you")),r.createElement(o.Jn,{className:S,onClick:e,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--successModalText--f1aRe text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("universal_upgrade.contact_sales.sales_will_reach_out"))))},"ContactSalesSuccessModal");function k(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),[h,N]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",product:"",phone:"",formErrors:{}}),x=(0,p.Mx)(),w=()=>{t(u.Lo())},A=()=>{t((0,u.to)({type:P,data:{hideModal:()=>t(u.Ce())}}))},k=()=>({email:h.email,name:h.name,company_name:h.companyName,topic:h.topic,product:h.product,phone:h.phone,message:h.freeText,source:e.source,form_name:"topic_v1"}),D=()=>({email:h.email,name:h.name,company_name:h.companyName,company_size:h.companySize,job_title:h.jobTitle,message:h.freeText,source:e.source,form_name:"topic_control"}),M=(0,l.s)(()=>{let t={},a=(0,_.t)("universal_upgrade.this_field_is_required");if(h.email?(0,n.xf)(h.email)||(t.email=(0,_.t)("universal_upgrade.please_provide_a_valid_email_address")):t.email=a,h.name||(t.name=a),h.companyName||(t.companyName=a),x?(h.topic||(t.topic=a),h.product||(t.product=a)):e.source===E.Bi.VARIABLES_MODES?h.jobTitle||(t.jobTitle=a):h.companySize||(t.companySize=a),N(e=>({...e,formErrors:t,result:void 0})),0===Object.keys(t).length){let e=x?k():D();i.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{N(e=>({...e,result:"success"})),A()}).catch(()=>N(e=>({...e,result:"error"})))}}),O=e=>h.formErrors[e]?"upgrade_contact_sales_modal--error--8vAcf basic_form--labeledInputGroup--aeD6L":void 0,R=e=>{let t=h.formErrors[e];return t?r.createElement("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--FfxPx text--fontPos11--2LvXf text--_fontBase--QdLsd"},t):null},L=(e,t,a=!1)=>r.createElement(r.Fragment,null,r.createElement(c.Lf,{htmlName:t,label:e,value:h[t]||"",onChange:e=>{let a={[t]:e.target.value};N(e=>({...e,...a}))},disabled:a,className:O(t)}),R(t)),B=(e,t,a)=>{let s=O(t)||y.Os;return r.createElement(r.Fragment,null,r.createElement("div",{className:s},r.createElement("div",{className:"upgrade_contact_sales_modal--select--sFfZ- address_form--selectRowFull--8DtEB"},r.createElement(c.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};N(e=>({...e,...a}))},required:!0},a),r.createElement(d.B,{className:y.nO,svg:T.A}))),R(t))};return r.createElement(g.fu,{name:"Upgrade Contact Sales Modal"},r.createElement(v.Nb,{className:"upgrade_contact_sales_modal--contactSalesModal--ExFaV",hide:w,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--titleWrapper--mKMG2"},r.createElement("h1",{className:"upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("universal_upgrade.contact_sales_title")),r.createElement(o.Jn,{className:S,onClick:w,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalBody--FTi91"},"error"===h.result&&r.createElement(r.Fragment,null,r.createElement(m.I,{message:(0,_.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),r.createElement(c.Kz,{multiple:.5})),x?r.createElement("fieldset",null,L((0,_.t)("universal_upgrade.email_address"),"email"),L((0,_.t)("universal_upgrade.full_name"),"name"),L((0,_.t)("universal_upgrade.company_name"),"companyName"),B((0,_.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",C()),B((0,_.t)("contact_sales.which_product_are_you_most_interested_in"),"product",I()),L((0,_.t)("contact_sales.phone_number_optional"),"phone")):r.createElement("fieldset",null,L((0,_.t)("universal_upgrade.email_address"),"email"),L((0,_.t)("universal_upgrade.full_name"),"name"),L((0,_.t)("universal_upgrade.company_name"),"companyName"),e.source===E.Bi.VARIABLES_MODES?L((0,_.t)("universal_upgrade.job_title"),"jobTitle"):B((0,_.t)("universal_upgrade.company_size"),"companySize",b())),r.createElement(c.Kz,{multiple:1}),r.createElement("p",null,(0,_.tx)("universal_upgrade.how_can_we_help_optional")),r.createElement(c.Kz,{multiple:1}),r.createElement(f.v,{className:"upgrade_contact_sales_modal--freeTextInput--fE033 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:h.freeText,onChange:e=>N(t=>({...t,freeText:e.target.value})),placeholder:h.overridePlaceholderText??(0,_.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalFooter--WNk7P"},r.createElement(c.tM,{onClick:w},(0,_.tx)("general.cancel")),r.createElement(c.vd,{onClick:M},(0,_.tx)("universal_upgrade.submit")))))}},451626:(e,t,a)=>{a.r(t),a.d(t,{OrgSelfServeFigJamPage:()=>ek,OrgSelfServeFigJamPageInner:()=>eP});var r=a(848318),s=a(716544),l=a(445777),n=a(992277),i=a(157907),o=a(536384),m=a.n(o),c=a(224223),d=a(994811),_=a(44509),u=a(653959),p=a(502255),g=a(757033),E=a(470403),h=a(145015),f=a(482675),v=a(473889),y=a(575492),S=a(166365),T=a(280198),N=a(442313),x=a(719398),b=a(478550),w=a(390429),C=a(66557),A=a(450665),I=a(790355),P=a(449737),k=a(194546),D=a(405866),M=a(802780),O=a(155651),R=a(95646),L=a(481540),B=a(171063),V=a(595919),U=a(890477),$=a(52771),F=a(996511),j=a(407880),G=a(871117),z=a(695453),H=a(208649),W=a(376780),Y=a(511231),K=a(546246),X=a(620760),J=a(412429),Z=a(578427),q=a(832367),Q=a(993421),ee=a(263144),et=a(515673),ea=a(995946),er=a(217084),es=a(229424),el=a(43482),en=a(280743),ei=a(522296);function eo(e,t){let a={};for(let r of e.filter(e=>t.has(e.team.id))){let e=[{users:r.designEditors,propKey:"designEditor"},{users:r.figjamEditors,propKey:"figjamEditor"},{users:[],propKey:"devMode"}],t={};e.forEach(({users:e,propKey:s})=>{for(let l of e){if((0,d.nD)(l.email))return;a[l.id]||(a[l.id]={user:l,teamIds:[],designEditor:!1,figjamEditor:!1,devMode:!1,teams:[]}),l.id in t||(t[l.id]=new Set),a[l.id][s]=!0,t[l.id].has(r.team.id)||(a[l.id].teamIds.push(r.team.id),a[l.id].teams.push(r.team),t[l.id].add(r.team.id))}})}return a}function em(e,t){let a=j.H5.dict(a=>(t[a]??0)+(e[a]??0)),r=Object.values(a).reduce((e,t)=>e+t,0);return a[G.vu]+=Math.max(K.OT-r,0),a}var ec=a(842714),ed=a(912256),e_=a(26039),eu=a(17755),ep=a(895104),eg=a(775038),eE=a(576220),eh=a(832876),ef=a(41163);function ev({users:e,size:t=eE.Pf.MEDIUM,maxShow:a=2}){let s=e.slice(0,a),l=Math.max(e.length-a,0);return r.createElement(ep.Y,{verticalAlignItems:"center",spacing:"-8px",horizontalAlignItems:"start",width:"hug-contents"},s.map((e,a)=>r.createElement(eh.Ro,{className:eu.s.borderBox.relative.b1.colorBorderBg.$,key:`${e.id}${a}`,entity:e,size:t})),l>0&&r.createElement(ef.f,{className:eu.s.fontSemiBold.colorText.borderBox.relative.b1.colorBorderBg.$,text:`+${l}`,size:t}))}var ey=a(683148),eS=a(570706),eT=a(954184);let eN={[G.G_.DESIGN]:r.createElement(eg.E,{fontSize:13},(0,N.tx)("checkout.design_with_dev_mode_included")),[G.G_.DEV_MODE]:r.createElement(eg.E,{fontSize:13},(0,N.tx)("general.dev_mode")),[G.G_.FIGJAM]:r.createElement(eg.E,{fontSize:13},(0,N.tx)("general.figjam"))},ex={[G.G_.DESIGN]:e_.y1.DESIGN_AND_DEV_MODE,[G.G_.DEV_MODE]:e_.y1.DEV_MODE,[G.G_.FIGJAM]:e_.y1.WHITEBOARD};function eb({type:e,users:t,additionalSeats:a,onClick:s}){let[l,n]=(0,r.useState)(!1);return r.createElement("div",{className:`${eu.s.b1.colorBorder.bRadius6.wFull.borderBox.$} ${l?eu.s.colorBgHover.$:""}`,role:"button",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:s,tabIndex:0,"data-testid":`seat-summary-card-${e}`},r.createElement(ep.Y,{padding:{top:10,right:16,bottom:10,left:16},direction:"horizontal",verticalAlignItems:"center",horizontalAlignItems:"space-between"},r.createElement(ep.Y,{horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(e_.MW,{type:ex[e],size:e_.LE.LARGE}),r.createElement(ep.Y,{direction:"vertical",horizontalAlignItems:"start",padding:{left:4},spacing:0},eN[e],r.createElement("div",null,r.createElement(eg.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,N.tx)("checkout.seats",{numOfSeats:t.length+a})),a>0&&r.createElement("span",null,"\xa0",r.createElement(eg.E,null,(0,N.tx)("checkout.paranthesis",{content:r.createElement(eg.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,N.tx)("checkout.empty_seats",{numOfEmptySeats:a}))}))),l&&r.createElement("span",null,r.createElement(eg.E,{color:"secondary"},"\xa0\u2022\xa0"),r.createElement(eg.E,{fontSize:11,color:"brand",fontWeight:"medium"},(0,N.tx)("general.edit")))))),r.createElement(ev,{users:t}),a>0&&0===t.length&&r.createElement(S.B,{svg:eS.A,useOriginalSrcFills_DEPRECATED:!0})))}function ew({additionalDesignSeats:e,additionalDevModeSeats:t,additionalWhiteboardSeats:a,selectedEditors:s,onClick:l}){let n={[G.G_.DESIGN]:{users:[],additionalSeats:e},[G.G_.DEV_MODE]:{users:[],additionalSeats:t},[G.G_.FIGJAM]:{users:[],additionalSeats:a}};for(let e of Object.values(s))e.designEditor?n[G.G_.DESIGN].users.push(e.user):e.devMode&&n[G.G_.DEV_MODE].users.push(e.user),e.figjamEditor&&n[G.G_.FIGJAM].users.push(e.user);return r.createElement(r.Fragment,null,r.createElement(ep.Y,{direction:"vertical",spacing:"12px",height:"hug-contents"},Object.entries(n).map(([e,{users:t,additionalSeats:a}])=>r.createElement(eb,{key:e,type:e,users:t,additionalSeats:a,onClick:()=>{l(),(0,L.Cu)({name:"org_checkout_seat_summary_card"})}}))),r.createElement("div",{className:eu.s.mt24.$},r.createElement("button",{"data-testid":"seat-summary-add-seats-cta",className:`${ey.uD} ${ey.i9}`,onClick:()=>{l(),(0,L.Cu)({name:"org_checkout_add_more_seats"})}},r.createElement(S.B,{className:ey.Hl,svg:eT.A}),r.createElement(eg.E,null,(0,N.tx)("checkout.add_additional_seats")))))}var eC=a(598327),eA=a(388041),eI=a(600086);class eP extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>this.state.eligibleUpgrades.length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===ee.X1.Initial||this.props.step===ee.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===er.SC.CREATE_AND_UPGRADE?ee.X1.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?ee.X1.TeamSelect:ee.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(I.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case ee.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(ee.X1.TeamSelect);break;case ee.X1.AddCollaborators:this.setStep(ee.X1.Details);break;case ee.X1.PseudoCreateTeam:this.setStep(ee.X1.TeamSelect);break;case ee.X1.TeamSelect:this.setStep(ee.X1.Details);break;case ee.X1.Details:this.setStep(ee.X1.Payment);break;case ee.X1.Payment:this.onSubmitPaymentAndAddress();break;case ee.X1.Review:this.onSubmitPurchaseOrder();break;case ee.X1.SeatSelect:case ee.X1.Confirmation:break;default:(0,l.xb)(e)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=em(e,this.state.emptySeatsByLicenseType);return{numEditors:e[G.vu],numFigJamEditors:e[G.tL],numDisplayedTeams:this.state.eligibleUpgrades.length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[G.G_.DESIGN],totalFigJamSeats:t[G.G_.FIGJAM],totalDevModeSeats:t[G.G_.DEV_MODE],proposedSubtotal:j.H5.reduce((e,a)=>e+=(t[a]??0)*(12*this.props.prices[(0,U.Zx)(a)].amount),0)/100,domain:(0,d.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case ee.X1.CreateTeam:case ee.X1.PseudoCreateTeam:e=(0,N.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case ee.X1.AddCollaborators:e=(0,N.t)("org_self_serve.create_team_step.next_select_team");return;case ee.X1.TeamSelect:e=(0,N.t)("org_self_serve.details_step.next_organization_details");break;case ee.X1.Details:e=(0,N.t)("org_self_serve.payment_step.next_payment");let s=this.state.orgDetails.legalOrgName?.length,n=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!s||s<1:t||!s||!n||s<1||n<1;break;case ee.X1.Payment:t=t||this.state.apiPending,e=(0,N.t)("org_self_serve.review_step.next_review");break;case ee.X1.Review:case ee.X1.Confirmation:case ee.X1.SeatSelect:return null;default:(0,l.xb)(a)}return r.createElement("div",{className:ey.rh},r.createElement(h.vd,{className:ey.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:eo(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:eo(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,P.to)({type:b.lk,data:{source:b.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,z.Al)(this.props.user.id),_.Ay.redirect("/files/recent")},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:j.H5.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=this.getUpgradesByLicenseType(),t=em(e,this.state.emptySeatsByLicenseType);this.props.dispatch((0,P.to)({type:ed.Bx,data:{seatDataByLicenseType:{[G.vu]:{minSeats:Math.max(e[G.vu],K.Hh),currentSeats:t[G.vu],seatUnitCostInCents:this.props.prices[B.ud.DESIGN].amount},[G.tL]:{minSeats:e[G.tL],currentSeats:t[G.tL],seatUnitCostInCents:this.props.prices[B.ud.FIGJAM].amount},[G.PE]:{minSeats:e[G.PE]??0,currentSeats:t[G.PE]??0,seatUnitCostInCents:this.props.prices[B.ud.DEV_MODE].amount}},minTotalSeats:K.OT,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:j.H5.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};this.props.dispatch((0,P.to)({type:ed.ml,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:K.OT,seatInfo:{design:{minCount:K.Hh,additionalSeatCount:this.state.emptySeatsByLicenseType[G.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[G.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[G.PE]??0}},monthlyPriceByProduct:V.Oq.dict(e=>this.props.prices[e].amount)}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new Y.vr(this.state.currency),t=em(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a={[G.vu]:{totalSeats:t[G.vu],price:this.props.prices[B.ud.DESIGN].amount,headerString:(0,N.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:t[G.vu]})},[G.tL]:{totalSeats:t[G.tL],price:this.props.prices[B.ud.FIGJAM].amount,headerString:(0,N.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:t[G.tL]})},[G.PE]:{totalSeats:t[G.PE]??0,price:this.props.prices[B.ud.DEV_MODE].amount,headerString:(0,N.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:t[G.PE]??0})}};return r.createElement("div",null,j.H5.sort(j.AG).map(t=>{let s=a[t];return null==s?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement("div",{className:ey.Yn},r.createElement("div",{className:ey.TK},s.headerString),r.createElement("div",{className:ey.TK},e.formatMoney(s.price*s.totalSeats*12,{showCents:!1}))),r.createElement("div",{className:ey.Sv},(0,N.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(s.price,{showCents:!1}),seatCount:s.totalSeats})),r.createElement(h.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[G.vu],a=e[G.tL],s=e[G.PE]??0,l=(0,Y._Z)(),n=t+a+s,o=n<K.OT,m=!o&&t<K.Hh&&(0,i.k)().org_checkout_min_seat_info_copy,c=this.getSubtotal(),_=(0,X.Hw)(this.props.user)?(0,i.k)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,N.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:K.OT}),"\xa0",(0,N.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:n,numOfEmptySeats:K.OT-n,seatsText:(0,N.tx)("checkout.seats_text",{numOfSeats:n})})):(0,N.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:K.OT}):(0,N.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:K.OT}),u=r.createElement(r.Fragment,null,(0,N.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:K.Hh}),"\xa0",(0,N.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:K.Hh-t})),p=new Y.vr(this.state.currency);return r.createElement("div",{className:ey.er},r.createElement("div",null,o&&r.createElement("div",{className:`${ey.uC} ${ey.i9}`},r.createElement(S.B,{className:ey.$y,svg:eI.A}),_),m&&r.createElement("div",{className:`${ey.uC} ${ey.i9}`},r.createElement(S.B,{className:ey.$y,svg:eI.A}),u),r.createElement(y.P,{className:ey.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:ey.Ov},(0,N.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:ey.Sv},(0,N.tx)("org_self_serve.purchase_summary.domain",{domain:(0,d.zN)(this.props.user.email)})),r.createElement(h.Kz,{direction:"y",value:16})),r.createElement(h.Kz,{direction:"y",value:8}),r.createElement(ew,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[G.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[G.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[G.PE]??0,onClick:this.selectEditors}),r.createElement(h.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:ey.aK}),l&&r.createElement(r.Fragment,null,r.createElement(h.Kz,{direction:"y",value:16}),r.createElement("div",{className:ey.Yn},r.createElement("div",{className:ey.V},(0,N.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(A.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,Y.B9)(),changeCurrency:e=>{this.props.dispatch(k.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(h.Kz,{direction:"y",value:20}),r.createElement("div",{className:ey.aK})),this.state.paymentError&&this.effectiveStep()===ee.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(f._,{color:f.S.INFORMATION,text:this.state.paymentError})),r.createElement(h.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:ey.aK}),r.createElement(h.Kz,{direction:"y",value:24}),r.createElement($.m,{formattedSubtotal:p.formatMoney(c,{showCents:!1})}),r.createElement(h.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(h.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:ey.ZM}),r.createElement(h.Kz,{direction:"y",value:16}),r.createElement("div",{className:ey.i9},r.createElement(S.B,{svg:eA.A,className:ey.$y}),r.createElement("span",null,(0,N.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:ey.uD,onClick:this.contactSales},(0,N.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(h.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,et.EB)((0,Y.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:j.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,et.EB)((0,Y.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return el.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(I.$T({view:"recentsAndSharing"})),this.props.dispatch(T.s.error(t||(0,N.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=eo(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,d.zN)(e.user.email)!==(0,d.zN)(this.props.user.email)&&_.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:function(e,t,a){let r=em(e,t);return{...t,[G.vu]:Math.max(t[G.vu],K.Hh-e[G.vu],K.OT-a-e[G.vu]-r[G.tL]-(r[G.PE]??0))}}(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(){let e=em(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),t=j.H5.dict(t=>(e[t]??0)*this.props.prices[(0,U.Zx)(t)].amount*12),a=0;return j.H5.forEach(e=>{a+=t[e]??0}),a}getTaxTotal(e){return e*this.state.taxRate/100}getTotal(e){return e+this.getTaxTotal(e)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(e),a=this.getTotal(e);return{subtotal:e,tax_total:t,total:a}}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,N.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,en.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,N.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,en.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let s=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,q.Ey)(t,s).then(t=>{if(!t.error&&t.token)return(0,q.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?g.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,et.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):g.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(ee.X1.Review))});{let e=t.error?.message||(0,N.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[W.G_.DESIGN]:[],[W.G_.WHITEBOARD]:[],[W.G_.DEV_MODE]:[]},downgrade:{[W.G_.DESIGN]:[],[W.G_.WHITEBOARD]:[],[W.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let s=t[r];if(r in a){let t=a[r];s.designEditor?t.designEditor||e.upgrade[W.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[W.G_.DESIGN].push(r),s.devMode&&e.upgrade[W.G_.DEV_MODE].push(r)),s.figjamEditor!==t.figjamEditor&&(s.figjamEditor?e.upgrade[W.G_.WHITEBOARD].push(r):e.downgrade[W.G_.WHITEBOARD].push(r))}else s.designEditor?e.upgrade[W.G_.DESIGN].push(r):s.devMode&&e.upgrade[W.G_.DEV_MODE].push(r),s.figjamEditor&&e.upgrade[W.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[W.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[W.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(D.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=em(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=j.H5.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:this.getDisplayedCostBreakdown()};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[G.vu],r.whiteboard_editors=t[G.tL],this.setState({apiPending:!0}),g.Ay.post("/api/orgs",r).catch(e=>(this.props.dispatch(T.s.error((0,x.J)(e,e.data?.message||(0,N.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,p.$D)(n.e.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{numDesignEditors:t[G.vu],numWhiteboardEditors:t[G.tL],numDevModeSeats:t[G.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(ee.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,Z.rq)({emails:this.state.inviteEmails,resourceType:W.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:ea.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,z.Al)(this.props.user.id),(0,c.sx)("Self Serve Org Purchased (GTM)"),(0,L.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},s={},l={};for(let[e,n]of Object.entries(a)){if(!n.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}n.designEditor&&(r[e]=n),n.figjamEditor&&(s[e]=n),n.devMode&&(l[e]=n)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.designEditor&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.figjamEditor&&(s[t.id]||(s[t.id]={user:t,teamIds:[]}),s[t.id].teamIds.includes(e.team.id)||s[t.id].teamIds.push(e.team.id))})}),{[G.vu]:Object.keys(r).length,[G.tL]:Object.keys(s).length,[G.PE]:Object.keys(l).length}}render(){let e;let t=this.effectiveStep(),a=em(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),s=new Date().getMonth(),l=new Date().setMonth(s+3),n=new Date().setMonth(s+12),i=this.getSubtotal(),o=this.getTaxTotal(i),c=this.getTotal(i),_=new Map;this.state.eligibleUpgrades.forEach(e=>_.set(e.team,e.designEditors.length+e.figjamEditors.length));let u=e=>{this.props.dispatch(I.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||er.SC.CREATE_AND_UPGRADE}))};return e=t===ee.X1.Review?r.createElement(r.Fragment,null,r.createElement(eC.d,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:u}),r.createElement(w.W,{isReviewPage:!0}),r.createElement(ec.Vw,{billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,ctaProperties:this.ctaProperties(),currency:this.state.currency,legalOrgName:this.state.orgDetails.legalOrgName,loading:this.state.apiPending,navigateToEditOrganizationDetails:()=>this.setStep(ee.X1.Details),navigateToEditPaymentDetails:()=>this.setStep(ee.X1.Payment),onSubmit:this.onSubmit,orgName:this.state.orgDetails.orgName,orgPayment:this.state.payment,renderBillingItems:this.renderBillingItems,renewalDate:n,shippingAddress:this.state.shippingAddress,showAdditionalEditorsModal:this.addEditors,subTotalCents:i,taxDueCents:o,taxRate:this.state.taxRate,totalCents:c,totalSeats:a,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),trueUpDate:l,user:this.props.user})):t===ee.X1.Confirmation?r.createElement(ec._u,{totalCents:c,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(ed.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,d.qe)(this.props.user.email)&&r.createElement(ed.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(eC.d,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:u}),r.createElement("div",{className:ey._h},t===ee.X1.CreateTeam&&r.createElement("div",{className:ey.Bb},r.createElement(C.y,{type:C.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===ee.X1.TeamSelect&&(this.state.loading?r.createElement(v.kt,null):r.createElement("div",null,r.createElement(w.W,null),r.createElement(ec.JG,{teamsToEditors:_,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName}))),t===ee.X1.Details&&(this.state.loading?r.createElement(v.kt,null):r.createElement("div",null,r.createElement(w.W,null),r.createElement(ec.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t===ee.X1.Payment&&r.createElement("div",null,r.createElement(w.W,null),r.createElement(y.P,{className:m()(ey.M7,ey.Et),hideScrollbar:!0},r.createElement("div",{className:ey.W},(0,N.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:ey.fI},r.createElement(ei.n,{billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})))),t!==ee.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(O.fu,{name:es.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:ey.F0},e))}}function ek(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),l=(0,s.d4)(e=>(0,J.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===W._D.ADMIN)),i=(0,M.Mh)(),o=(0,s.d4)(e=>e.payment).currency||(0,Y.LN)(),m=V.Oq.dict(e=>({currency:o,billableProductKey:e,tier:Q.Ju.ORG,renewalTerm:Q.IX.YEAR,unit:Q.IX.MONTH})),c=(0,R.SK)(m,R.Fq.ORG_CART),[d]=(0,u.mI)(c);return"loaded"!==d.status?r.createElement(F.K,null):r.createElement(E.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeFigJamPage",fallback:E.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:H.y4},r.createElement(eP,{...e,dispatch:t,user:a,isOrgAdmin:l,canSeeBillingAddressExp:i,prices:d.data,currency:o}))}eP.displayName="OrgSelfServePage"},842714:(e,t,a)=>{a.d(t,{JG:()=>b,Vw:()=>A,WA:()=>I,_u:()=>P,vj:()=>C});var r=a(848318);if(443==a.j)var s=a(445777);var l=a(157907),n=a(536384),i=a.n(n),o=a(994811);if(443==a.j)var m=a(303035);var c=a(145015),d=a(473889),_=a(575492),u=a(166365),p=a(442313),g=a(576220),E=a(997364),h=a(482606),f=a(511231),v=a(832876),y=a(912256),S=a(683148);if(443==a.j)var T=a(933949);if(443==a.j)var N=a(954184);function x(e){return r.createElement("div",{style:{height:e.height||12}})}function b(e){let[t,a]=(0,r.useState)(!1),s=r.createRef(),l=()=>{s?.current&&a(s.current.getBoundingClientRect().bottom>window.innerHeight+25)};r.useEffect(()=>(l(),window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}));let n=[...e.teamsToEditors.keys()],o=!!e.newTeamName,m=o?n.length+1:n.length,c=n[n.length-1]?.id,d=m<=5?S.tZ:S.xr,_=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_header"):(0,p.tx)("org_self_serve.team_step.header"),u=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_teams_shown_description"):(0,p.tx)("org_self_serve.team_step.teams_shown_description");return r.createElement("div",{className:i()(S.M7,S.Et)},r.createElement("div",{className:S.W},_),r.createElement(x,{height:4}),r.createElement("div",{className:S.OL},u),t&&r.createElement("div",{className:S.cH},r.createElement("div",{className:S.aQ},(0,p.tx)("org_self_serve.team_step.more_teams")," \u2193")),r.createElement("div",{className:m<=5?S.LQ:S.KZ},o&&r.createElement(w,{name:e.newTeamName||"",editors:0,team:null,checked:null!=e.newTeamName,tileClassName:d,tabIndex:0,disabled:!0}),n.map((t,a)=>r.createElement(w,{name:t.name,key:t.id,editors:e.teamsToEditors.get(t)||0,team:t,checked:e.selectedTeamIds.has(t.id),onClick:()=>e.onToggle(t.id),tileClassName:d,tabIndex:o?a+1:a,lastTeamRef:t.id===c?s:null}))))}function w(e){return null===e.team&&(0,s.vA)(0===e.editors),r.createElement("div",{onClick:e.onClick,key:e.team?.id||e.name,className:e.tileClassName,role:"checkbox","aria-checked":e.checked,tabIndex:e.tabIndex,"aria-disabled":e.disabled},r.createElement("div",{className:S.i9,ref:e.lastTeamRef},r.createElement(v.CH,{entity:e.team||{name:e.name},size:g.Pf.LARGE}),r.createElement("div",{className:S.BP},r.createElement("div",{className:S.Ps},e.name),r.createElement("div",{className:S.S$},(0,p.tx)("org_self_serve.team_step.editor.seat_rename",{editorCount:e.editors})))),r.createElement("label",null,r.createElement(E.S,{checked:e.checked,disabled:e.disabled})))}function C(e){return r.createElement("div",{className:i()(S.M7,S.Et)},r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.details_step.tell_us_about_your_organization")),r.createElement("div",{className:S.Nv},!e.canSeeBillingAddressExp&&r.createElement(c.Lf,{htmlName:"actor_name",label:(0,p.t)("org_self_serve.details_step.your_full_name"),value:e.orgDetails.actorName,onChange:e.onChangeFormInput}),!e.canSeeBillingAddressExp&&r.createElement(c.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:m.lQ}),r.createElement(c.Lf,{htmlName:"legal_org_name",label:(0,p.t)("org_self_serve.details_step.legal_company_name"),value:e.orgDetails.legalOrgName,onChange:e.onChangeFormInput}),r.createElement(c.Lf,{htmlName:"org_name",label:(0,p.t)("org_self_serve.details_step.company_display_name"),placeholder:e.canSeeBillingAddressExp?(0,p.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"):(0,p.t)("org_self_serve.details_step.company_display_name_sub_text"),value:e.orgDetails.orgName,onChange:e.onChangeFormInput}),e.canSeeBillingAddressExp&&r.createElement(c.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:m.lQ})))}function A(e){let[t,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),m=new f.vr(e.currency);return r.createElement(_.P,{className:i()(S.M7,S.Et),hideScrollbar:!0},r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.review_step.lets_make_sure_everythings_right")),r.createElement("div",{className:S.nz},r.createElement("div",{className:S.ll,"data-testid":"reviewSummary"},(()=>{let t=(0,o.zN)(e.user.email);return(0,l.k)().pro_team_business_names?(0,h.x)({displayName:e.orgName||e.legalOrgName,legalName:e.legalOrgName,variant:"org",domain:t,totalTeams:e.totalTeams,canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,userEmail:e.user.email,navigateToEditPaymentDetails:e.navigateToEditPaymentDetails,navigateToEditOrganizationDetails:e.navigateToEditOrganizationDetails}):r.createElement(r.Fragment,null,r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.organization_details")),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_name")),r.createElement("div",null,e.legalOrgName)),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_display_name")),r.createElement("div",null,e.orgName||e.legalOrgName)),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.domain")),r.createElement("div",null,t)),e.totalTeams>0&&r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.teams")),r.createElement("div",null,e.totalTeams)))})()),r.createElement("div",{className:S.SU}),r.createElement("div",null,s&&r.createElement(y.LJ,{onClose:()=>n(!1)}),r.createElement("div",{className:S.Or},r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(e.trueUpDate)})),r.createElement(x,{height:16}),r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.what_is_a_true_up")),r.createElement("ul",null,r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_2.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_3.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_4.seat_rename"))),r.createElement(c.Ph,{onClick:()=>n(!0),className:S.uD,trusted:!0},(0,p.tx)("org_self_serve.review_step.learn_more_about_true_ups")),r.createElement(x,{height:20}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:24}),r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.annual_renewal_on_date",{renewalDate:new Date(e.renewalDate)})),r.createElement(x,{height:16}),r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.annual_renewal_description.seat_rename")),r.createElement(x,{height:20}),e.renderBillingItems(),r.createElement("button",{className:`${S.uD} ${S.i9}`,onClick:e.showAdditionalEditorsModal},r.createElement(u.B,{className:S.Hl,svg:N.A}),(0,p.tx)("org_self_serve.review_step.add_additional_editors.seat_rename")),r.createElement(x,{height:20}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:16}),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.subtotal"))),r.createElement("div",{className:S.TK},r.createElement("div",{className:S.TK,"data-testid":"subtotal-summary-price-section"},m.formatMoney(e.subTotalCents,{showCents:!1})))),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.tax")),r.createElement("div",{className:S.ZE},(0,p.tx)("org_self_serve.review_step.tax_rate",{taxRate:e.taxRate}))),r.createElement("div",{className:S.TK,"data-testid":"tax-summary-price-text"},m.formatMoney(e.taxDueCents,{showCents:!1}))),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.bv},(0,p.tx)("org_self_serve.review_step.total_due_today")),e.orgPayment.last4&&r.createElement("div",{className:S.ZE},(0,p.tx)("org_self_serve.review_step.card_ending_in_last4",{last4:e.orgPayment.last4}))),r.createElement("div",{className:S.lQ,"data-testid":"confirm-total-summary-price-text"},m.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(x,{height:8}),r.createElement("div",{className:S.aK})),r.createElement(x,{height:24}),r.createElement("div",{className:S.gn},r.createElement("div",{className:S.O},r.createElement("input",{type:"checkbox",checked:t,className:S.o1,onChange:()=>{a(!t)},"data-testid":"msa-checkbox"}),r.createElement(I,null)),r.createElement(c.vd,{className:S.sk,onClick:e.onSubmit,disabled:!t||e.loading,trackingProperties:e.ctaProperties,dataTestId:"confirm-purchase-button"},(0,p.tx)("org_self_serve.review_step.complete_purchase"))))))}function I(){return r.createElement("span",null,(0,p.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:r.createElement(c.CY,{href:"/ssa",target:"_blank",trusted:!0},(0,p.tx)("org_self_serve.review_step.software_services_agreement")),renewalLink:r.createElement(c.CY,{href:(0,p.dS)("/renewal-and-cancellation"),target:"_blank",trusted:!0},(0,p.tx)("org_self_serve.review_step.renewal_and_cancellation_terms"))}))}function P(e){let t=new f.vr(e.currency);return r.createElement("div",{className:S.jg},r.createElement("div",{className:i()(S.M7,S.Et)},r.createElement("div",{className:S.cc},r.createElement(u.B,{svg:T.A,className:S.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.confirmation_step.you_re_all_set"))),r.createElement("div",{className:S.Jo},r.createElement("div",{className:S.Qv},(0,p.tx)("org_self_serve.confirmation_step.order_confirmation_message")),r.createElement(x,{height:24}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:24}),r.createElement("div",{className:S.N5},r.createElement("div",{className:S.I1},(0,p.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),r.createElement("span",{className:S.iv},t.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(x,{height:24}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:32}),r.createElement("div",{className:S.Ed},!e.orgMigrated&&r.createElement(r.Fragment,null,r.createElement(d.kt,null),r.createElement("div",{className:S.nm},(0,p.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),r.createElement(c.$$,{disabled:!e.orgMigrated,className:S.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,p.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}},912256:(e,t,a)=>{a.d(t,{Bx:()=>W,wW:()=>z,VE:()=>G,ml:()=>Q,LJ:()=>H});var r=a(848318),s=a(716544),l=a(157907),n=a(773969),i=a(723263),o=a(266163),m=a(991371),c=a(145015),d=a(575492),_=a(166365),u=a(17755),p=a(442313),g=a(500276),E=a(895104),h=a(997364),f=a(775038),v=a(232420),y=a(449737),S=a(557675),T=a(155651),N=a(481540),x=a(171063),b=a(890477),w=a(407880),C=a(871117),A=a(511231),I=a(503024),P=a(464012),k=a(832876),D=a(39766),M=a(314272),O=a(117592);let R=(0,a(778935).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return r.createElement("div",null,e.map((e,a)=>{let s=(0,D.$L)(e,D.us);return r.createElement("div",{key:e,className:"org_self_serve_modal_tooltip_content--tooltipRow--BtOPB"},r.createElement("div",{style:g.sx.add({backgroundColor:s,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),r.createElement("div",null,t[a]))}))},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),L="org_self_serve_modals--modalContainer--EN3KE",B="org_self_serve_modals--modalWrapperSmall--bgobm org_self_serve_modals--modalWrapper--j36I3",V="org_self_serve_modals--modalHeader--JTELh",U="org_self_serve_modals--modalText--Lyv3f";var $=a(433566),F=a(927263);function j(e){return r.createElement("div",{style:{height:e.height||12}})}function G(e){return r.createElement(M.XV,{containerClassName:L,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:B},r.createElement("div",{className:V},(0,p.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),r.createElement("div",{className:U},(0,p.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),r.createElement(j,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function z(e){return r.createElement(M.XV,{containerClassName:L,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:B},r.createElement("div",{className:V},(0,p.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),r.createElement("div",{className:U},(0,p.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:r.createElement("a",{onClick:e.onContactSales},(0,p.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),r.createElement(j,{height:4}),r.createElement(j,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}function H(e){return r.createElement(M.XV,{containerClassName:L,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580,dataTestId:"true-up-edu-modal"},r.createElement("div",{className:"org_self_serve_modals--modalWrapper--j36I3"},r.createElement(_.B,{className:"org_self_serve_modals--modalClose--atbAK",svg:F.A,onClick:e.onClose}),r.createElement("div",{className:V},(0,p.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")),r.createElement("div",{className:U},(0,p.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")),r.createElement(j,{height:8}),r.createElement("div",{className:"org_self_serve_modals--modalSubHeader--QSp0F"},(0,p.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")),r.createElement("div",{className:U},(0,p.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:r.createElement("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank"},(0,p.tx)("org_self_serve.modals.true_up_edu.see_full_details"))}))))}let W=(0,P.Ju)(function(e){let t=e.isProTeam?w.H5.exclude([C.PE]):w.H5,[a,s]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,m]=(0,r.useState)(null),c=e=>{let t=a[e];void 0!==t&&t<99&&s({...a,[e]:t+1})},d=t=>{let r=e.seatDataByLicenseType[t],l=a[t];null!=r&&null!=l&&l>r.minSeats&&s({...a,[t]:l-1})},u=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},g=new A.vr(e.currency),E=a[C.tL],h={[C.vu]:{headerString:(0,p.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[C.vu],shouldShowDevModeIncludedText:!0},[C.tL]:{headerString:(0,p.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:E,shouldShowDevModeIncludedText:!1},[C.PE]:{headerString:(0,p.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[C.PE]??0,shouldShowDevModeIncludedText:!1}};return r.createElement(M.Eo,{onSubmit:()=>{let r=!1;if(t.forEach(t=>{let s=a[t],l=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==s&&!1===r&&(s<l||s>99)&&(m(t),r=!0)}),r)return;let s=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&s<e.minTotalSeats?m("total"):(e.dispatch(y.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,p.t)("all_carts.save"),cancelText:(0,p.t)("all_carts.cancel"),title:(0,p.t)("all_carts.add_additional_editors.seat_rename")},r.createElement("div",{className:"org_self_serve_modals--bannerContainer--1He0h"},o&&r.createElement("div",{className:"org_self_serve_modals--errorBanner--hv5dB"},r.createElement(_.B,{className:"org_self_serve_modals--errorSvg--ZGK-X",svg:$.A}),r.createElement("div",{className:"org_self_serve_modals--errorBannerText--Gu6zy org_self_serve_modals--headerModalText--mHUA0"},o===C.vu&&(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[C.vu].minSeats}),o===C.tL&&(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[C.tL].minSeats}),o===C.PE&&(0,p.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[C.PE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,l.k)().org_checkout_min_seat_info_copy?(0,p.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[C.vu].minSeats,seatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[C.vu].minSeats})}):(0,p.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),t.sort(w.AG).map(t=>{let l=h[t],o=e.seatDataByLicenseType[t],m=a[t];return void 0===l||void 0===o||void 0===m?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement(j,{height:16}),r.createElement("div",{className:"org_self_serve_modals--headerModalBoldText--irlEy org_self_serve_modals--headerModalText--mHUA0"},l.headerString),l.shouldShowDevModeIncludedText&&r.createElement(r.Fragment,null,r.createElement(j,{height:4}),r.createElement(n.G,null)),r.createElement(j,{height:12}),r.createElement(i.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,b.Zx)(t),incrementSeats:()=>c(t),decrementSeats:()=>d(t),numSeats:m,minSeatsCount:o.minSeats,headerText:g.formatMoney(l.totalSeatCount*o.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,v.mx)(e.showAnnualPrice,l.totalSeatCount,!0,o.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>u(e,e=>{s({...a,[t]:e})})}))}),r.createElement(j,{height:18}),r.createElement("div",{className:"org_self_serve_modals--divider--DrrAf"}))},"AdditionalEditorsModal");var Y=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(Y||{});function K({userData:e,checkboxHandler:t}){let[a,l]=(0,r.useState)(0),n=(0,s.wA)(),i=({rect:e,designChecked:r,...s})=>{if(t(s),s.newVal&&a<3){l(e=>e+1);let t=r?(0,p.t)("checkout.switch_seat_from_design_to_devmode"):(0,p.t)("checkout.enabled_devmode");n(S.eB({target:{kind:I.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:I.Zj.RIGHT,hideAfterDelay:1e3}))}};return r.createElement(r.Fragment,null,e.map((a,s)=>r.createElement("div",{"data-testid":"user-data-row",key:a.user.id},r.createElement(X,{rowType:"data"},r.createElement(k.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),r.createElement(q,{userInfo:a}),r.createElement(h.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),r.createElement(c.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--2WcxT",onChange:e=>{i({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),r.createElement(c.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--nIYue",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),s!==e.length-1&&r.createElement(J,null))))}function X({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return r.createElement(E.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},t.map((e,t)=>r.createElement(E.Y,{key:t,width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function J(){return r.createElement("div",{className:u.s.wFull.colorBgTertiary.h1.$})}function Z({teamId:e}){return r.createElement("div",{className:u.s.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,D.$L)(e,D.us)}).$})}function q({userInfo:e}){return e.teams.length>1?r.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":I.Ib.SPECIAL,"data-tooltip":R,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},r.createElement(f.E,{color:"default"},(0,p.tx)("all_carts.editor_table.multiple_teams"))):r.createElement(E.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},r.createElement(Z,{teamId:e.teamIds[0]}),r.createElement("div",{className:u.s.noWrap.ellipsis.overflowHidden.$},r.createElement(f.E,{color:"default"},e.teams[0]?.name)))}let Q=(0,P.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:s,minTotalSeats:l,dispatch:n,seatInfo:_,monthlyPriceByProduct:u}){let[g,h]=(0,r.useState)(e),[v,S]=(0,r.useState)({design:_.design.additionalSeatCount,figjam:_.figjam.additionalSeatCount,dev_mode:_.dev_mode.additionalSeatCount}),b=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let r of Object.values(g))r.designEditor&&e++,r.devMode&&a++,r.figjamEditor&&t++;return(e+=v.design,a+=v.dev_mode,t+=v.figjam,l&&e+t+a<l)?3:e<_.design.minCount||e>99?1:t<_.figjam.minCount||t>99?2:0},[v,g,l,_]),w=e=>{v[e]>=99||S(t=>({...t,[e]:t[e]+1}))},I=e=>{v[e]<=0||S(t=>({...t,[e]:t[e]-1}))},P=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||S(e=>({...e,[t]:a}))},k=new A.vr(s),D=()=>{n(y.Ce())};return r.createElement(T.fu,{name:"Select Editors Modal"},r.createElement(O.Nb,{size:864,maxHeight:672,hide:()=>n(y.Ce()),className:"org_self_serve_modals--selectEditorsModal--N3-DJ"},r.createElement("div",{className:"org_self_serve_modals--selectEditorModalHeader--vV1gt org_self_serve_modals--headerModalText--mHUA0"},(0,p.tx)("checkout.add_or_remove_editors"),r.createElement(m.s_,{customStyle:{position:"initial"},dispatch:n,onClose:D})),r.createElement(J,null),r.createElement(X,{rowType:"header"},r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Name")),r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Teams")),r.createElement(E.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figma_design")),r.createElement("div",null,r.createElement(f.E,{color:"handoff",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),"\xa0",r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("checkout.dev_mode_included_text_formatted.included")))),r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figjam"))),r.createElement(J,null),r.createElement(d.P,{maxHeight:426},r.createElement(K,{userData:Object.values(g),checkboxHandler:({userId:e,type:t,newVal:a})=>{let r={...g[e],[t]:a};"devMode"===t&&a&&(r.designEditor=!1),"designEditor"===t&&a&&(r.devMode=!1),h(t=>({...t,[e]:r})),(0,N.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})),r.createElement(J,null),r.createElement(X,{rowType:"footer"},r.createElement(E.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(f.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.add_additional_editors.seat_rename")),r.createElement(f.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.add_additional_editors_description.seat_rename"))),r.createElement(i.s,{billableProductKey:x.ud.DESIGN,incrementSeats:()=>w(C.G_.DESIGN),decrementSeats:()=>I(C.G_.DESIGN),numSeats:v.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>P(e,C.G_.DESIGN)}),r.createElement(i.s,{billableProductKey:x.ud.DEV_MODE,incrementSeats:()=>w(C.G_.DEV_MODE),decrementSeats:()=>I(C.G_.DEV_MODE),numSeats:v.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>P(e,C.G_.DEV_MODE)}),r.createElement(i.s,{billableProductKey:x.ud.FIGJAM,incrementSeats:()=>w(C.G_.FIGJAM),decrementSeats:()=>I(C.G_.FIGJAM),numSeats:v.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>P(e,C.G_.FIGJAM)})),r.createElement("div",{className:"org_self_serve_modals--selectEditorModalActions--Za6y1 org_self_serve_modals--selectEditorModalFooter--OzGeH"},0!==b?(()=>{switch(b){case 0:default:return;case 1:return r.createElement(f.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:_.design.minCount}));case 2:return r.createElement(f.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:_.figjam.minCount}));case 3:return r.createElement(f.E,{color:"danger"},(0,p.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:l}))}})():r.createElement(f.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.new_total",{total:k.formatMoney(function(e,t,a){let r=t.design,s=t.figjam,l=t.dev_mode;for(let t in e)e[t].designEditor?r++:e[t].devMode&&l++,e[t].figjamEditor&&s++;return r*a[x.ud.DESIGN]*12+s*a[x.ud.FIGJAM]*12+l*a[x.ud.DEV_MODE]*12}(g,v,u),{showCents:!0})})),r.createElement("div",{className:"org_self_serve_modals--buttonGroup--7FsJK"},r.createElement(o.nR,{onClick:D},(0,p.t)("general.cancel")),r.createElement(c.$$,{onClick:()=>{0===b&&(a(v),t(g),n(y.Ce()))},disabled:0!==b},(0,p.t)("checkout.update_seats"))))))},"SelectEditorsModal")},598327:(e,t,a)=>{a.d(t,{d:()=>p});var r=a(848318),s=a(224223),l=a(20701),n=a(442313),i=a(155651),o=a(993421),m=a(263144),c=a(515673),d=a(217084),_=a(683148);let u=(0,i.tf)(function(e){return r.createElement("div",{className:_.Nd,onClick:e.onClick},(0,n.tx)("org_self_serve.headers.cancel"))});function p(e){if(e.currentStep===m.X1.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let r={step:m.X1.ChoosePlan,name:(0,n.t)("org_self_serve.headers.choose_plan")},s={step:m.X1.CreateTeam,name:(0,n.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case d.SC.CREATE:t.push({step:m.X1.PseudoCreateTeam,name:(0,n.t)("org_self_serve.headers.create_team")}),t.push({step:m.X1.AddCollaborators,name:(0,n.t)("org_self_serve.headers.add_team_members")}),t.push(r);break;case d.SC.CREATE_AND_UPGRADE:t.push(r),t.push(s),a=m.X1.CreateTeam;break;case d.SC.UPGRADE_EXISTING_TEAM:t.push(r)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:m.X1.TeamSelect,name:(0,n.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:m.X1.SeatSelect,name:(0,n.t)("checkout.choose_seats")}),a=a??m.X1.TeamSelect),e.isCampfireCart?a=a??m.X1.Payment:(t.push({step:m.X1.Details,name:(0,n.t)("org_self_serve.headers.organization_details")}),a=a??m.X1.Details),t.push({step:m.X1.Payment,name:(0,n.t)("org_self_serve.headers.payment")}),t.push({step:m.X1.Review,name:(0,n.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=m.X1.Initial;let i=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){i=a;break}return r.createElement("div",{className:_.li},r.createElement(u,{onClick:e.onFileBrowserClick}),r.createElement("div",{className:_.Uu,"data-testid":"stepBreadcrumbs"},t.map((t,a)=>r.createElement(l.On,{key:a+1,selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{s.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:o.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case m.X1.ChoosePlan:return c.tn.PLAN_COMPARISON;case m.X1.AddCollaborators:return c.tn.ADD_COLLABORATORS;case m.X1.PseudoCreateTeam:return c.tn.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<i,lightText:!0}))))}},428829:(e,t,a)=>{a.r(t),a.d(t,{OrgHeader:()=>ew,OrgSelfServeBillingRemodelPage:()=>eb,OrgSelfServeBillingRemodelPageInner:()=>ex});var r=a(848318),s=a(716544),l=a(445777),n=a(992277),i=a(224223),o=a(994811),m=a(44509),c=a(730169),d=a(653959),_=a(502255),u=a(757033),p=a(470403),g=a(482675),E=a(166365),h=a(17755),f=a(280198),v=a(975512),y=a(442313),S=a(719398),T=a(500276),N=a(478550),x=a(842714),b=a(912256),w=a(598327),C=a(669001),A=a(71260),I=a(720490),P=a(885132),k=a(456659),D=a(440896),M=a(390429),O=a(66557),R=a(61485),L=a(790355),B=a(449737),V=a(194546),U=a(405866),$=a(802780),F=a(180423),j=a(155651),G=a(95646),z=a(903579),H=a(481540),W=a(595919),Y=a(996511),K=a(695453),X=a(208649),J=a(376780),Z=a(511231),q=a(412429),Q=a(578427),ee=a(832367),et=a(993421),ea=a(263144),er=a(515673),es=a(995946),el=a(217084),en=a(229424),ei=a(43482),eo=a(280743),em=a(522296),ec=a(170052),ed=a(503543),e_=a(90741),eu=a(145015),ep=a(576220),eg=a(683148),eE=a(249555);function eh({teams:e,selectedTeamIds:t,onToggle:a}){return r.createElement("div",{"data-testid":"org-select-teams-step"},r.createElement("div",{className:eg.kH},e.map(e=>r.createElement(ef,{key:e.id,team:e,isSelected:t.has(e.id),onToggle:a}))))}function ef({team:e,isSelected:t,onToggle:a}){return r.createElement("div",{key:e.id,"data-testid":`select_team--${e.id}`},r.createElement(ed.F,{className:eE.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`}),r.createElement("label",{htmlFor:`select-team-${e.id}`,className:eg.K6,style:T.sx.if(t,T.sx.colorBorderSelected.colorBgSelectedTertiary,T.sx.colorBg.add({borderColor:"var(--color-bg)"})).$},r.createElement(ep.nl,{team:e}),r.createElement("span",{className:h.s.maxWFull.$},r.createElement("span",{className:h.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$},e.name),r.createElement("span",{className:h.s.block.font11.colorTextSecondary.ellipsis.$},(0,y.tx)("checkout.org_select_teams_member_count",{count:e.numMembers}))),t&&r.createElement("div",{className:eg.ER},r.createElement(e_.g,null))))}function ev({orgDetails:e,onChangeFormInput:t}){return r.createElement(C.x,{title:(0,y.t)("checkout.organization_details")},r.createElement("div",{className:h.s.font13.$},r.createElement(eu.Lf,{htmlName:"legal_org_name",label:(0,y.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),r.createElement(eu.Lf,{htmlName:"org_name",label:(0,y.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,y.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})))}var ey=a(574332);let eS=({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:l})=>{let n=(0,P.wh)(e,t,a),[i,o]=(0,r.useState)(n),m=(0,r.useCallback)(e=>{try{o(t=>(function(e,t){let a=(0,P.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{m({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,m]),setAdditionalSeats:(0,r.useCallback)(e=>{m({type:"setAdditionalSeats",additionalSeatCounts:e}),l(e)},[l,m]),selectSeatsState:i}};function eT({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:s,onChangeSeat:l,onChangeAdditionalSeats:n,currency:i}){let o=(0,P.GC)({currency:i,tier:et.Ju.ORG,renewalTerm:et.IX.YEAR,showCents:!1}),[m]=(0,d.mI)(o);if(null===m.data)throw Error("No seat types data");let c=m.data,{changeUserSeatType:_,selectSeatsState:u,setAdditionalSeats:p}=eS({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:s,onChangeSeat:l,onChangeAdditionalSeats:n});return r.createElement("div",{"data-testid":"select-seats-step-org"},r.createElement(ey.T,{users:e,seatTypes:c,changeUserSeatType:_,selectSeatsState:u,setAdditionalSeats:p,tier:et.Ju.ORG}))}var eN=a(388041);class ex extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===ea.X1.Initial||this.props.step===ea.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===el.SC.CREATE_AND_UPGRADE?ea.X1.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?ea.X1.TeamSelect:ea.X1.Payment:this.props.step,this.setStep=e=>{this.props.dispatch(L.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{i.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:z.wn.ORG_UPGRADE,paymentMethodType:ee.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case ea.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(ea.X1.TeamSelect);break;case ea.X1.AddCollaborators:this.setStep(ea.X1.Payment);break;case ea.X1.PseudoCreateTeam:this.setStep(ea.X1.TeamSelect);break;case ea.X1.TeamSelect:let t=(0,ec.hT)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(ea.X1.SeatSelect);break;case ea.X1.SeatSelect:this.setStep(ea.X1.Payment);break;case ea.X1.Payment:this.onSubmitPaymentAndAddress();break;case ea.X1.Review:this.onSubmitPurchaseOrder();break;case ea.X1.Confirmation:break;default:(0,l.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case ea.X1.CreateTeam:case ea.X1.PseudoCreateTeam:case ea.X1.AddCollaborators:return(0,y.t)("org_self_serve.create_team_step.next_select_team");case ea.X1.TeamSelect:return(0,y.t)("checkout.org_self_serve.next_select_seats");case ea.X1.SeatSelect:return(0,y.t)("org_self_serve.payment_step.next_payment");case ea.X1.Payment:return(0,y.t)("org_self_serve.review_step.next_review");case ea.X1.Review:case ea.X1.Confirmation:return"";default:(0,l.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case ea.X1.CreateTeam:case ea.X1.PseudoCreateTeam:return!this.state.newTeamName;case ea.X1.TeamSelect:return this.state.loading;case ea.X1.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case ea.X1.Review:case ea.X1.Confirmation:case ea.X1.AddCollaborators:case ea.X1.SeatSelect:return!1;default:(0,l.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);i.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,B.to)({type:N.lk,data:{source:N.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,K.Al)(this.props.user.id),m.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===ea.X1.TeamSelect?null:(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return r.createElement(k.z,{billingInterval:er.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===ea.X1.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:r.createElement("div",{className:eg.i9},r.createElement(E.B,{svg:eN.A,className:eg.$y}),r.createElement("p",null,(0,y.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:eg.uD,onClick:this.contactSales},(0,y.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(V.MN({currency:e})),this.setState({currency:e})},tier:et.Ju.ORG,title:(0,y.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,P.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,P.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,P.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,er.EB)((0,Z.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,er.EB)((0,Z.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return ei.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(L.$T({view:"recentsAndSharing"})),this.props.dispatch(f.s.error(t||(0,y.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,P.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:et.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:r,selectedUserSeatTypes:s}=(0,ec.s2)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:r,selectedUserSeatTypes:s})})}componentDidUpdate(e,t){(0,o.zN)(e.user.email)!==(0,o.zN)(this.props.user.email)&&m.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||W.N_.dict(e=>0);return(0,A.Vh)(e,(0,P.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||W.N_.dict(e=>0);return(0,A.kV)(e,(0,P.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||W.N_.dict(e=>0);return(0,A.N9)(e,(0,P.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){return{subtotal:this.getSubtotal(),tax_total:this.getTaxTotal(),total:this.getTotal()}}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){let e=(0,y.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,eo.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,y.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,eo.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let s=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,ee.Ey)(t,s).then(t=>{if(!t.error&&t.token)return(0,ee.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?u.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,er.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):u.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(ea.X1.Review))});{let e=t.error?.message||(0,y.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(U.b({completed_org_cart_flow:!0}));let e=(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,P.vm)(this.props.productPriceBySeatType),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,ec.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(r.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),u.Ay.post("/api/orgs",r).catch(r=>(this.props.dispatch(f.s.error((0,S.J)(r,r.data?.message||(0,y.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,_.$D)(n.e.BILLING,Error(`[Billing] Org checkout API failed: ${r.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(ea.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,Q.rq)({emails:this.state.inviteEmails,resourceType:J.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:es.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,K.Al)(this.props.user.id),(0,i.sx)("Self Serve Org Purchased (GTM)"),(0,H.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}render(){let e;let t=this.effectiveStep(),a=Object.values(this.state.eligibleTeamsByTeamId).map(e=>({id:e.id,name:e.name,img_url:e.img_url,numMembers:e.eligibleUsers.size}));if(t===ea.X1.Review){let t=(0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=r.createElement(I.j,{billingAddress:this.state.payment.address,billingInterval:er.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(ea.X1.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,P.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,P.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,P.gS)((0,P.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:et.Ju.ORG,title:(0,y.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===ea.X1.Confirmation?r.createElement(x._u,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(b.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o.qe)(this.props.user.email)&&r.createElement(b.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement("div",{style:T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$},t===ea.X1.CreateTeam&&r.createElement("div",{className:eg.Bb},r.createElement(O.y,{type:O.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===ea.X1.TeamSelect&&(this.state.loading?r.createElement(D.f,null):r.createElement(eh,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle})),t===ea.X1.SeatSelect&&(this.state.loading?r.createElement(D.f,null):r.createElement(eT,{users:(0,ec.sW)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===ea.X1.Payment&&r.createElement("form",{"data-testid":"org-payment-and-details-step"},r.createElement(ev,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),r.createElement("div",{className:h.s.pt24.$},r.createElement(C.x,{title:(0,y.t)("checkout.payment_details")},this.state.paymentError&&r.createElement("div",{className:h.s.mb20.$},r.createElement(g._,{color:g.S.ERROR,text:this.state.paymentError})),r.createElement(em.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})))),t!==ea.X1.CreateTeam&&this.renderPurchaseSummary()));return r.createElement(j.fu,{name:en.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource,entryPoint:this.props.entryPoint,eligibleTeamIds:(0,P.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,P.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading},t!==ea.X1.Confirmation&&r.createElement("div",{className:h.s.sticky.top0.zIndexTopBar.selectNone.$},r.createElement(w.d,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(L.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||el.SC.CREATE_AND_UPGRADE}))},isCampfireCart:!0})),r.createElement("div",{className:h.s.selectNone.$,style:T.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$},r.createElement(ew,{step:t}),e))}}function eb(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),l=(0,s.d4)(e=>(0,q.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===J._D.ADMIN)),i=(0,$.Mh)(),o=(0,s.d4)(e=>e.payment).currency||(0,Z.LN)();(0,c.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let m=(0,G.jv)({billableProductKeys:W.N_,baseQuery:{currency:o,tier:et.Ju.ORG,renewalTerm:et.IX.YEAR,unit:et.IX.YEAR}}),[_]=(0,d.mI)(m);if("loaded"!==_.status)return r.createElement(Y.K,null);let u=_.data;return r.createElement(p.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:p.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:X.y4},r.createElement(ex,{...e,dispatch:t,user:a,isOrgAdmin:l,canSeeBillingAddressExp:i,productPriceBySeatType:u,currency:o}))}function ew({step:e}){let t=function(e){switch(e){case ea.X1.TeamSelect:return(0,y.t)("checkout.org_self_serve.select_teams_title");case ea.X1.SeatSelect:return(0,y.t)("checkout.org_self_serve.select_seats_header");case ea.X1.Payment:return(0,y.t)("checkout.enter_your_payment_details");case ea.X1.Review:return(0,y.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=r.createElement(v.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:F.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0},(0,y.tx)("checkout.learn_more_about_seats"));switch(e){case ea.X1.TeamSelect:return(0,y.t)("checkout.org_self_serve.select_teams_subtitle");case ea.X1.SeatSelect:return(0,y.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case ea.X1.Review:return(0,y.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?r.createElement("div",{className:h.s.mb32.$,"data-testid":"cart-org-header"},r.createElement("h2",{className:h.s.font15.lh24.fontMedium.$},t),a&&r.createElement("p",{className:h.s.colorTextSecondary.font13.mt8.$},a),(0,R.UR)()&&r.createElement(M.W,{billingPeriod:er.tY.ANNUAL,isCampfireCart:!0})):null}ex.displayName="OrgSelfServePage"},262558:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>E});var r=a(848318),s=a(716544),l=a(66387),n=a(199584),i=a(771186),o=a(442313),m=a(96836),c=a(790355),d=a(194546),_=a(660785),u=a(155651),p=a(511231),g=a(581010);function E(e){let{selectedView:t,promo:a}=e,E=(0,s.wA)(),h=(0,g.Ud)({teamId:t.teamId}),f=()=>{(0,l._H)(),E(d.Ay({promo:null})),E(c.$T(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},v=()=>{E(_.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:f,onError:f}))};return a?r.createElement(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId}},r.createElement("div",{className:"promo_modals--promoReviewInner--O81Uu"},r.createElement("div",{className:"promo_modals--cancelRow--Zrs8S"},r.createElement("button",{type:"button",className:"promo_modals--cancelButton--ho2Ks text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:f},(0,o.tx)("promo.promo_review.cancel"))),r.createElement("div",{className:"promo_modals--promoReviewTitle--fatmf text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})),r.createElement("div",{className:"promo_modals--promoReviewDescription--uLn0D text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})),r.createElement("div",null,r.createElement(i.x,{isLoading:h},()=>r.createElement(n.o,null,r.createElement(m.d,{selectedView:t,onClickConfirm:v,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})))))):(f(),null)}},669001:(e,t,a)=>{a.d(t,{x:()=>n});var r=a(848318),s=a(17755),l=a(500276);function n({title:e,children:t,dataTestId:a}){return r.createElement("div",{style:l.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a},e&&r.createElement("h3",{className:s.s.mb16.fontMedium.font15.$},e),t)}},71260:(e,t,a)=>{a.d(t,{N9:()=>i,Vh:()=>l,kV:()=>n,up:()=>o});var r=a(595919),s=a(511231);function l(e,t){let a=0;return r.N_.forEach(r=>{a+=Math.round(e[r]*t[r])}),a}function n(e,t,a){let s=0;return r.N_.forEach(r=>{s+=Math.round(e[r]*t[r]*(.01*a))}),s}function i(e,t,a){return l(e,t)+n(e,t,a)}function o(e,t,a){return new s.vr(t).formatMoney(e,a)}},720490:(e,t,a)=>{a.d(t,{j:()=>R});var r=a(848318),s=a(500276),l=a(145015),n=a(17755),i=a(442313),o=a(180423),m=a(993421),c=a(515673),d=a(669001);function _(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return r.createElement(d.x,{title:(0,i.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details"},r.createElement(u,{header:e.tier===m.Ju.ORG?(0,i.t)("checkout.cart_plan_details.organization_name"):(0,i.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&r.createElement(u,{header:(0,i.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),r.createElement(u,{header:(0,i.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&r.createElement(u,{header:(0,i.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&r.createElement(u,{header:(0,i.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),r.createElement(l.Ph,{onClick:e.navigateToEditDetails,className:n.s.font13.py12.$,trackingProperties:{trackingDescriptor:o.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0},(0,i.tx)("checkout.cart_plan_details.edit_details")))}function u({header:e,value:t,dataTestId:a}){return r.createElement("div",{className:n.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a},r.createElement("p",{className:n.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$},e),r.createElement("p",{className:n.s.font13.lh24.colorText.breakWord.$},t))}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var g=a(445777),E=a(992277),h=a(960955),f=a(596616),v=a(468189),y=a(331196),S=a(502255),T=a(882439),N=a(842714),x=a(912256),b=a(232420),w=a(61485),C=a(558248),A=a(836108);let I=r.createElement(l.Us,{target:"_blank",trusted:!0,href:"/pricing"},(0,i.tx)("checkout.monthly_price"));function P({title:e,countByBillableProductKey:t,billingInterval:a,currency:l,taxPercent:_,isRequestPending:u,tier:p,onSubmit:g,onSubmitTrackingProperties:y}){let[x,w]=r.useState(!1),I=u||!x;r.useEffect(()=>{void 0===_&&(0,S.$D)(E.e.MONETIZATION_UPGRADES,Error("Undefined tax rate in cart review step"))},[_]);let P=r.createElement(h.S,{label:r.createElement(f.J,null,r.createElement("span",{className:n.s.font13.$},p===m.Ju.ORG?r.createElement(N.WA,null):r.createElement(b.Um,null))),checked:x,onChange:w}),D=r.createElement("div",{className:n.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading"},r.createElement(v.k,null));return r.createElement(d.x,{title:e,dataTestId:"cart-review"},r.createElement("div",{className:n.s.mt16.$},r.createElement(A.O,{countByBillableProductKey:t,billingInterval:a,currency:l,taxPercent:_??0,isCartReviewSummary:!0,tier:p})),r.createElement(k,{tier:p,isAnnual:a===c.NW.YEAR}),r.createElement(C._,null),r.createElement("div",{className:n.s.my24.$,style:s.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox"},P),r.createElement(T.lR,{onClick:g,disabled:I,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:o.c.COMPLETE_PURCHASE,...y}},u?D:(0,i.tx)("checkout.complete_purchase")))}function k({tier:e,isAnnual:t}){return(0,w.IP)()?r.createElement(D,{tier:e,isAnnual:t}):e===m.Ju.ORG?r.createElement(M,null):null}function D({tier:e,isAnnual:t}){let a=e===m.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return r.createElement("div",{className:n.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner"},r.createElement("div",{className:n.s.flexColumn.pt4.pb8.px8.colorBgSecondary.bRadius5.$},r.createElement("div",{className:n.s.px4.$},r.createElement(y.G,null)),r.createElement("div",{className:n.s.px8.$},r.createElement("p",{className:n.s.pt4.fontMedium.$},(0,i.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")),r.createElement("p",{className:n.s.pt4.$},function(e,t){switch(e){case m.Ju.ORG:return(0,i.tx)("checkout.cart_review_upgrade_info_org");case m.Ju.PRO:return t?(0,i.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:I}):(0,i.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,g.wc)(e)}}(e,t)),r.createElement(l.Ph,{className:n.s.h24.fontMedium.$,target:"_blank",href:a,trusted:!0},(0,i.tx)("checkout.learn_more")))))}function M(){let[e,t]=r.useState(!1),a=new Date().getMonth(),o=new Date().setMonth(a+3);return r.createElement("div",{className:n.s.mt24.$,"data-testid":"cart-review-org-true-up-banner"},e&&r.createElement(x.LJ,{onClose:()=>t(!1)}),r.createElement("div",{className:n.s.flexColumn.pt4.pb8.px8.colorBgSecondary.bRadius5.$},r.createElement(y.G,null),r.createElement("div",{className:n.s.px8.$},r.createElement("p",{className:n.s.pt4.fontMedium.$},(0,i.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(o)})),r.createElement("p",{className:n.s.pt4.$},(0,i.tx)("org_self_serve.review_step.what_is_a_true_up")),r.createElement("ul",{style:s.sx.ml16.mt4.add({listStyle:"disc"}).$},r.createElement("li",null,(0,i.tx)("org_self_serve.review_step.true_up_description.seat_rename")),r.createElement("li",null,(0,i.tx)("checkout.org_self_serve.true_up_description2_seat_rename")),r.createElement("li",null,(0,i.tx)("checkout.org_self_serve.true_up_description3_seat_rename")),r.createElement("li",null,(0,i.tx)("checkout.org_self_serve.true_up_description4_seat_rename"))),r.createElement(l.Ph,{className:n.s.pt8.fontMedium.inline.$,onClick:()=>t(!0),trusted:!0},(0,i.tx)("org_self_serve.review_step.learn_more_about_true_ups")))))}var O=a(440896);function R(e){return r.createElement("div",{style:s.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step"},r.createElement(_,{...e}),e.hasUpgradeSucceeded?r.createElement(O.f,null):r.createElement(P,{...e}))}},456659:(e,t,a)=>{a.d(t,{z:()=>x});var r=a(848318),s=a(356505);if(443==a.j)var l=a(468189);if(443==a.j)var n=a(677772);if(443==a.j)var i=a(311037);if(443==a.j)var o=a(596616);var m=a(482675),c=a(17755),d=a(442313),_=a(500276),u=a(450665),p=a(180423),g=a(155651),E=a(950738),h=a(511231),f=a(515673),v=a(669001),y=a(885132),S=a(558248),T=a(836108);let N=(0,g.tf)(s.Pw);function x({title:e,countByBillableProductKey:t,tier:a,billingInterval:s,currency:m,buttonText:g,isButtonDisabled:x,isLoading:w,onClickNext:C,onSwitchCurrency:A,onSwitchBillingInterval:I,footer:P,canEnforcePaidSeatMinimum:k,trackingProperties:D}){let M=!!t,O=(0,h._Z)(),R=(0,E.Um)(),[L,B]=function(e,t,a,s){let[l,n]=r.useState(!1),i=r.useCallback((e,t)=>!!(s&&e&&!(0,y.A$)(e,t)),[s]);r.useEffect(()=>{l&&!i(t,a)&&n(!1)},[t,a,s,l,i]);let o=r.useCallback(r=>{if(!l){if(i(t,a)){n(!0);return}e(r)}},[t,a,l,i,e]);return[l,o]}(C,t,a,k),V=r.createElement("div",{className:c.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading"},r.createElement(l.k,null));return r.createElement(v.x,{title:e,dataTestId:"cart-sidebar"},r.createElement("div",{className:c.s.mt16.$},M?r.createElement(r.Fragment,null,O&&r.createElement("div",{className:c.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher"},r.createElement("p",null,(0,d.tx)("checkout.sidebar.currency_label")),r.createElement(u.D,{currency:m,dropdownShown:R,supportedCurrencies:(0,h.B9)(),changeCurrency:e=>{A(e)},shortFormDisplay:!0,paddingOverride:0})),I&&M&&r.createElement("div",{className:c.s.my16.$,style:_.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval"},r.createElement(n.b,{legend:r.createElement(i.q,null,(0,d.tx)("checkout.sidebar.switch_your_billing_interval")),value:s,onChange:e=>I(e)},r.createElement(n.c,{value:f.NW.YEAR,label:r.createElement(o.J,{className:c.s.flex.itemsCenter.gap16.$},(0,d.tx)("checkout.sidebar.annual")," ",r.createElement("b",{className:c.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:_.sx.add({fontSize:"10px"}).$},(0,d.tx)("checkout.sidebar.save_up_to_20")))}),r.createElement(n.c,{value:f.NW.MONTH,label:r.createElement(o.J,null,(0,d.tx)("checkout.sidebar.monthly"))}))),r.createElement("div",{className:c.s.pt16.$},r.createElement(T.O,{countByBillableProductKey:t,billingInterval:s,currency:m,isCartReviewSummary:!1,tier:a}),r.createElement(S._,null))):r.createElement("p",{className:c.s.colorTextSecondary.$},(0,d.tx)("checkout.sidebar.cannot_calculate_subtotal"))),r.createElement("div",{style:_.sx.add({marginTop:"80px"}).$},L&&r.createElement(b,null),r.createElement(N,{onClick:B,disabled:x||w,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:p.c.CART_SIDEBAR,...D}},w?V:g),P&&r.createElement("div",{className:c.s.mt16.$,"data-testid":"cart-sidebar-footer"},P)))}function b(){return r.createElement("div",{className:c.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner"},r.createElement(m._,{color:m.S.WARNING,text:r.createElement("p",{style:_.sx.lh14.add({fontSize:"9px"}).$},(0,d.tx)("checkout.sidebar.paid_seat_minimum_banner"))}))}},440896:(e,t,a)=>{a.d(t,{f:()=>o});var r=a(848318);if(443==a.j)var s=a(468189);var l=a(17755),n=a(500276),i=a(669001);function o(){return r.createElement(i.x,{title:null,dataTestId:"loading-cart-card"},r.createElement("div",{className:l.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:n.sx.add({height:"208px"}).$},r.createElement(s.k,null)))}},558248:(e,t,a)=>{a.d(t,{_:()=>m});var r=a(848318),s=a(17755),l=a(975512),n=a(442313),i=a(61485),o=a(180423);function m(){return(0,i.UR)()?r.createElement("p",{className:s.s.mt8.colorTextSecondary.$},(0,n.tx)("checkout.purchase_summary.price_change.text",{link:r.createElement(l.Ph,{href:"https://help.figma.com/hc/articles/27468498501527#localized-currency",trackingProperties:{trackingDescriptor:o.c.UPDATED_PRICING_FOR_FULL_SEATS},newTab:!0},(0,n.tx)("checkout.purchase_summary.price_change.link"))})):null}},836108:(e,t,a)=>{a.d(t,{O:()=>b});var r=a(848318);if(443==a.j)var s=a(445777);var l=a(992277),n=a(653959),i=a(502255),o=a(17755),m=a(442313),c=a(500276),d=a(775038),_=a(63817),u=a(61485),p=a(155651),g=a(95646),E=a(171063),h=a(595919),f=a(890477),v=a(511231),y=a(993421),S=a(515673),T=a(229424),N=a(71260),x=a(885132);function b({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:s,taxPercent:l,tier:i}){let _=(0,u.UR)(),v=(0,g.jv)({billableProductKeys:h.N_,baseQuery:{currency:a,tier:i,renewalTerm:t,unit:t}}),y=(0,g.jv)({billableProductKeys:h.N_,baseQuery:{currency:a,tier:i,renewalTerm:t,unit:S.NW.MONTH}}),[b,I]=(0,n.mI)(v,y);if(!b.data||!I.data)throw Error("Price data is null");let P=(0,x.s$)(b.data),k=(0,x.s$)(I.data),D=l||0,M=e=>(0,N.up)(e,a,{showCents:s}),O=(0,N.Vh)(e,P),R=(0,N.kV)(e,P,D),L=(0,N.N9)(e,P,D),B=M(O),V=M(R),U=M(L),$=r.createElement(d.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,m.tx)("checkout.review_in_tax_disclaimer")),F=t===S.NW.YEAR;return r.createElement(p.fu,{name:T.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:i,billingInterval:t,countBySeatType:(0,x.gS)(e),currency:a,taxPercent:D,subtotal:O,taxTotal:R,total:L},enabled:s},r.createElement("div",null,r.createElement("div",{style:c.sx.add({marginBottom:"24px"}).$},Object.keys(e).sort(f.AG).map(t=>r.createElement(w,{key:t,billableProductKey:t,count:e[t],currency:a,isAnnual:F,isCartReviewSummary:s,paymentPrices:P,lineItemPrices:k,hasPriceAsterisk:_&&t===E.ud.EXPERT}))),r.createElement("div",{className:o.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal"},r.createElement("h3",{className:o.s.fontMedium.if(s,o.s.font13.lh24).$},(0,m.tx)("checkout.subtotal")),r.createElement("p",{className:o.s.if(s,o.s.font13.lh24).$},A({price:B,isCartReviewSummary:s,isAnnual:F}))),!s&&r.createElement(d.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:$})),s&&r.createElement("div",null,r.createElement("div",{className:o.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes"},r.createElement("div",{className:o.s.flexColumn.$},r.createElement("h3",{className:o.s.font13.lh24.$},(0,m.tx)("checkout.purchase_summary.tax")),r.createElement("h3",{className:o.s.colorTextSecondary.font13.lh24.$},(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:D}))),r.createElement("p",{className:o.s.font13.lh24.$},A({price:V,isAnnual:F,isCartReviewSummary:s}))),r.createElement("div",{className:o.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due"},r.createElement("h3",{className:o.s.fontMedium.font13.lh24.$},(0,m.tx)("checkout.purchase_summary.total_due_today")),r.createElement("p",{className:o.s.font13.lh24.$},A({price:U,isAnnual:F,isCartReviewSummary:s}))),r.createElement("div",{"data-testid":"purchase-summary-plan-renewal"},r.createElement("p",{className:o.s.font13.lh24.$},r.createElement(C,{tier:i,isAnnual:F}))))))}function w({billableProductKey:e,count:t,currency:a,isAnnual:s,isCartReviewSummary:n,paymentPrices:c,lineItemPrices:d,hasPriceAsterisk:u}){if(!(0,E.dA)(e))return(0,i.$D)(l.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let p=new v.vr(a),g=p.formatMoney(c[e]*t,{showCents:n}),h=o.s.font13.lh24,f=(0,m.t)("checkout.price_per_month",{price:p.formatMoney(d[e])});return r.createElement("div",{"data-testid":`purchase-summary-${e}-row`,className:o.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(n,o.s.itemsCenter,o.s.itemsStart).$},r.createElement("div",null,r.createElement("h3",{className:o.s.if(n,h).$},(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,_.tI)(e)})),r.createElement("p",{className:o.s.colorTextSecondary.if(n,h).$},(0,m.tx)(s?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:f,quantity:t}))),r.createElement("p",{className:o.s.if(n,h).$},A({price:g,isCartReviewSummary:n,isAnnual:s,hasPriceAsterisk:u})))}function C({tier:e,isAnnual:t}){let a=(0,u.IP)();switch(e){case y.Ju.ORG:return a?(0,m.tx)("checkout.purchase_summary.plan_renewal_org"):(0,m.tx)("checkout.org_self_serve.annual_renewal_seat_rename");case y.Ju.PRO:if(a)return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");return t?(0,m.tx)("pro_cart.review.your_subscription_will_automatically_renew_without_link.seat_rename"):(0,m.tx)("pro_cart.review.your_subscription_will_automatically_renew_monthly");default:(0,s.wc)(e)}}function A({price:e,isAnnual:t,isCartReviewSummary:a,hasPriceAsterisk:r}){let s=a?e:t?(0,m.t)("checkout.price_per_year",{price:e}):(0,m.t)("checkout.price_per_month",{price:e});return r?(0,m.t)("checkout.purchase_summary.asterisked_price",{price:s}):s}},574332:(e,t,a)=>{a.d(t,{T:()=>G});var r=a(848318),s=a(425642),l=a(897378),n=a(12127),i=a(41054),o=a(224223),m=a(575492),c=a(17755),d=a(442313),_=a(155651),u=a(993421),p=a(229424),g=a(716544),E=a(776402),h=a(777611),f=a(575013),v=a(356505),y=a(853224),S=a(723263),T=a(895104),N=a(449737),x=a(890477),b=a(464012),w=a(885132);let C=(0,b.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:s,open:l,onClose:n}=e,i=E.hS({open:l,onClose:n}),[m,_]=(0,r.useState)(a),u=e=>t=>{_((0,w.$$)(m,t,e))},p=u(1),g=u(-1),y=r.useCallback(e=>t=>_((0,w.$$)(m,e,t-m[e])),[m]);return r.createElement(h.bL,{manager:i,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"}},r.createElement(f.vo,null,r.createElement(f.Y9,null,r.createElement(f.hE,null,(0,d.tx)("checkout.additional_seats.add_or_remove_unassigned_seats"))),r.createElement(f.nB,null,r.createElement("div",{className:c.s.pt8.pb24.colorTextSecondary.$},r.createElement("p",null,(0,d.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on"))),r.createElement(T.Y,{direction:"vertical",spacing:16,padding:{bottom:16}},Object.keys(m).sort(x.AG).map(e=>r.createElement("div",{key:e,"data-testid":`additional-seats--${e}`},r.createElement(S.s,{billableProductKey:e,numSeats:m[e],minSeatsCount:0,headerText:`${t[e].displayName} seat`,headerSubText:(0,d.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>p(e),decrementSeats:()=>g(e),updateAdditionalSeatsText:(0,S.K)(y(e))}))))),r.createElement(f.wi,null,r.createElement(f.jk,null,r.createElement(v.$n,{variant:"secondary",onClick:n,htmlAttributes:{"data-testid":"additional-seats--cancel"}},(0,d.tx)("checkout.additional_seats.cancel")),r.createElement(v.$n,{variant:"primary",onClick:()=>{o.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(m),tier:e.tier}),s(m),n()},htmlAttributes:{"data-testid":"additional-seats--confirm"}},(0,d.tx)("checkout.additional_seats.confirm"))))))},"AdditionalSeatsModal");function A({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:s}){let l=(0,g.wA)();return r.createElement(v.$n,{variant:"ghost","aria-label":(0,d.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},onClick:()=>{l((0,N.to)({type:C,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:s}}))},iconPrefix:r.createElement(y.A,null)},(0,d.tx)("checkout.additional_seats.add_seats_to_assign_later"))}var I=a(649372),P=a(276430),k=a(661780),D=a(832876),M=a(424387),O=a(693306),R=a(171063);let L=(0,b.Ju)(function(e){let{user:t,seatTypes:a,selectedSeatType:s,setSelectedSeatType:l,open:n,onClose:i}=e,o=E.hS({open:n,onClose:i});return r.createElement(_.fu,{name:"Select User Seat Type Modal"},r.createElement(h.bL,{manager:o,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"}},r.createElement(f.vo,null,r.createElement(f.nB,null,r.createElement(T.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16}},r.createElement("div",{className:c.s.mb24.$},r.createElement(O.j,{user:t,text:(0,d.t)("modify_plan_user_seat_modal.choose_seat",{name:t.handle})})),r.createElement(M.m,{currentSeatType:s,setNextSeatType:e=>{l(e),i()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(a).filter(([e,t])=>e!==R.Gu.VIEW).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0}))))))},"SelectUserSeatTypeModal"),B="select_seats_table--sidePadding--rdwOD",V="select_seats_table--userColumn--0bg1B",U="select_seats_table--seatColumn--dUkDj",$="select_seats_table--teamColumn--kxWk-",F="select_seats_table--descriptionColumn--nvbAl";function j({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:s,tier:l}){let n=(0,g.wA)(),i=(0,k.TA)(),o=e.id===i;return r.createElement("tr",{"data-testid":`select_seat_row--${e.id}`},r.createElement("td",{"aria-hidden":!0,className:B}),r.createElement("td",{className:V,"data-testid":"select_seats_table_user_cell"},r.createElement(D.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})),r.createElement("td",{className:U},r.createElement(v.IK,{variant:"ghost","aria-label":(0,d.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{n((0,N.to)({type:L,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:s}}))},iconPrefix:r.createElement(P.B,{type:a,size:"24"})},r.createElement("span",{className:c.s.flex.justifyBetween.ml2.$},t[a].displayName,r.createElement(I.k,null)))),l===u.Ju.ORG&&r.createElement("td",{className:$},e.teams),r.createElement("td",{className:F},t[a].description),r.createElement("td",{"aria-hidden":!0,className:B}))}function G({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:g,setAdditionalSeats:E,tier:h}){let f=(0,r.useRef)(null),v=function({tableContainerRef:e}){let[t,a]=r.useState(window.innerHeight),s=()=>{a(window.innerHeight)};r.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[]);let l=e.current?.getBoundingClientRect();return Math.max(t-(l?.top||0)-49-8-56,150)}({tableContainerRef:f}),[y,S]=r.useState(a),[T,N]=r.useState(!1),x=r.useMemo(()=>{let t=[...e];return(0,s.v7)(t,e=>e.handle,{isDescending:T}),t},[e,T]),b=(0,w.UL)((0,w.iB)(a.selectedUserSeatTypes)),C=(0,w.UL)(a.additionalSeatCounts);return r.createElement(_.fu,{name:p.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,w.Tj)(y.selectedUserSeatTypes),countBySeatType:(0,w.gS)((0,w.O$)(y.selectedUserSeatTypes,y.additionalSeatCounts)),selectedTeamIds:(0,w.gu)(y.selectedTeamIds),userIds:(0,w.gu)(e.map(e=>e.id))}},r.createElement("div",null,r.createElement("div",{className:"select_seats_table--tableContainer--ft8tm",ref:f,"data-testid":"select-seats-table"},r.createElement(m.P,{maxHeight:v,className:"select_seats_table--scrollContainer--HMiGx",hideScrollbar:!0,horizontalScrollingDisabled:!0},r.createElement("table",{className:"select_seats_table--table--hBe3G"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{"aria-hidden":!0,className:B}),r.createElement("th",{className:V},(0,d.tx)("checkout.select_seats_table.user_column")," ",r.createElement("div",{className:c.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button"},r.createElement(l.K,{onClick:()=>N(e=>!e),"aria-label":(0,d.t)("checkout.select_seats_table.sort")},T?r.createElement(n.d,{"data-testid":"select-seats-table-icon-arrow-up"}):r.createElement(i.Q,{"data-testid":"select-seats-table-icon-arrow-down"})))),r.createElement("th",{className:U},(0,d.tx)("checkout.select_seats_table.seat_column")),h===u.Ju.ORG&&r.createElement("th",{className:$},(0,d.tx)("checkout.select_seats_table.team_column")),r.createElement("th",{className:F},(0,d.tx)("checkout.select_seats_table.description_column")),r.createElement("th",{"aria-hidden":!0,className:B}))),r.createElement("tbody",null,x.map(e=>r.createElement(j,{key:e.id,user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{o.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:h}),g(e.id,t)},tier:h}))))),r.createElement("div",{className:c.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$},r.createElement(A,{tier:h,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:E}),r.createElement("p",null,(0,d.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,d.tx)("checkout.select_seats_table.assigned_seats",{count:b}),unassignedSeatsText:(0,d.tx)("checkout.select_seats_table.unassigned_seats",{count:C})}))))))}},447243:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eg});var r=a(848318),s=a(716544),l=a(445777),n=a(992277),i=a(224223),o=a(994811),m=a(44509),c=a(730169),d=a(397579),_=a(379338),u=a(653959),p=a(66387),g=a(502255),E=a(416900),h=a(470403),f=a(482675),v=a(17755),y=a(280198),S=a(975512),T=a(442313),N=a(500276),x=a(71260),b=a(720490),w=a(885132),C=a(456659),A=a(440896),I=a(390429),P=a(124033),k=a(61485),D=a(790355),M=a(110979),O=a(194546),R=a(660785),L=a(405866),B=a(802780),V=a(180423),U=a(155651),$=a(95646),F=a(903579),j=a(595919),G=a(695453),z=a(208649),H=a(661780),W=a(541641),Y=a(997894),K=a(511231),X=a(710665),J=a(581010),Z=a(694253),q=a(834111),Q=a(993421),ee=a(515673),et=a(217084),ea=a(229424),er=a(295957),es=a(556522),el=a(669001),en=a(93151);function ei(e){let{error:t,errorCode:a}=(0,s.d4)(e=>e.payment),l=!!t&&null===a;return r.createElement(el.x,{title:(0,T.t)("checkout.payment_details")},r.createElement("div",{className:v.s.alignLeft.$},r.createElement(en.F,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:l?t:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})))}var eo=a(574332),em=a(171063);function ec(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,em.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}let ed=(e,t,a,s)=>{let[l,n]=(0,r.useState)(()=>{let r=function(e,t,a){let r;let{countBySeatType:s,selectedUserSeatTypes:l}=e||{countBySeatType:{},selectedUserSeatTypes:{}},n=t.map(e=>e.user.id),i=(0,w.md)(l,n);return t.forEach(e=>{let t=e.user.id;i[t]||(i[t]=e.recommended_seat_type?.key??em.Gu.VIEW)}),r=(0,w.Ed)(s)?{...s}:{developer:0,collaborator:0,expert:0},Object.values(i).forEach(e=>{"view"!==e&&e in r&&r[e]>0&&r[e]--}),(0,w.MZ)(a,i,r)}(a,t,e);return s(ec(r)),r}),i=(0,r.useCallback)(e=>{try{n(t=>{let a=function(e,t){let a=(0,w.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(ec(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{i({type:"changeSeatType",userId:e,seatType:t})},[i]),setAdditionalSeats:e=>i({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:l}};function e_({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:s,initCampfireSeats:l,onUpdateCampfireSeats:n}){let i=(0,w.GC)({currency:t,tier:Q.Ju.PRO,renewalTerm:a,showCents:!1}),[o]=(0,u.mI)(i);if(null===o.data)throw Error("Seat types data is null");let m=o.data,{changeUserSeatType:c,selectSeatsState:d,setAdditionalSeats:_}=ed(e,s,l,n),p=s.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return r.createElement(eo.T,{users:p,seatTypes:m,changeUserSeatType:c,selectSeatsState:d,setAdditionalSeats:_,tier:Q.Ju.PRO})}let eu=Y.M4.Query({fetch:async e=>(await er.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function ep(e){let t=(0,H.iZ)(),a=t?.id,l=(0,_.DC)(),h=(0,s.d4)(e=>e.payment),S=(0,s.d4)(e=>e.teams),I=e.selectedView.paymentStep,k=r.useRef(null),[V,z]=(0,r.useState)(l?.team_name??""),[Y,er]=(0,r.useState)(G.kt),[el,en]=(0,r.useState)(l?.currency||h.currency||(0,K.LN)()),eo=h.billingPeriod,{editorStatusChanges:em}=h,{ignoreCurrentPlan:ec}=e.selectedView,ed=e.selectedView.teamId,ep=(0,s.d4)(t=>(0,q.Np)(t,{...e.selectedView,paymentStep:ee.tn.CONFIRM_PAY})),eg=(0,s.d4)(t=>(0,q.Np)(t,{...e.selectedView,paymentStep:ee.tn.PAYMENT_AND_ADDRESS})),eh=(0,B.Mh)(),ef=void 0===h.cartSelections,ev=(0,d.ZC)(ef),ey=h.cartSelections?.countBySeatType||j.N_.dict(e=>0),eS=(0,X.ne)(eo)||ee.NW.YEAR,eT=(0,$.jv)({billableProductKeys:j.N_,baseQuery:{currency:el,tier:Q.Ju.PRO,renewalTerm:eS,unit:eS}}),[eN]=(0,u.mI)(eT),ex=(0,$.vu)(eN);if(null===ex.data)throw Error("Price data is null");let eb=ex.data,ew=(0,w.s$)(eb),eC=(0,x.Vh)(ey,ew),{createPaymentElement:eA,unmountPaymentElement:eI,savePayment:eP,billingAddress:ek,updateBillingAddress:eD,shippingAddress:eM,updateShippingAddress:eO,customerLegalName:eR,setCustomerLegalName:eL,nameOnPaymentMethod:eB,setNameOnPaymentMethod:eV,vatGstId:eU,setVatGstId:e$,regionalVatGstId:eF,setRegionalVatGstId:ej,paymentMethodType:eG,error:ez}=(0,F.Op)({setupIntentParams:{redirect_url:ep,error_redirect_url:eg,subtotal_estimate:eC,currency:el},customerInfo:{teamId:ed},paymentFlowSource:F.wn.PRO_UPGRADE,currency:el,billingPeriod:eo,defaultCountry:(0,K.ub)(),initialBillingAddress:l?.billing_address,initialNameOnPaymentMethod:l?.name_on_payment_method,initialShippingAddress:l?.shipping_address,initialCustomerLegalName:l?.customer_legal_name,initialVatGstId:l?.vat_gst_id,initialRegionalVatGstId:l?.regional_vat_gst_id,teamName:l?.team_name||V,canSeeBillingAddressExp:eh,isCheckout:!0,isCampfireCart:!0}),eH=ez?.code===F.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,eW=(0,s.wA)(),eY=(0,J.Ud)({teamId:ed,canSeeBillingAddressExp:eh}),[eK]=(0,u.IT)(eu({teamId:ed}),{enabled:!!ed}),eX="loaded"!==eK.status;(0,r.useEffect)(()=>{"loaded"===eK.status&&(0,w.R9)({eligibleTeamIds:[ed],eligibleTeamUsers:eK.data.eligible_team_users,tier:Q.Ju.PRO,step:I})},[eK]);let eJ=eH||h.submitPending,eZ=r.useCallback(()=>{eW(D.$T({...e.selectedView,paymentStep:ee.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ec,billingPeriod:eo}))},[eW,e.selectedView,ec,eo]),eq=ed?S[ed]?.name:V,eQ=h.displayName||eq;(0,G.pI)({loadingPaidEditors:eY,teamId:ed,teamName:ed?void 0:V,setTeamName:ed?void 0:z,collaborators:ed||e.selectedView.teamFlowType!==et.SC.CREATE?void 0:Y,setCollaborators:ed||e.selectedView.teamFlowType!==et.SC.CREATE?void 0:er});let e0=(0,s.d4)(e=>e.currentUserOrgId),e1=ec?null:e0,e5=(0,s.d4)(e=>e1?e.orgById[e1]:null),e7=(0,es.Q)({currentOrgId:e1,currentTeamId:null}),e4=e7.data?.currentUser?.baseOrgUser?.workspaceUsers,e3=e4?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e2}=(0,W.LM)(e5,e3??null),e6=(0,s.d4)(e=>(0,Z.isOrgUserExternallyRestrictedFromState)(e));(0,c.h)(()=>{eW(L.b({entered_pro_cart_flow:!0}))}),(0,c.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[e9,e8]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I===ee.tn.PAYMENT_AND_ADDRESS&&eH&&eZ()}),(0,r.useEffect)(()=>{I===ee.tn.CONFIRM_PAY&&!eY&&ef&&((0,i.sx)("pro_cart_selections_undefined_on_review_step",{teamId:ed,userId:a}),(0,g.$D)(n.e.MONETIZATION_UPGRADES,Error("[Billing] Pro cart selections undefined on review step")))},[ef,eY,I,a,ed]),(0,r.useEffect)(()=>{I===ee.tn.CONFIRM_PAY&&ev&&!ef&&(0,i.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:ed,loadingPaidEditors:eY})},[ef,ev,eY,I,ed]);let te=(0,s.d4)(e=>!!e.user&&(0,E.cn)(e.user));(0,r.useEffect)(()=>{te&&e.selectedView.isEduTeam?eW(O.Lo({billingPeriod:ee.tY.STUDENT})):e.selectedView.isEduTeam&&eW(O.Lo({billingPeriod:ee.tY.UNSPECIFIED}))},[eW,e.selectedView.isEduTeam,te]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===et.SC.CREATE_AND_UPGRADE&&(e6||e2===W.z4.TEAM_CREATION_CONTROL)&&(m.Ay.redirect("/"),eW(y.s.error((0,T.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e6,e2,eW]);let tt=h.currencyToSwitch;(0,r.useEffect)(()=>{tt&&en(tt)},[en,tt]);let ta=eo===ee.tY.STUDENT,tr=Y.filter(e=>e&&e.trim()).map(e=>e.trim()),ts=tr.filter(e=>!(0,o.xf)(e)),tl=!!t&&tr.filter(e=>e===t.email).length>0,tn=()=>{let e=(0,x.Vh)(ey,ew),t=h.taxes?.tax_percent??0,a=(0,x.kV)(ey,ew,t),r=(0,x.N9)(ey,ew,t);return{subtotal:e,taxPercent:t,taxTotal:a,total:r}},ti=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let l=(0,P.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eo,h.promo,e.selectedView.planType||et.Sc.UNDETERMINED);I===ee.tn.CREATE_TEAM&&(z(V.trim()),eW(D.$T({...e.selectedView,teamId:null,paymentStep:l,ignoreCurrentPlan:ec,billingPeriod:eo}))),I===ee.tn.ADD_COLLABORATORS&&(ts.length?eW(y.s.error((0,T.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:ts[0]}))):tl?eW(y.s.error((0,T.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):eW(D.$T({...e.selectedView,paymentStep:l,ignoreCurrentPlan:ec,billingPeriod:eo}))),I===ee.tn.CHOOSE_PLAN?ta?eW(D.$T({...e.selectedView,paymentStep:l,billingPeriod:ee.tY.STUDENT,ignoreCurrentPlan:ec})):(eW(O.Je({editorStatusChanges:em})),eW(D.$T({...e.selectedView,paymentStep:l,billingPeriod:h.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:s}}:{},ignoreCurrentPlan:ec}))):I===ee.tn.PAYMENT_AND_ADDRESS&&(eW(O.I2({submitPending:!0})),await eP(),eW(O.I2({submitPending:!1})))},to=t&&G.lX({teamId:ed,userId:t.id})?.is3DS;return e.selectedView.teamFlowType===et.SC.CREATE_AND_UPGRADE&&(e6||e2===W.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(U.fu,{name:ea.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:e.selectedView.entryPoint,step:I,currency:el,renewalTerm:eS,prices:(0,w.Jh)(eb)},enabled:!(eY||eX)},r.createElement("div",{"data-testid":"team-upgrade-billing-remodel",className:v.s.selectNone.$},r.createElement(P.vU,{selectedView:e.selectedView,isCampfireCart:!0}),r.createElement("div",{style:N.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$},r.createElement(eE,{step:I,teamName:eq??"",renewalTerm:eS}),r.createElement("div",{ref:k},I===ee.tn.CONFIRM_PAY?r.createElement(r.Fragment,null,to&&r.createElement("div",{className:v.s.mxAuto.alignLeft.mb16.$},r.createElement(f._,{color:f.S.INFORMATION,text:(0,T.t)("pro_cart.review.extra_validation")})),eY||ef?r.createElement(A.f,null):r.createElement(b.j,{billingAddress:ek,billingInterval:eS,countByBillableProductKey:ey,currency:el,displayName:eQ??"",hasUpgradeSucceeded:e9,isRequestPending:h.submitPending,legalName:h.legalName,navigateToEditDetails:()=>{eW(D.$T({...e.selectedView,paymentStep:ee.tn.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:ec,billingPeriod:eo}))},onSubmit:()=>{let t=()=>{e8(!0),(0,_.sj)(),(0,J.OI)(eW),(0,et.h5)(e.selectedView.teamFlowType)&&null===ed&&(0,G.Al)(a)};if(e.selectedView.teamId&&ta)eW(O.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&h.promo){let r=e.selectedView.teamId;eW(R.S_({teamId:r,teamName:S[r].name,promoCode:h.promo?.code||"",onSuccess:()=>{t(),(0,p._H)(),eW(O.Ay({promo:null})),a?e.selectedView.previousView?D.$T(e.selectedView.previousView):M._l({workspace:{userId:a,orgId:null,teamId:r},view:{view:"allProjects"}}):eW(D.$T(e.selectedView.previousView||{view:"team",teamId:r}))},onError:()=>{(0,p._H)(),eW(O.Ay({promo:null})),eW(D.$T({...e.selectedView,paymentStep:ee.tn.PLAN_COMPARISON,ignoreCurrentPlan:ec}))}}))}else{eW(L.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:r,total:s}=tn();eW(O.I2({submitPending:!0})),eW((0,R.gk)({teamId:e.selectedView.teamId,selectedCurrency:el,teamName:V,teamFlowType:e.selectedView.teamFlowType,invites:tr,hasSelectedStudentTeam:ta,onSuccess:t,displayedCostBreakdown:{subtotal:a,tax_total:r,total:s},isCampfireCart:!0,displayedPriceKeys:(0,w.vm)(eb)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,w.Tj)(h.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,w.gS)(ey),...tn()},shippingAddress:eM,taxPercent:h.taxes?.tax_percent,tier:Q.Ju.PRO,title:(0,T.t)("checkout.upgrade_to_a_professional_plan"),userEmail:t?.email||""})):r.createElement("div",{style:N.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$},I===ee.tn.CHOOSE_PLAN&&e.selectedView.teamId&&(eY||eX?r.createElement(A.f,null):r.createElement(e_,{teamId:e.selectedView.teamId,currency:el,renewalTerm:eS,eligibleTeamUsers:eK.data.eligible_team_users,initCampfireSeats:h.cartSelections,onUpdateCampfireSeats:e=>eW(O.qU({cartSelections:e}))})),I===ee.tn.PAYMENT_AND_ADDRESS&&r.createElement(ei,{billingAddress:ek,canSeeBillingAddressExp:eh,createPaymentElement:eA,error:ez,isCampfireCart:!0,legalCompanyName:eR,nameOnPaymentMethod:eB,onRegionalVatGstIdChange:ej,onVatGstIdChange:e$,paymentFlow:F.wn.PRO_UPGRADE,paymentMethodType:eG,regionalVatGstId:eF,shippingAddress:eM,unmountPaymentElement:eI,updateBillingAddress:eD,updateLegalCompanyName:eL,updateNameOnPaymentMethod:eV,updateShippingAddress:eO,vatGstId:eU}),r.createElement(C.z,{billingInterval:eS,buttonText:I===ee.tn.PAYMENT_AND_ADDRESS?(0,T.t)("pro_cart.sidebar.next_review"):(0,T.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:I===ee.tn.CHOOSE_PLAN,countByBillableProductKey:ey,currency:el,isButtonDisabled:eJ,isLoading:h.submitPending,onClickNext:ti,onSwitchBillingInterval:e=>{i.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:ed??void 0,renewalTerm:e}),eW(O.Lo({billingPeriod:(0,X.JV)(e)}))},onSwitchCurrency:e=>{en(e),eW(O.MN({currency:e}))},tier:Q.Ju.PRO,title:(0,T.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,w.Tj)(h.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,w.gS)(ey)}}))))))}function eg(e){return r.createElement(h.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:z.y4},r.createElement(ep,{...e}))}function eE({step:e,teamName:t,renewalTerm:a}){let s=r.createElement(S.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:V.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0},(0,T.tx)("checkout.learn_more_about_seats"));return r.createElement("div",{className:v.s.mb32.$,"data-testid":"cart-pro-header"},r.createElement("h2",{className:v.s.font15.lh24.fontMedium.$},function(e,t){switch(t=t||(0,T.t)("checkout.select_seats_header.your_team"),e){case ee.tn.CHOOSE_PLAN:return(0,T.tx)("checkout.select_seats_header",{teamName:t});case ee.tn.PAYMENT_AND_ADDRESS:return(0,T.tx)("checkout.enter_your_payment_details");case ee.tn.CONFIRM_PAY:return(0,T.tx)("checkout.everything_look_good");default:(0,l.wc)(e)}}(e,t)),e===ee.tn.CHOOSE_PLAN&&r.createElement("p",{className:v.s.colorTextSecondary.font13.mt8.$},(0,T.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:s})),e===ee.tn.CONFIRM_PAY&&r.createElement("p",{className:v.s.colorTextSecondary.font13.mt8.$},(0,T.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")),(0,k.UR)()&&r.createElement(I.W,{billingPeriod:(0,X.JV)(a)??void 0,isCampfireCart:!0}))}},390429:(e,t,a)=>{a.d(t,{W:()=>h});var r=a(848318),s=a(601451),l=a(157907),n=a(322035),i=a(95650),o=a(379338),m=a(416900),c=a(17755),d=a(442313),_=a(500276),u=a(155651),p=a(689678),g=a(661780),E=a(515673);function h(e){if(!(0,l.k)().campfire_cart_banner)return r.createElement(r.Fragment,null);let{isProCart:t,isCampfireCart:a}=e;return r.createElement("div",{style:_.sx.if(t,_.sx.add({marginTop:"-16px"}).mb32,_.sx.mt16).if(a,_.sx.mt16.add({marginBottom:"40px"}),_.sx.flex.justifyCenter.px16).$},r.createElement(f,{...e}))}function f({billingPeriod:e=E.tY.ANNUAL,isProCart:t,isReviewPage:a,isCampfireCart:l}){let h=(0,g.iZ)(),f=(0,p.If)(!0),S=(0,o.tl)().analyze_data_flow_v2_until,T=(0,m.cn)(h)&&t?f?.edu_info.replace(/\[BILLING_REMODEL_GA_DATE\]/g,i.A(S).format("MMMM D, YYYY")):f?.info.replace(/\[NEXT_RENEWAL_DATE\]/g,v(e)),N=(0,d.t)("checkout.banner.price_change",{date:v(e)});return r.createElement(u.fu,{name:"Campfire Cart Banner"},r.createElement("div",{className:c.s.flex.justifyBetween.itemsCenter.minH40.px8.flexGrow1.colorBgWarningTertiary.$,style:_.sx.add({borderRadius:"13px"}).if(a,_.sx.add({maxWidth:t?"693px":"758px"})).$,"data-testid":"campfire-cart-banner"},r.createElement("div",{className:c.s.flex.itemsCenter.$},r.createElement(s.b,null),r.createElement("p",{className:c.s.fontMedium.px4.$},l?N:T)),r.createElement(y,{onClick:()=>(0,n.FJ)("https://help.figma.com/hc/articles/27468498501527","_blank")},(0,d.tx)("campfire_banner.learn_more"))))}function v(e){let t=new Date;t.setFullYear(t.getFullYear()+1);let a=new Date;return a.setFullYear(2025),a.getDate()>=11?a.setMonth(2):a.setMonth(3),(0,i.A)(e===E.tY.ANNUAL?t:a).format("MMMM D, YYYY")}let y=(0,u.tf)(function({onClick:e,children:t}){return r.createElement("button",{className:"campfire_cart_banner--mockUI3Button--Aw9Vz",onClick:e},t)})},96836:(e,t,a)=>{a.d(t,{d:()=>v});var r=a(848318),s=a(716544),l=a(157907),n=a(44509),i=a(145015),o=a(473889),m=a(442313),c=a(997364),d=a(61485),_=a(802780),u=a(482606),p=a(943202),g=a(511231),E=a(515673),h=a(232420),f=a(16229);function v(e){let[t,a]=r.useState(!1),v=new g.vr(e.currency),[y,S]=r.useState(!1),T=(0,s.d4)(e=>e.payment),N=(0,s.d4)(e=>e.payment,(e,t)=>y||e===t),x=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",b=(0,_.Ik)(),w=T.displayName||x,C=T.legalName||x,A=T.billingPeriod===E.tY.STUDENT,I=!!(0,p.p)(e.selectedView,T),P=I||A,k=T.submitPending||!I&&!t,D=(0,d.sx)(),{estimatedDesignCost:M,estimatedWhiteboardCost:O}=(0,p.Q)({currency:e.currency}),R=T.numWhiteboardEditors,L=M(T.numDesignEditors,T.billingPeriod),B=O(R,T.billingPeriod),V=P?0:T.taxes?.total||L+B,U=new URLSearchParams(n.Ay.location.search),$=U.get("onCompleteRedirectFileKey"),F=U.get("onCompleteRedirectNodeId"),{trackingDescriptor:j,buttonText:G,finePrint:z}=(0,h.V8)({isPromo:I,isEducationTeam:A,claimsEndAtDate:T.promo?.claims_end_at}),H=async t=>{t.preventDefault(),await S(!0),e.onClickConfirm()},W=(0,l.k)().pro_team_business_names;return r.createElement("div",{className:W?f.HX:f.db},W&&r.createElement("div",{className:f.PT},r.createElement(u.x,{displayName:w??"",legalName:C??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})),r.createElement("div",{className:W?f.Bo:void 0},r.createElement("div",{className:f.TV,"data-testid":"review-step-upgrade-title"},(0,m.tx)(A?"edu.checkout_team_name":b?T.billingPeriod===E.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:x})),(!D||!P)&&r.createElement(h.$c,{payment:N,currency:e.currency,isPromo:I,isEducationTeam:A,hasCartStickerShock:b}),r.createElement("div",{className:f.pV}),r.createElement(i.Kz,{multiple:2}),N.taxes&&!!e.billingAddress&&r.createElement(r.Fragment,null,r.createElement(h.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:v.formatMoney(I?0:N.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),r.createElement(i.Kz,{multiple:1.5}),r.createElement(h.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:v.formatMoney(N.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:N.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),r.createElement(i.Kz,{multiple:1.5})),r.createElement(h.Wy,{"data-testid":"confirm-total-summary",mainText:A?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:v.formatMoney(V,{showCents:!0,showFullFormat:(0,g._Z)()}),subText:I?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:N.promo.promo_value}):void 0}),r.createElement(i.Kz,{multiple:2}),r.createElement("div",null,z,!I&&r.createElement("div",{className:f.Gn},r.createElement(c.S,{checked:t,onChange:e=>{a(e.currentTarget.checked)}}),r.createElement("p",null," ",r.createElement(h.Um,null)))),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.vd,{className:f.fK,onClick:H,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(F&&$),trackingDescriptor:j},disabled:k,dataTestId:"confirm-purchase-button"},T.submitPending?r.createElement(o.kt,{className:f.S}):G)))}},66557:(e,t,a)=>{a.d(t,{I:()=>d,y:()=>_});var r=a(848318),s=a(145015),l=a(282424),n=a(166365),i=a(442313),o=a(180423),m=a(16229);if(443==a.j)var c=a(100203);var d=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(d||{});function _({type:e,teamName:t,setTeamName:a,onNext:d,upgradeExistingTeam:_,promo:u}){let p={starter:{title:(0,i.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,i.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,i.tx)("all_carts.create_team.create_team"),trackingDescriptor:o.c.SEND_INVITES},pro:{title:(0,i.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,i.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:u?(0,i.tx)("pro_cart.sidebar.next_review"):(0,i.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:u?o.c.REVIEW:o.c.SET_EDITORS},org:{title:(0,i.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,i.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,i.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,i.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:o.c.SELECT_TEAM}}[e];return r.createElement(r.Fragment,null,r.createElement("div",{className:m.Fb},p.title),r.createElement(s.Kz,{multiple:.5}),r.createElement("div",{className:m.b0},p.subtitle),r.createElement("div",{className:m.F0},r.createElement(n.B,{svg:c.A,className:m.Pr}),r.createElement(l.L,{className:m.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})),r.createElement(s.vd,{className:m.eA,onClick:d,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim()},p.next),!!_&&r.createElement(s.Us,{className:m.x,onClick:_,trusted:!0,trackingProperties:{trackingDescriptor:o.c.UPGRADE_EXISTING_TEAM}},(0,i.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")))}},33994:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageV2:()=>eU});var r=a(848318),s=a(716544),l=a(992277),n=a(157907),i=a(994811),o=a(44509),m=a(379338),c=a(66387),d=a(502255),_=a(416900),u=a(470403),p=a(145015),g=a(482675),E=a(771186),h=a(280198),f=a(442313),v=a(478550),y=a(790355),S=a(110979),T=a(449737),N=a(194546),x=a(660785),b=a(405866),w=a(802780),C=a(155651),A=a(903579),I=a(943202),P=a(695453),k=a(296580),D=a(208649),M=a(841747),O=a(661780),R=a(541641),L=a(376780),B=a(511231),V=a(710665),U=a(581010),$=a(694253),F=a(834111),j=a(920963),G=a(515673),z=a(217084),H=a(556522),W=a(500276),Y=a(16229);function K({disableInvites:e,collaborators:t,setCollaborators:a,willSendInvites:s,skipInviteStep:l}){let n=(e,r)=>{if(r>=t.length)return;let s=[...t];s[r]=e,a(s)};return r.createElement(r.Fragment,null,r.createElement("div",{className:Y.Fb},(0,f.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),r.createElement(p.Kz,{multiple:.5}),r.createElement("div",{className:Y.b0},(0,f.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),r.createElement(p.Kz,{multiple:4}),r.createElement("div",{style:W.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>r.createElement(p.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>n(e.target.value,t),placeholder:(0,f.t)("pro_cart.add_collaborators.email")})),r.createElement(p.Us,{onClick:()=>{let e=[...t];e.push(""),a(e)},trusted:!0,style:W.sx.alignLeft.font14.fontMedium.$},(0,f.tx)("pro_cart.add_collaborators.add_another"))),r.createElement("div",{style:W.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},r.createElement(p.vd,{disabled:!!e,style:W.sx.font14.add({height:"44px",width:"110px"}).$,onClick:s},(0,f.tx)("pro_cart.add_collaborators.sent_invites")),r.createElement(p.Ph,{trusted:!0,onClick:l,style:W.sx.colorTextSecondary.alignCenter.$},(0,f.tx)("pro_cart.add_collaborators.skip_for_now"))))}var X=a(445777),J=a(551316),Z=a(773969),q=a(166365),Q=a(697714),ee=a(576220),et=a(912256),ea=a(871117),er=a(765982),es=a(503024),el=a(832876),en=a(954184);let ei="564px",eo=(0,J.s)((e,t)=>t(Q.F.enqueue({message:e})));function em(e){let t=(0,s.d4)(t=>{let a=e.selectedView.teamId?t.teamUserByTeamId[e.selectedView.teamId]||{}:null;return(0,V.BR)(a,t.user)}),a=(0,s.d4)(e=>e.payment),l=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId]:null),n=a.editorStatusChanges,i=(0,s.wA)(),o=a.billingPeriod===G.tY.STUDENT,{increment:m,decrement:c}=(0,U.$7)(),[d,_]=(0,r.useState)(!0),{getDesignUnitCost:u,getWhiteboardUnitCost:h}=(0,I.Q)({currency:e.currency}),v=new B.vr(e.currency),y=(0,r.useCallback)((e,t,a)=>{let r=[...n[t][e]];r.splice(a,1),i(N.Je({editorStatusChanges:{...n,[t]:{...n[t],[e]:r}}}))},[i,n]),S=(e,t,a)=>{switch(e){case L._Y.WHITEBOARD:switch(t){case"upgrade":return(0,f.t)("pro_cart.adjust_editors.will_become_figjam_editor.seat_rename",{email:a});case"downgrade":return(0,f.t)("pro_cart.adjust_editors.will_become_figjam_viewer",{email:a});default:(0,X.xb)(t)}case L._Y.DESIGN:case L._Y.SLIDES:case L._Y.COOPER:case L._Y.SITES:case L._Y.FIGMAKE:switch(t){case"upgrade":return(0,f.t)("pro_cart.adjust_editors.will_become_design_editor.seat_rename",{email:a});case"downgrade":return(0,f.t)("pro_cart.adjust_editors.will_become_design_viewer",{email:a});default:(0,X.xb)(t)}default:(0,X.xb)(e)}},x=(0,r.useCallback)((e,t)=>()=>{let a;if(_(!1),-1!==(a=n.upgrade[e].indexOf(t.id)))y(e,"upgrade",a),eo(S(e,"downgrade",t.email),i),c(e,t.email);else if(-1!==(a=n.downgrade[e].indexOf(t.id)))y(e,"downgrade",a),eo(S(e,"upgrade",t.email),i),m(e,t.email);else{let a=t["whiteboard"===e?"whiteboard_paid_status":"design_paid_status"]===er.Zf.FULL?"downgrade":"upgrade",r=[...n[a][e]];r.push(t.id),i(N.Je({editorStatusChanges:{...n,[a]:{...n[a],[e]:r}}})),eo(S(e,a,t.email),i),("upgrade"===a?m:c)(e,t.email)}},[i,n,c,m,y,_]),b=(0,V.Ky)(t,n,L._Y.DESIGN),w=(0,V.Ky)(t,n,L._Y.WHITEBOARD),C=a.numDesignEditors,A=Math.max(C,b),P=Math.max(w,a.numWhiteboardEditors);A!==C&&i(N.js({numDesignEditors:A})),P!==a.numWhiteboardEditors&&i(N.Az({numWhiteboardEditors:P}));let k=(0,V.O1)(C,b),D=(0,V.O1)(a.numWhiteboardEditors,w),M=()=>{i(T.to({type:et.Bx,data:{seatDataByLicenseType:{[ea.vu]:{minSeats:b,currentSeats:A,seatUnitCostInCents:u(a.billingPeriod)},[ea.tL]:{minSeats:w,currentSeats:P,seatUnitCostInCents:h(a.billingPeriod)}},showAnnualPrice:a.billingPeriod===G.tY.ANNUAL,updateAdditionalSeats:e=>{i(N.js({numDesignEditors:e[ea.vu]})),i(N.Az({numWhiteboardEditors:e[ea.tL]}))},dispatch:i,currency:e.currency,isProTeam:!0}}))},O=r.useCallback((e,t)=>e["whiteboard"===t?"whiteboard_paid_status":"design_paid_status"]===er.Zf.FULL&&!n.downgrade[t].includes(e.id)||n.upgrade[t].includes(e.id),[n.downgrade,n.upgrade]),R=t.reduce((e,t)=>(e[t.id]={design:O(t,L._Y.DESIGN),whiteboard:O(t,L._Y.WHITEBOARD),slides:O(t,L._Y.SLIDES),sites:O(t,L._Y.SITES),figmake:O(t,L._Y.FIGMAKE)},e),{}),$=!1,F=0;for(let e of t)if(R[e.id].whiteboard&&F++,R[e.id].design&&F++,$=1===F,F>1)break;let j=t[0];return(0,r.useEffect)(()=>{0===F&&!e.isLoading&&j?.id&&(i(N.Je({editorStatusChanges:{...n,upgrade:{design:[j.id,...n?.upgrade?.design??[]],whiteboard:[j.id,...n?.upgrade?.whiteboard??[]],slides:[j.id,...n?.upgrade?.slides??[]],sites:[j.id,...n?.upgrade?.sites??[]],cooper:[j.id,...n?.upgrade?.cooper??[]],figmake:[j.id,...n?.upgrade?.figmake??[]]}}})),m(L._Y.DESIGN,j.email),m(L._Y.WHITEBOARD,j.email))},[i,n,F,e.isLoading,j?.id,j?.email,m,P,O,j,d,c]),r.createElement(r.Fragment,null,r.createElement("div",{className:Y.Fb},(0,f.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename_dev_mode")),r.createElement(p.Kz,{multiple:.5}),r.createElement("div",{className:Y.b0,style:W.sx.add({width:ei,margin:"auto"}).$},(0,f.tx)("pro_cart.adjust_editors.subtitle")),r.createElement(p.Kz,{multiple:3}),e.error&&r.createElement("div",{style:W.sx.add({width:ei,margin:"auto"}).$},r.createElement(g._,{color:g.S.ERROR,text:e.error})),e.error&&r.createElement(p.Kz,{multiple:2}),r.createElement("div",{className:Y.sD},r.createElement("div",{className:Y.re},r.createElement(p.Kz,{multiple:2.5}),r.createElement("div",{className:Y.Ks},r.createElement("div",{className:`${Y.HY} ${Y.ab} ${Y.p7}`},r.createElement("div",{className:Y.Ps},l?r.createElement(el.rE,{key:l.id,entity:l,size:24}):r.createElement(el.rE,{key:e.teamName,entity:{name:e.teamName},size:24}))),r.createElement("div",{className:`${Y.HY} ${Y.E0}`,"data-testid":"design-column-header"},r.createElement("div",null,(0,f.tx)("pro_cart.adjust_editors.figma_design_column_title")),r.createElement(p.Kz,{multiple:.75}),r.createElement("div",{className:Y.EU},(0,f.tx)("pro_cart.design_billing_cost_per_month.seat_rename",{monthlyCostInDollars:v.formatMoney(u(a.billingPeriod))})),r.createElement(r.Fragment,null,r.createElement(p.Kz,{multiple:.75}),r.createElement(Z.G,null))),r.createElement("div",{className:`${Y.HY} ${Y.E0}`,"data-testid":"figjam-column-header"},r.createElement("div",null,(0,f.tx)("general.figjam")," "),r.createElement(p.Kz,{multiple:.75}),r.createElement("div",{className:Y.EU},(0,f.tx)("pro_cart.whiteboard_billing_cost_per_month.seat_rename",{monthlyCostInDollars:v.formatMoney(h(a.billingPeriod))})))),r.createElement(p.Kz,{multiple:2.5})),r.createElement("div",{className:Y.re},e.isLoading&&r.createElement(p.Kz,{multiple:1.5}),r.createElement(E.x,{isLoading:e.isLoading},()=>r.createElement(r.Fragment,null,t.map((e,a)=>{let s=a===t.length-1;return r.createElement("div",{key:e.id},r.createElement(p.Kz,{multiple:1.5}),r.createElement("div",{className:Y.Ks},r.createElement("div",{className:Y.ab},r.createElement(ee.H8,{user:e}),r.createElement("div",{className:Y.QB},r.createElement("div",{className:Y.ni},e.handle),r.createElement("div",{className:Y.W},e.email))),r.createElement("div",{className:Y.E0},r.createElement("span",{"data-tooltip-type":es.Ib.TEXT,"data-tooltip":R[e.id].design&&$?(0,f.t)("pro_cart.adjust_editors.at_least_one_editor.seat_rename"):(0,f.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(p.tB,{id:`toggle-design-editor-${e.id}`,checked:R[e.id].design,disabled:o||$&&R[e.id].design,onChange:x(L._Y.DESIGN,e),className:Y.kv}))),r.createElement("div",{className:Y.E0},r.createElement("span",{"data-tooltip-type":es.Ib.TEXT,"data-tooltip":R[e.id].whiteboard&&$?(0,f.t)("pro_cart.adjust_editors.to_uncheck_first_check_another"):(0,f.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(p.tB,{id:`toggle-whiteboard-editor-${e.id}`,checked:R[e.id].whiteboard,disabled:o||$&&R[e.id].whiteboard,onChange:x(L._Y.WHITEBOARD,e),className:Y.kv})))),r.createElement(p.Kz,{multiple:1.5}),!(o&&s)&&r.createElement("div",{className:Y.pV}))}),!o&&r.createElement(r.Fragment,null,r.createElement(p.Kz,{multiple:2.5}),r.createElement("div",{className:Y.Su},r.createElement("div",{className:Y.ab},r.createElement("div",{className:Y.uD,onClick:M},r.createElement(q.B,{className:Y.Hl,svg:en.A}),r.createElement("span",null,(0,f.tx)("pro_cart.adjust_editors.add_additional_editors.seat_rename")))),r.createElement("div",{className:`${Y.HY} ${Y.E0}`},r.createElement("div",null,(0,f.tx)("all_carts.num_editors.seat_rename",{numEditors:A})),r.createElement("div",{className:Y.EU},k>0&&(0,f.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:k}))),r.createElement("div",{className:`${Y.HY} ${Y.E0}`},(0,f.tx)("all_carts.num_editors.seat_rename",{numEditors:P}),r.createElement("div",{className:Y.EU},D>0&&(0,f.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:D})))),r.createElement(p.Kz,{multiple:2.5})))),e.isLoading&&r.createElement(p.Kz,{multiple:1.5}))))}var ec=a(390429),ed=a(256972);function e_({chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,currency:s,updateCurrency:l,upgradeExistingTeam:n,parentRef:i}){return r.createElement("div",{ref:i},r.createElement("div",{className:Y.Fb},(0,f.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team")),r.createElement("div",{className:Y.dX},r.createElement(ed.O,{currency:s,chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,updateCurrency:l,upsellSource:j.b.CREATE_NEW_PAID_TEAM,withUpgradeExistingTeamOption:n,parentRef:i})))}var eu=a(96836),ep=a(66557),eg=a(608321),eE=a(93151);function eh(e){let{error:t,errorCode:a}=(0,s.d4)(e=>e.payment),l=!!t&&null===a,n=!!e.error;return r.createElement(r.Fragment,null,r.createElement("div",{className:Y.Fb},(0,f.tx)("pro_cart.payment.enter_payment_details_title")),r.createElement(p.Kz,{multiple:3}),r.createElement("div",{style:W.sx.add({width:"416px",margin:"auto"}).$},l&&r.createElement("div",null,r.createElement(eg.I,{marginTop:0,message:t}),n&&r.createElement(p.Kz,{multiple:1.5})),l&&!n&&r.createElement(p.Kz,{multiple:2}),r.createElement("div",{className:Y.P_},r.createElement("div",{style:W.sx.if(e.error?.code===A.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,W.sx.font14.add({marginTop:"92px"})).$},r.createElement(eE.F,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})))))}var ef=a(124033),ev=a(536384),ey=a.n(ev),eS=a(453822),eT=a(963570),eN=a(473889),ex=a(17755),eb=a(180423),ew=a(481540),eC=a(52771),eA=a(164530),eI=a(366115),eP=a(450665),ek=a(232420);let eD=(0,s.Ng)(e=>({payment:e.payment,user:e.user}))(function(e){let t,a;let n=(0,s.wA)(),i=(0,w.Ik)(),o=e.payment.numDesignEditors,m=e.payment.billingPeriod===G.tY.STUDENT,{estimatedDesignCost:c,estimatedWhiteboardCost:u,getDesignUnitCost:g,getWhiteboardUnitCost:h}=(0,I.Q)({currency:e.currency}),v=new B.vr(e.currency);if(e.selectedView.paymentStep!==G.tn.CHOOSE_PLAN&&e.selectedView.paymentStep!==G.tn.PAYMENT_AND_ADDRESS)return null;let y=e=>{e===G.tY[G.tY.ANNUAL]?n(N.Lo({billingPeriod:G.tY.ANNUAL})):e===G.tY[G.tY.MONTHLY]&&n(N.Lo({billingPeriod:G.tY.MONTHLY})),n(N.js({numDesignEditors:o}))},S=(0,_.cn)(e.user),T=(0,f.t)("pro_cart.sidebar.next_payment_information"),x=eb.c.PAYMENT_INFORMATION;(m||e.selectedView.paymentStep===G.tn.PAYMENT_AND_ADDRESS)&&(T=(0,f.t)("pro_cart.sidebar.next_review"),x=eb.c.REVIEW);let b=(0,B._Z)(),C=c(o,e.payment.billingPeriod),A=12*c(o,G.tY.MONTHLY),P=g(e.payment.billingPeriod),k=g(G.tY.MONTHLY),D=u(e.payment.numWhiteboardEditors,e.payment.billingPeriod),M=12*u(e.payment.numWhiteboardEditors,G.tY.MONTHLY),O=h(e.payment.billingPeriod),R=h(G.tY.MONTHLY),V=i?r.createElement(eR,{price:P,localizeCurrency:v}):v.formatMoney(C),U=i?r.createElement(eR,{price:O,localizeCurrency:v}):v.formatMoney(D),$=A+M-c(o,G.tY.ANNUAL)-u(e.payment.numWhiteboardEditors,G.tY.ANNUAL);e.payment.billingPeriod===G.tY.ANNUAL?(C>0&&(t=v.formatMoney(A)),D>0&&(a=v.formatMoney(M)),i&&(t=v.formatMoney(k),a=v.formatMoney(R))):e.payment.billingPeriod===G.tY.STUDENT&&(t=i?v.formatMoney(k):r.createElement(ek.X6,{editorType:L._Y.DESIGN,numEditors:e.payment.numDesignEditors,currency:e.currency}),a=i?v.formatMoney(R):r.createElement(ek.X6,{editorType:L._Y.WHITEBOARD,numEditors:e.payment.numWhiteboardEditors,currency:e.currency}));let F=C+D,j=h(G.tY.ANNUAL),z=h(G.tY.MONTHLY),H=g(G.tY.ANNUAL),W=g(G.tY.MONTHLY),K=(0,ek.U1)(j,z),X=(0,ek.U1)(H,W);return F<0&&(0,d.$D)(l.e.BILLING,Error("[Billing] Estimated total is a negative amount."),{extra:{numDesignEditors:o,numWhiteboardEditors:e.payment.numWhiteboardEditors,upgrades:JSON.stringify(e.payment.editorStatusChanges),userId:e.user.id,subtotal:F,currency:e.currency}}),r.createElement("div",{className:Y.Ie},i?r.createElement(r.Fragment,null,r.createElement(eM,{teamId:e.selectedView.teamId}),b&&r.createElement(r.Fragment,null,r.createElement(p.Kz,{multiple:3}),r.createElement(eO,{currency:e.currency,supportedCurrencies:(0,B.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency,hasCartStickerShock:i})),r.createElement(p.Kz,{multiple:2}),r.createElement("div",{className:Y.pV}),r.createElement(p.Kz,{multiple:2})):r.createElement(r.Fragment,null,r.createElement("div",{className:Y.LC},(0,f.tx)("pro_cart.sidebar.professional_plan")),b&&r.createElement(r.Fragment,null,r.createElement(p.Kz,{multiple:3}),r.createElement(eO,{currency:e.currency,supportedCurrencies:(0,B.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency}),r.createElement(p.Kz,{multiple:2}),r.createElement("div",{className:Y.pV}),r.createElement(p.Kz,{multiple:2}))),S&&e.selectedView.paymentStep===G.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement("div",{className:Y.ZD},(0,f.tx)("pro_cart.sidebar.is_this_an_education_team")),r.createElement(p.Kz,{multiple:1.5}),r.createElement(eT.z,{className:Y.aq,onChange:e=>{"true"===e?n(N.Lo({billingPeriod:G.tY.STUDENT})):m&&(n(N.Lo({billingPeriod:G.tY.ANNUAL})),n(N.js({numDesignEditors:o})))},value:m.toString()},r.createElement(eT.Z,{value:"false",className:Y.Ac},(0,f.tx)("pro_cart.sidebar.no")),r.createElement(eT.Z,{value:"true",className:Y.Ac},(0,f.tx)("pro_cart.sidebar.yes"))),r.createElement(p.Kz,{multiple:1.5}),r.createElement("div",{className:Y.pV}),r.createElement(p.Kz,{multiple:2})),!i&&r.createElement(r.Fragment,null,r.createElement(eB,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:y,discountAmount:K}),r.createElement(p.Kz,{multiple:2})),r.createElement(E.x,{isLoading:e.isLoading,className:Y.F},()=>r.createElement(r.Fragment,null,r.createElement(ek.Wy,{"data-testid":"sidebar-design-summary",mainText:i?r.createElement("span",{className:ex.s.fontMedium.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.design")):(0,f.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:o}),strikethroughPriceText:t,strikethroughPriceClassName:i?ex.s.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:V,subText:i?void 0:r.createElement(ek.d6,{currentBillingPeriod:e.payment.billingPeriod,numEditors:o,currency:e.currency,noCents:!0,shouldStrikethroughMonthlyUnitCostIfAnnual:!0}),discountPercentage:i?void 0:C>0&&e.payment.billingPeriod===G.tY.ANNUAL?X:void 0,showDevModeIncludedText:!0}),r.createElement(p.Kz,{multiple:2}),r.createElement(ek.Wy,{"data-testid":"sidebar-whiteboard-summary",mainText:i?r.createElement("div",{className:ex.s.fontMedium.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.figjam")):(0,f.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:e.payment.numWhiteboardEditors}),strikethroughPriceText:a,strikethroughPriceClassName:i?ex.s.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:U,subText:i?void 0:r.createElement(ek.ME,{shouldStrikethroughMonthlyUnitCostIfAnnual:!0,currency:e.currency}),discountPercentage:i?void 0:D>0&&e.payment.billingPeriod===G.tY.ANNUAL?K:void 0}),r.createElement(p.Kz,{multiple:2}),i&&!m&&r.createElement(r.Fragment,null,r.createElement(eL,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:y,localizeCurrency:v,savingsWithAnnualPlan:$}),r.createElement(p.Kz,{multiple:2})))),r.createElement("div",{className:Y.pV}),r.createElement(p.Kz,{multiple:3}),i?r.createElement(eC.i,{numberOfDesignEditors:o,designSubtotal:v.formatMoney(C),numberOfFigjamEditors:e.payment.numWhiteboardEditors,figjamSubtotal:v.formatMoney(D),formattedSubtotal:v.formatMoney(F,{showFullFormat:(0,B._Z)()}),billingPeriod:e.payment.billingPeriod}):r.createElement(eC.m,{formattedSubtotal:v.formatMoney(F,{showFullFormat:(0,B._Z)()})}),r.createElement(p.Kz,{multiple:3}),m&&r.createElement(r.Fragment,null,r.createElement("div",{className:Y.iY},(0,f.tx)("edu.education_teams_get_all_the_professional_plan_features_for_free")),r.createElement(p.Kz,{multiple:2})),r.createElement(p.vd,{className:Y.fK,disabled:e.isLoading||e.isButtonDisabled||e.payment.submitPending,onClick:e.onNext,trackingProperties:{trackingDescriptor:x},dataTestId:"upgrade-next-button"},e.payment.submitPending?r.createElement(eN.kt,{className:Y.S}):T))});function eM({teamId:e}){let t=(0,s.wA)();return r.createElement(r.Fragment,null,r.createElement("div",{className:ex.s.font20.fontMedium.$},(0,f.tx)("pro_cart.sidebar.professional_plan")),r.createElement(p.Kz,{multiple:1}),r.createElement("p",{className:ex.s.font13.fontNormal.lh24.maxW250.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.unlimited_files_and_projects",{learnMoreLink:r.createElement(p.Us,{className:ex.s.colorTextBrand.cursorPointer.$,onClick:()=>{t(T.to({type:eI.q,data:{teamId:e??void 0,trackingProperties:{productArea:"upgrade_sidebar"},hasSecondaryBtn:!1}}))},trusted:!0},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.so_much_more"))})))}function eO({currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,hasCartStickerShock:l}){let n=ex.s.flex.justifyBetween.itemsCenter.font13.$,i=l?ex.s.fontMedium.$:ex.s.fontSemiBold.$;return r.createElement("div",{className:l?n:Y.h7},r.createElement("span",{className:i},(0,f.tx)("pro_cart.sidebar.currency")),r.createElement(eP.D,{currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,shortFormDisplay:!0}))}function eR({price:e,localizeCurrency:t}){let a=ex.s.font18.fpl__textHeadingLargeLetterSpacing.fontMedium.$;return r.createElement("span",null,(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.cost_per_editor_per_month",{cost:r.createElement("span",{className:a},t.formatMoney(e))}))}function eL({billingPeriod:e,onBillingCycleChange:t,localizeCurrency:a,savingsWithAnnualPlan:s}){let l=ex.s.flex.alignCenter.$,n=ex.s.colorTextSuccess.font13.$,i=ex.s.colorText.font13.pl8.$;return r.createElement("div",{className:l},r.createElement(eA.l,{dataTestId:"billing-period-toggle",on:e===G.tY.ANNUAL,onChange:()=>{t(e===G.tY.ANNUAL?G.tY[G.tY.MONTHLY]:G.tY[G.tY.ANNUAL]),(0,ew.Cu)({name:"Upgrade sidebar billing period toggle"})}}),r.createElement("span",{className:i},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.by_paying_annually",{saveAmountText:r.createElement("span",{className:n},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.save_amount_per_year",{saveAmount:a.formatMoney(s)}))})))}function eB({billingPeriod:e,onBillingCycleChange:t,discountAmount:a}){return e!==G.tY.STUDENT?r.createElement(r.Fragment,null,r.createElement("div",{className:Y.ZD},(0,f.tx)("pro_cart.sidebar.billing_cycle")),r.createElement(p.Kz,{multiple:2}),r.createElement(eT.z,{className:Y.aq,onChange:t,value:G.tY[e]},r.createElement(eT.Z,{value:G.tY[G.tY.ANNUAL],className:Y.Ac},r.createElement("div",{className:ey()(Y.Wu,Y.Yw)},r.createElement("span",null,(0,f.tx)("pro_cart.sidebar.annual")),r.createElement(eS.Ex,{className:Y.qS,color:eS.zE.SUCCESS,size:eS.vj.LARGE,subtle:!0,text:(0,f.tx)("pro_cart.sidebar.save_up_to_discount",{discountAmount:a})}))),r.createElement(eT.Z,{value:G.tY[G.tY.MONTHLY],className:Y.Ac},r.createElement("div",{className:ex.s.flex.justifyEnd.$},(0,f.tx)("pro_cart.sidebar.monthly")))),r.createElement(p.Kz,{multiple:2}),r.createElement("div",{className:Y.pV})):null}function eV(e){let t;let a=(0,O.iZ)(),u=a?.id,D=(0,m.DC)(),W=(0,s.d4)(e=>e.payment),X=(0,s.d4)(e=>e.dropdownShown),J=(0,s.d4)(e=>e.teams),Z=e.selectedView.paymentStep,q=r.useRef(null),[Q,ee]=(0,r.useState)(D?.team_name??""),[et,ea]=(0,r.useState)(P.kt),er=(0,V.PS)((0,M.FC)()),es=!!(0,n.k)().redirect_starter_team_loophole&&!(0,n.k)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==z.SC.UPGRADE_EXISTING_TEAM),[el,en]=(0,r.useState)(D?.currency||W.currency||(0,B.LN)()),ei=e=>{en(e),eW(N.MN({currency:e}))},eo=es?G.tY.ANNUAL:W.billingPeriod,{numDesignEditors:ed,numWhiteboardEditors:eg,editorStatusChanges:eE}=W,{ignoreCurrentPlan:ev}=e.selectedView,ey=e.selectedView.teamId;(0,r.useEffect)(()=>{es&&(o.Ay.redirect("/"),(0,d.$D)(l.e.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,es]);let eS=(0,s.d4)(t=>(0,F.Np)(t,{...e.selectedView,paymentStep:G.tn.CONFIRM_PAY})),eT=(0,s.d4)(t=>(0,F.Np)(t,{...e.selectedView,paymentStep:G.tn.PAYMENT_AND_ADDRESS})),eN=(0,w.Mh)(),{estimatedDesignCost:ex,estimatedWhiteboardCost:eb}=(0,I.Q)({currency:el}),ew=ex(ed,eo)+eb(eg,eo),{createPaymentElement:eC,unmountPaymentElement:eA,savePayment:eI,billingAddress:eP,updateBillingAddress:ek,shippingAddress:eM,updateShippingAddress:eO,customerLegalName:eR,setCustomerLegalName:eL,nameOnPaymentMethod:eB,setNameOnPaymentMethod:eV,vatGstId:eU,setVatGstId:e$,regionalVatGstId:eF,setRegionalVatGstId:ej,paymentMethodType:eG,error:ez}=(0,A.Op)({setupIntentParams:{redirect_url:eS,error_redirect_url:eT,subtotal_estimate:ew,currency:el},customerInfo:{teamId:ey},paymentFlowSource:A.wn.PRO_UPGRADE,currency:el,billingPeriod:eo,defaultCountry:(0,B.ub)(),initialBillingAddress:D?.billing_address,initialNameOnPaymentMethod:D?.name_on_payment_method,initialShippingAddress:D?.shipping_address,initialCustomerLegalName:D?.customer_legal_name,initialVatGstId:D?.vat_gst_id,initialRegionalVatGstId:D?.regional_vat_gst_id,teamName:D?.team_name||Q,canSeeBillingAddressExp:eN,isCheckout:!0}),eH=ez?.code===A.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,eW=(0,s.wA)(),eY=(0,U.Ud)({teamId:ey,canSeeBillingAddressExp:eN}),eK=()=>{eW(y.$T({...e.selectedView,paymentStep:G.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ev}))};(0,P.pI)({loadingPaidEditors:eY,teamId:ey,teamName:ey?void 0:Q,setTeamName:ey?void 0:ee,collaborators:ey||e.selectedView.teamFlowType!==z.SC.CREATE?void 0:et,setCollaborators:ey||e.selectedView.teamFlowType!==z.SC.CREATE?void 0:ea});let eX=(0,s.d4)(e=>e.currentUserOrgId),eJ=ev?null:eX,eZ=(0,s.d4)(e=>eJ?e.orgById[eJ]:null),eq=(0,H.Q)({currentOrgId:eJ,currentTeamId:null}),eQ=eq.data?.currentUser?.baseOrgUser?.workspaceUsers,e0=eQ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e1}=(0,R.LM)(eZ,e0??null),e5=(0,s.d4)(e=>(0,$.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{Z===G.tn.PAYMENT_AND_ADDRESS&&eH&&eK()});let e7=(0,s.d4)(e=>!!e.user&&(0,_.cn)(e.user));(0,r.useEffect)(()=>{e7&&e.selectedView.isEduTeam?eW(N.Lo({billingPeriod:G.tY.STUDENT})):e.selectedView.isEduTeam&&eW(N.Lo({billingPeriod:G.tY.UNSPECIFIED}))},[eW,e.selectedView.isEduTeam,e7]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===z.SC.CREATE_AND_UPGRADE&&(e5||e1===R.z4.TEAM_CREATION_CONTROL)&&(o.Ay.redirect("/"),eW(h.s.error((0,f.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e5,e1,eW]);let e4=W.currencyToSwitch;(0,r.useEffect)(()=>{e4&&en(e4)},[en,e4]);let e3=eo===G.tY.STUDENT,e2=et.filter(e=>e&&e.trim()).map(e=>e.trim()),e6=e2.filter(e=>!(0,i.xf)(e)),e9=!!a&&e2.filter(e=>e===a.email).length>0,e8=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let l=(0,ef.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eo,W.promo,e.selectedView.planType||z.Sc.UNDETERMINED);Z===G.tn.CREATE_TEAM&&(ee(Q.trim()),eW(y.$T({...e.selectedView,teamId:null,paymentStep:l,ignoreCurrentPlan:ev}))),Z===G.tn.ADD_COLLABORATORS&&(e6.length?eW(h.s.error((0,f.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e6[0]}))):e9?eW(h.s.error((0,f.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):eW(y.$T({...e.selectedView,paymentStep:l,ignoreCurrentPlan:ev}))),Z===G.tn.CHOOSE_PLAN?e3?eW(y.$T({...e.selectedView,paymentStep:l,billingPeriod:G.tY.STUDENT,ignoreCurrentPlan:ev})):(eW(N.Je({editorStatusChanges:eE})),eW(y.$T({...e.selectedView,paymentStep:l,billingPeriod:W.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:s}}:{},ignoreCurrentPlan:ev}))):Z===G.tn.PAYMENT_AND_ADDRESS&&(eW(N.I2({submitPending:!0})),await eI(),eW(N.I2({submitPending:!1})))},te=e.selectedView.teamFlowType===z.SC.CREATE?()=>{eW((0,k.KQ)({teamName:Q,orgAccess:L.bU.PUBLIC,inviteEmails:e2,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,P.Al)(a?.id)},ignoreCurrentPlan:ev}))}:void 0;(e.selectedView.teamFlowType===z.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===z.SC.UPGRADE_EXISTING_TEAM)&&(1===er.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=z.SC.UPGRADE_EXISTING_TEAM;eW(y.$T({...e.selectedView,teamFlowType:a,teamId:er[0].id,paymentStep:(0,ef.kR)(e.selectedView.paymentStep,a,t||null,W.promo,z.Sc.TEAM,G.tn.CHOOSE_PLAN),planType:z.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ev}))}:er.length>1&&(t=e=>{e&&eW(N.Lo({billingPeriod:e})),eW((0,T.to)({type:v.dR,data:{plan:v.In.PRO,upsellSource:j.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let tt=()=>{let t=()=>{(0,m.sj)(),(0,U.Mt)(eW),(0,z.h5)(e.selectedView.teamFlowType)&&null===ey&&(0,P.Al)(u)};if(e.selectedView.teamId&&e3)eW(N.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&W.promo){let a=e.selectedView.teamId;eW(x.S_({teamId:a,teamName:J[a].name,promoCode:W.promo?.code||"",onSuccess:()=>{t(),(0,c._H)(),eW(N.Ay({promo:null})),u?e.selectedView.previousView?y.$T(e.selectedView.previousView):S._l({workspace:{userId:u,orgId:null,teamId:a},view:{view:"allProjects"}}):eW(y.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,c._H)(),eW(N.Ay({promo:null})),eW(y.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}))}else{eW(b.b({completed_pro_cart_flow:!0}));let a=W.taxes?.sub_total??0,r=W.taxes?.tax_total??0,s=W.taxes?.total??0;eW(N.I2({submitPending:!0})),eW((0,x.gk)({teamId:e.selectedView.teamId,selectedCurrency:el,teamName:Q,teamFlowType:e.selectedView.teamFlowType,invites:e2,hasSelectedStudentTeam:e3,onSuccess:t,displayedCostBreakdown:{subtotal:a,tax_total:r,total:s}}))}},ta=new URLSearchParams(o.Ay.location.search),tr=ta.get("onCompleteRedirectFileKey"),ts=ta.get("onCompleteRedirectNodeId"),tl=a&&P.lX({teamId:ey,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===z.SC.CREATE_AND_UPGRADE&&(e5||e1===R.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(C.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:Z,currency:el,inPublishDraftExp:!!(tr&&ts)}},r.createElement("div",{className:Y.im,"data-testid":"team-upgrade-v2"},r.createElement(ef.vU,{selectedView:e.selectedView}),r.createElement("div",{className:Y.Jr},r.createElement("div",{className:Y.uz,ref:q},r.createElement(p.Kz,{multiple:4}),Z===G.tn.PLAN_COMPARISON&&r.createElement(e_,{chooseStarterPlan:te,chooseProPlan:t=>{eW(N.Lo({billingPeriod:t}));let a=(0,z.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:z.SC.CREATE_AND_UPGRADE;eW(y.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,ef.kR)(e.selectedView.paymentStep,a,t,W.promo,z.Sc.TEAM),billingPeriod:t,planType:z.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ev}))},chooseOrgPlan:()=>{eW(N.Bq({currency:el,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:Q,inviteEmails:e2,previousView:e.selectedView},upsellSource:j.b.UPGRADE_NEW_TEAM_V2}))},currency:el,updateCurrency:e=>ei(e),upgradeExistingTeam:t,parentRef:q}),Z===G.tn.CREATE_TEAM&&r.createElement(ep.y,{type:e.selectedView.teamFlowType===z.SC.CREATE?ep.I.STARTER:ep.I.PRO,teamName:Q,setTeamName:ee,onNext:e8,upgradeExistingTeam:t?()=>t?.(eo):void 0,promo:W.promo}),Z===G.tn.ADD_COLLABORATORS&&r.createElement(K,{disableInvites:!e2.length,collaborators:et,setCollaborators:ea,willSendInvites:e8,skipInviteStep:()=>{if(ea(P.kt),u){let e=(0,P.lX)({teamId:null,userId:u});e&&(0,P.dT)(u,{...e,newCollaborators:P.kt})}eW(y.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}),Z===G.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement(ec.W,{billingPeriod:eo,isProCart:!0}),r.createElement(em,{selectedView:e.selectedView,isLoading:eY,currency:el,error:eH?ez?.message:null,teamName:Q})),Z===G.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(ec.W,{billingPeriod:eo,isProCart:!0}),r.createElement(eh,{billingAddress:eP,canSeeBillingAddressExp:eN,createPaymentElement:eC,error:ez,legalCompanyName:eR,nameOnPaymentMethod:eB,onRegionalVatGstIdChange:ej,onVatGstIdChange:e$,paymentFlow:A.wn.PRO_UPGRADE,paymentMethodType:eG,regionalVatGstId:eF,shippingAddress:eM,unmountPaymentElement:eA,updateBillingAddress:ek,updateLegalCompanyName:eL,updateNameOnPaymentMethod:eV,updateShippingAddress:eO,vatGstId:eU})),Z===G.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement(ec.W,{billingPeriod:eo,isProCart:!0,isReviewPage:!0}),r.createElement("div",{className:Y.Fb},(0,f.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(p.Kz,{multiple:3}),tl&&r.createElement("div",{className:Y.vK},r.createElement(g._,{color:g.S.INFORMATION,text:(0,f.t)("pro_cart.review.extra_validation")})),tl&&r.createElement(p.Kz,{multiple:2}),r.createElement(E.x,{isLoading:eY},()=>r.createElement(eu.d,{selectedView:e.selectedView,teamName:Q,onClickConfirm:tt,billingAddress:eP,shippingAddress:eM,canSeeBillingAddressExp:eN,currency:el}))),r.createElement(p.Kz,{multiple:9})),r.createElement(eD,{selectedView:e.selectedView,onNext:e8,isLoading:eY,isButtonDisabled:eH,currency:el,updateCurrency:e=>ei(e),dropdownShown:X}))))}function eU(e){return r.createElement(u.tH,{team:l.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeV2",fallback:u.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:D.y4},r.createElement(eV,{...e}))}},124033:(e,t,a)=>{a.d(t,{kR:()=>x,vU:()=>b});var r=a(848318),s=a(716544),l=a(445777),n=a(224223),i=a(379338),o=a(20701),m=a(442313),c=a(790355),d=a(110979),_=a(180423),u=a(155651),p=a(695453),g=a(661780),E=a(581010),h=a(993421),f=a(515673),v=a(217084),y=a(16229);function S(e){return r.createElement(u.$z,{type:"button",className:y.Nd,trackingProperties:{trackingDescriptor:_.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel"},(0,m.tx)("pro_cart.breadcrumbs.cancel"))}var T=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(T||{});function N(e,t,a,r){let s=t===f.tY.STUDENT,n=[];switch(e){case v.SC.CREATE_AND_UPGRADE:n.push(0),n.push(1),s?n.push(4):a||(n.push(4),n.push(5)),n.push(6);break;case v.SC.UPGRADE_EXISTING_TEAM:r===v.Sc.TEAM?(n.push(3),s||n.push(5)):s?(n.push(0),n.push(3)):a?n.push(0):(n.push(0),n.push(4),n.push(5)),n.push(6);break;case v.SC.CREATE:n.push(1),n.push(2),n.push(0),r===v.Sc.TEAM&&(s?n.push(4):a||(n.push(4),n.push(5)),n.push(6));break;default:(0,l.xb)(e)}return n.map(e=>(function(e){switch(e){case 0:return{step:f.tn.PLAN_COMPARISON,text:(0,m.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:f.tn.CREATE_TEAM,text:(0,m.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:f.tn.ADD_COLLABORATORS,text:(0,m.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:f.tn.CHOOSE_PLAN,text:(0,m.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:f.tn.CHOOSE_PLAN,text:(0,m.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:f.tn.PAYMENT_AND_ADDRESS,text:(0,m.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:f.tn.CONFIRM_PAY,text:(0,m.t)("pro_cart.breadcrumbs.review")}}})(e))}function x(e,t,a,r,s,l){let n=N(t,a,r,s).map(e=>e.step),i=n.indexOf(e);return l=l||n[0],-1===i?l:n[i+1]}function b(e){let{selectedView:t}=e,{teamId:a,paymentStep:l,teamFlowType:m}=t,_=(0,s.wA)(),u=(0,s.d4)(e=>e.payment.billingPeriod),T=g.iZ()?.id,x=N(m,u,(0,s.d4)(e=>e.payment.promo),e.selectedView.planType||v.Sc.UNDETERMINED),b=x.findIndex(e=>e.step===l);return r.createElement("div",{className:y.N6,"data-testid":"cart-breadcrumb-menu-pro"},r.createElement(S,{onClick:()=>{((0,i.sj)(),e.isCampfireCart?(0,E.OI)(_):(0,E.Mt)(_),(0,v.h5)(m)&&null===a&&(0,p.Al)(T),T)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?_(d._l({workspace:{userId:T,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):_(c.$T(t.previousView||{view:"recentsAndSharing"})):_(c.$T(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),x.map((s,i)=>r.createElement(o.On,{key:s.text,selected:l===s.step,number:i+1,text:s.text,canClick:i<b,lightText:!0,onClick:()=>{n.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:l,toStep:s.step,tier:h.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),_(c.$T({...t,paymentStep:s.step,billingPeriod:u===f.tY.UNSPECIFIED?void 0:u,planType:(0,v.ck)(m,s.step)?v.Sc.UNDETERMINED:t.planType,teamFlowType:(0,v.jX)(m)&&s.step===f.tn.PLAN_COMPARISON?v.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}})))}},482606:(e,t,a)=>{a.d(t,{x:()=>_});var r=a(848318),s=a(716544),l=a(145015),n=a(17755),i=a(442313),o=a(790355),m=a(449737),c=a(439564),d=a(515673);function _(e){return"org"===e.variant?r.createElement(u,{...e}):r.createElement(p,{...e})}function u(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,d.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),r.createElement(E,{header:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),r.createElement(E,{header:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&r.createElement(l.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0},(0,i.tx)("org_self_serve.review_step.edit_organization")),t&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.billing_address"),value:h(e.billingAddress)}),a&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.shipping_address"),value:h(e.shippingAddress)}),e.canSeeBillingAddressExp&&r.createElement(l.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0},(0,i.tx)("org_self_serve.review_step.edit_payment")))}function p(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),n=e.canSeeBillingAddressExp&&e.billingAddress,_=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,d.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,i.tx)("pro_cart.review.details")}),r.createElement(E,{header:(0,i.tx)("pro_cart.review.team_name"),value:e.displayName}),r.createElement(E,{header:(0,i.tx)("pro_cart.review.company_name"),value:e.legalName}),n&&r.createElement(E,{header:(0,i.tx)("pro_cart.review.billing_address"),value:h(e.billingAddress)}),_&&r.createElement(E,{header:(0,i.tx)("pro_cart.review.shipping_address"),value:h(e.shippingAddress)}),r.createElement(l.Ph,{onClick:e.canSeeBillingAddressExp?()=>{t(o.$T({...a,paymentStep:d.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,m.to)({type:c.L,data:{modalTitle:(0,i.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",trusted:!0},(0,i.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")))}function g({subtitle:e}){return r.createElement("div",{className:n.s.font15.fontMedium.lh24.colorText.$},e)}function E({header:e,value:t}){return r.createElement("div",{className:n.s.flex.flexColumn.mt16.$},r.createElement("p",{className:n.s.font11.lh16.spacingWide.colorText.$},e),r.createElement("p",{className:n.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$},t))}function h(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}},52771:(e,t,a)=>{a.d(t,{i:()=>c,m:()=>m});var r=a(848318),s=a(145015),l=a(442313),n=a(895104),i=a(775038),o=a(515673);function m(e){let t=r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,l.tx)("checkout.review_in_tax_disclaimer"));return r.createElement(r.Fragment,null,r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.info.subtotal")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:e.formattedSubtotal}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,l.tx)("checkout.tax_disclaimer_revised",{checkoutStep:t})))}function c({numberOfDesignEditors:e,designSubtotal:t,numberOfFigjamEditors:a,figjamSubtotal:m,formattedSubtotal:c,billingPeriod:d}){let _=r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,l.tx)("checkout.review_in_tax_disclaimer"));return r.createElement(r.Fragment,null,r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-design-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.sidebar.exp_sticker_shock.design_editors",{numEditors:e})),r.createElement("span",{"data-testid":"sidebar-design-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:t}))),r.createElement(s.Kz,{multiple:2}),r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-whiteboard-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.sidebar.exp_sticker_shock.figjam_editors",{numEditors:a})),r.createElement("span",{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:m}))),r.createElement(s.Kz,{multiple:2}),r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"medium",fontSize:13},(0,l.tx)(d===o.tY.ANNUAL?"pro_cart.sidebar.exp_sticker_shock.subtotal_per_year":"pro_cart.sidebar.exp_sticker_shock.subtotal_per_month")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"medium",fontSize:13,children:c}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,l.tx)("checkout.tax_disclaimer_revised",{checkoutStep:_})))}},439564:(e,t,a)=>{a.d(t,{L:()=>S});var r=a(848318),s=a(716544),l=a(536384),n=a.n(l),i=a(374950),o=a(145015),m=a(17755),c=a(280198),d=a(278451),_=a(442313),u=a(719398),p=a(449737),g=a(194546),E=a(142899),h=a(464012),f=a(314272),v=a(289198);let y=r.memo(function(e){let t=(0,s.wA)(),{displayName:a,legalName:l}=e,[h,y]=r.useState(a||""),[S,T]=r.useState(l||""),{isLoading:N,withLoading:x}=(0,d.R)(),b=()=>{t(p.Ce())},w=async a=>{a.preventDefault(),await x(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,i.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:h}}},E.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:h})):await (0,i.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:h}}},E.$.updateTeamName({teamId:e.team.id,updatedDisplayName:h,updatedLegalName:S}))}catch(r){let a=e.canSeeBillingAddressExp?(0,_.t)("update_company_details_modal.update_display_name.error"):(0,_.t)("update_company_details_modal.update_team_name.error");throw t(c.s.error((0,u.J)(r)||a)),r}else t(g.yy({legalName:S,displayName:h}));b()})};return r.createElement(f.XV,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0},r.createElement("form",{onSubmit:w,className:m.s.p16.$},r.createElement("div",{className:m.s.mt4.$},r.createElement("label",{htmlFor:"teamName",className:m.s.colorTextSecondary.$},r.createElement("strong",{className:m.s.block.colorText.$},(0,_.tx)("pro_cart.review.edit_details.team_name_label")),(0,_.tx)("pro_cart.review.edit_details.team_name_description")),r.createElement(o.ks,{value:h,id:"teamName",onChange:e=>{y(e.target.value)},dataTestId:"company-team-name",className:m.s.block.mt8.wFull.$})),!e.canSeeBillingAddressExp&&r.createElement("div",{className:m.s.mt20.$},r.createElement("label",{htmlFor:"legalName",className:m.s.colorTextSecondary.$},r.createElement("strong",{className:m.s.block.colorText.$},(0,_.tx)("pro_cart.review.edit_details.company_name_label")),(0,_.tx)("pro_cart.review.edit_details.company_name_description")),r.createElement(o.ks,{value:S,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:m.s.block.mt8.wFull.$})),r.createElement("div",{className:n()(v.v0,v.hF)},r.createElement(o.tM,{onClick:b,disabled:N},(0,_.tx)("pro_cart.review.edit_details.cancel")),r.createElement(o.vd,{className:v.pL,disabled:N,type:"submit"},(0,_.tx)("pro_cart.review.edit_details.save")))))}),S=(0,h.Ju)(y,"UpdateCompanyDetailsModal")},689678:(e,t,a)=>{a.d(t,{If:()=>m,sl:()=>o});var r=a(157907),s=a(997894),l=a(801230);let n=s.M4.Query({fetch:async()=>(await l.Cn.maintenancePoc1()).data.meta});function i(e){let[t]=(0,s.IT)(n(null),{enabled:(0,r.k)().campfire_i18n_verbiage&&e});return t}function o(e){let{data:t,status:a}=i(e);if("loaded"===a)return t?.strings.team_admin_billing_cost_banner?.banner_description}function m(e){let{data:t,status:a}=i(e);if("loaded"===a&&t?.strings.cart_banner)return{info:t.strings.cart_banner.cart_banner_info,edu_info:t.strings.cart_banner.cart_banner_edu_info}}},581010:(e,t,a)=>{a.d(t,{$7:()=>C,Mt:()=>k,OI:()=>P,Ud:()=>A});var r=a(848318),s=a(716544),l=a(992277),n=a(224223),i=a(994811),o=a(397579),m=a(379338),c=a(502255),d=a(757033),_=a(280198),u=a(442313),p=a(61485),g=a(790355),E=a(341550),h=a(194546),f=a(614337),v=a(595919),y=a(376780),S=a(515673),T=a(53818),N=a(695453),x=a(661780),b=a(928001),w=a(710665);function C(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.payment);function a(a){e(h.Az({numWhiteboardEditors:t.numWhiteboardEditors+a}))}function r(a){e(h.js({numDesignEditors:t.numDesignEditors+a}))}return{increment:function(e,t){(0,i.nD)(t)||("whiteboard"===e?a(1):r(1))},decrement:function(e,t){(0,i.nD)(t)||("whiteboard"===e?a(-1):r(-1))}}}let A=(0,T.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,s.wA)(),E=(0,s.d4)(e=>e.loadingState),v=(0,s.d4)(t=>e?t.teamUserByTeamId[e]:null),T=(0,s.d4)(e=>e.selectedView),C=(0,x.iZ)(),[A,P]=(0,r.useState)(!0),D=(0,o.ZC)(e),M=(0,p.sx)(),O=f.Xw.loadingKeyForPayload({teamId:e}),R=(0,b.GH)(E,O),L=(0,m.DC)();(0,r.useEffect)(()=>{a(f.Xw({teamId:e}))},[a,e]);let B=function(){let e=(0,s.wA)();return(0,r.useCallback)(t=>{(0,n.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(h.eK(t))},[e])}();return(0,r.useEffect)(()=>{async function r(t){try{let r=await d.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(h.i({taxes:r.data.meta.estimate}))}catch(e){a(_.s.error((0,u.t)("payments.errors.estimate_calculation_error"))),a(g.$T({...T,paymentStep:S.tn.PAYMENT_AND_ADDRESS}))}P(!1)}if(void 0===D||D===e||A||(k(a),P(!0)),(!e||R)&&A){let o=(0,w.BR)(v,C),m=Object.entries(o).map(([e,t])=>{if((0,i.nD)(t.email||""))return e}).filter(e=>!!e);a(h.M2({figmaEmailTeamUsers:m}));let d=(0,N.lX)({teamId:e,userId:C?.id});if(d){d.editorStatusChanges=(0,N.nt)(d.editorStatusChanges,o);let i=(0,w.Ky)(o,d.editorStatusChanges,y._Y.DESIGN),_=(0,w.Ky)(o,d.editorStatusChanges,y._Y.WHITEBOARD),u=i+d.numEmptyDesignSeats,p=_+d.numEmptyWhiteboardSeats;if(B({numDesignEditors:u,numWhiteboardEditors:p,editorStatusChanges:d.editorStatusChanges,teamId:e,updatedAt:d.updatedAt,cartSelections:d.cartSelections}),L){var s;let e=(s=L.billing_period,S.tY[S.tY[s]]),l=t?{billing_address:L.billing_address,shipping_address:L.shipping_address||L.billing_address}:null;a(h.Lo({billingPeriod:e})),a(h.$h({vatGstId:L.vat_gst_id})),a(h.yy({legalName:L.customer_legal_name||L.company_name,displayName:L.display_name})),a(h.Ef({regionalVatGstId:L.regional_vat_gst_id})),r({address:L.address,editor_status_changes:d.editorStatusChanges,figma_email_team_users:m,selected_currency:L.currency,annual_quantity:(0,w.fD)(e,u),monthly_quantity:(0,w.Rq)(e,u),annual_whiteboard_quantity:(0,w.fD)(e,p),monthly_whiteboard_quantity:(0,w.Rq)(e,p),vat_gst_id:L.vat_gst_id,regional_vat_gst_id:L.regional_vat_gst_id,...l})}else"teamUpgrade"===T.view&&T.paymentStep===S.tn.CONFIRM_PAY&&T.billingPeriod!==S.tY.STUDENT&&(n.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:M,teamId:e??void 0}),(0,c.$D)(l.e.MONETIZATION_UPGRADES,Error("[Billing] Loaded Pro checkout confirmation step without payment flow data"),{extra:{isCampfireCart:M}})),P(!1)}else P(!1)}},[a,R,v,D,e,C,A,L,T,B,t,M]),(0,r.useEffect)(()=>()=>{e&&I(a,e)},[a,e]),A}),I=(0,T.D)((e,t)=>{let a=f.Xw.loadingKeyForPayload({teamId:t});e(E.yH({key:a}))});function P(e){e(h.qU({cartSelections:{countBySeatType:v.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function k(e){e(h.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(h.js({numDesignEditors:0})),e(h.Az({numWhiteboardEditors:0}))}},801230:(e,t,a)=>{a.d(t,{Cn:()=>d,JO:()=>m,UI:()=>n,X4:()=>l,by:()=>o,fm:()=>i});var r=a(878028),s=a(972813),l=(e=>(e.DAILY="daily",e.WEEKLY="weekly",e.MONTHLY="monthly",e))(l||{}),n=(e=>(e.ALL_ADMINS="all_admins",e.SPECIFIC_ADMINS="specific_admins",e))(n||{}),i=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(i||{}),o=(e=>(e.NEW_EDITOR_NOTIFICATION="new_editor_notification",e))(o||{}),m=(e=>(e.VIEWER="viewer",e.VIEWER_RESTRICTED="viewer_restricted",e.FULL="full",e))(m||{});let c=r.z.object({strings:r.z.object({team_admin_billing_cost_banner:r.z.object({banner_description:r.z.string()}),cart_banner:r.z.object({cart_banner_info:r.z.string(),cart_banner_edu_info:r.z.string()})}).partial()}).optional(),d=new class{constructor(){this.NotificationSettingsSchemaValidator=(0,s.vh)(),this.MaintenancePoc1Validator=(0,s.YV)("MaintenancePoc1",c,null),this.PlanPropertiesSchemaValidator=(0,s.vh)()}getNotificationSettings(e){return this.NotificationSettingsSchemaValidator.validate(async({xr:t})=>await t.get("/api/billing/notification_settings",s.td.toAPIParameters({plan_id:e.planId,plan_type:e.planType,notification_type:e.notificationType}))??null)}getPlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:t})=>await t.get(`/api/billing/${e.planType}/${e.planId}/plan_properties`,s.td.toAPIParameters({desired_properties:["default_paid_status_design","default_paid_status_whiteboard"].toString()}))??null)}updatePlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:t})=>await t.put(`/api/billing/${e.planType}/${e.planId}/plan_properties`,e.properties)??null)}maintenancePoc1(){return this.MaintenancePoc1Validator.validate(async({xr:e})=>await e.get("/api/billing/maintenance_846b4c12"))}}},164530:(e,t,a)=>{a.d(t,{l:()=>u});var r=a(848318),s=a(536384),l=a.n(s),n=a(857188),i=a(983229),o=a(584305),m=a(964e3),c=a(718451),d=a(503024);function _(e){e.keyCode===n.Uz.TAB&&(0,n.sC)(e,n.xH.SHIFT)||e.keyCode===n.Uz.ENTER||e.keyCode===n.Uz.SPACE||(0,m.f7)(e,!0)}function u(e){return r.createElement(p,{...e,role:"button"})}function p({on:e,onChange:t,disabled:a,dataOnboardingKey:s,tooltipText:n,tooltipMaxWidth:m=400,toggleClassName:u,innerClassNameOverride:p,nubClassNameOverride:g,recordingKey:E,forwardEventsToFullscreen:h,"aria-labelledby":f,"aria-describedby":v,stopPropagationOnClick:y=!1,stopPropagationOnKeyDown:S,buttonRef:T,role:N,dataTestId:x}){let b=()=>!!(0,c.gl)(e)||!e,w=(0,c.gl)(e)?"mixed":e;return r.createElement(i.GG,{forwardedRef:T,recordingKey:E,className:l()("toggle--toggleContainer--vS2j5",u),disabled:a,onClick:e=>{y&&e.stopPropagation(),a||t(b(),e)},onKeyDown:h?_:S?e=>e.stopPropagation():void 0,"aria-describedby":v,"aria-labelledby":f,"aria-pressed":"button"===N?w:void 0,"aria-checked":"switch"===N?w:void 0,type:"button",role:N,onMouseDown:o.dG,"data-onboarding-key":s,"data-tooltip-max-width":m,"data-tooltip-timeout-delay":50,"data-tooltip-type":d.Ib.TEXT,"data-tooltip":n,"data-testid":x},(0,c.gl)(e)?r.createElement("div",{className:"toggle--toggleMixed--8rhV- toggle--_toggleState--AqpC3"},r.createElement("div",{className:"toggle--toggleMixedBar--n0xuj"})):r.createElement("div",{"data-testid":`${x}-inner`,className:p||(e?"toggle--toggleOn--RbOD7 toggle--_toggleState--AqpC3":"toggle--toggleOff--ODXMc toggle--_toggleState--AqpC3")},r.createElement("div",{className:g||"toggle--toggleNub--lqxkE"})))}},723263:(e,t,a)=>{a.d(t,{s:()=>d,K:()=>_});var r=a(848318),s=a(166365),l=a(17755),n=a(500276),i=a(155651),o=a(809027),m=a(97605);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function d(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:l.s.flex.itemsCenter.$},r.createElement("div",{className:"seat_counter--seatCounter--DiuEb"},r.createElement(i.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--e0dEs",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`},r.createElement(s.B,{svg:o.A})),r.createElement("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--pOPr1",onFocus:e=>e.target.select()}),r.createElement(i.$z,{disabled:e.numSeats>=c(e),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ZEWEz",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`},r.createElement(s.B,{svg:m.A}))),r.createElement("div",null,r.createElement("div",{className:"seat_counter--headerText--xIHXf"},e.headerText),e.headerSubText&&r.createElement("div",{className:"seat_counter--headerSubText--c9SXC seat_counter--headerText--xIHXf"},e.headerSubText),e.clarificationText&&r.createElement("span",{style:n.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$},e.clarificationText))))}function _(e,t){return a=>{if(""===a.target.value){e(0);return}let r=parseInt(a.target.value);isNaN(r)||(r>99?e(99):t&&r>t?e(t):e(r))}}},608321:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(848318);class s extends r.Component{render(){return r.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},r.createElement("div",{className:"persisted_error--sideBar--C-abH"}),r.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},199584:(e,t,a)=>{a.d(t,{o:()=>l});var r=a(848318);if(443==a.j)var s=a(468189);function l(e){return r.createElement(r.Suspense,{fallback:r.createElement(s.k,null)},e.children)}},278451:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(848318);function s(){let[e,t]=r.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},12127:(e,t,a)=>{a.d(t,{d:()=>s});var r=a(749214);let s=(0,a(848318).memo)(function(e){return(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 12a.5.5 0 0 1-.5-.5V4.707L4.354 7.854a.5.5 0 1 1-.708-.707l4-4a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1-.708.707L8.5 4.707V11.5a.5.5 0 0 1-.5.5",clipRule:"evenodd"})})})}}]);

//# debugId=9be8635d-fb76-55a6-a575-fc6000774cdf

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/336ca94ed4464f8b805ed8fc96725c2590a89b9b/c5e2cae0-7f2acf9dc7dcdc43.min.js.map