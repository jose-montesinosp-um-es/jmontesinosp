"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0fce0420-3a74-5a38-8e05-b6de7ec2b2ff")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3890],{349639:(e,t,a)=>{a.d(t,{L:()=>f,I:()=>p});var n=a(848318),l=a(911734),i=a(905899),r=a(902213),o=a(649003),c=a(155651),s=a(280679),d=a(597986);let u="resource_page_header--resourceHeaderAvatar--FI-3x",m="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",_="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function f({publishers:e,size:t=32,showFigmaPartnerBadge:a,openInNewTab:i=!1}){return e.length<5?n.createElement(n.Fragment,null,e.map((e,l)=>n.createElement("div",{key:e.id,className:m,"data-testid":"resource-header-avatar-"+l},n.createElement(c.o3,{to:new r.xn({profileHandle:e.profile_handle}).to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},key:e.id,target:i?"_blank":"_self"},n.createElement(s.e,{entity:e,size:t,style:{zIndex:3-l},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-l}},(0,d.C2)(e,!0))))):n.createElement(n.Fragment,null,e.slice(0,3).map((e,t)=>n.createElement("div",{className:m,key:e.id,"data-testid":"resource-header-avatar-"+t},n.createElement(l.N_,{to:new r.xn({profileHandle:e.profile_handle}).to,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(s.e,{entity:e,style:{zIndex:3-t},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-t}},(0,d.C2)(e,!0)))),n.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},n.createElement(o.e,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function p({publishers:e,useSmallWidth:t=!1,removeByLabel:a=!1,openInNewTab:l=!1}){return n.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,i.kc)(e,t,a,l))}},335376:(e,t,a)=>{a.d(t,{N:()=>u});var n=a(848318),l=a(716544),i=a(157907),r=a(224223),o=a(493554),c=a(875856),s=a(635547),d=a(154209);function u(){let e=n.useMemo(()=>(0,c.g)(),[]),t=(0,l.d4)(d.kY),a=(0,o.Rs)(s.gfM,{cacheNonce:e},{enabled:!!(0,i.k)().livegraph_lock_clients_migration_dark_reads});return n.useEffect(()=>{if("loaded"===a.status){let e=a.data?.lockClient;e&&(0,i.k)().livegraph_lock_clients_migration_logging&&(0,r.sx)("lg_realtime_lock_clients",{userId:e.id,lgLockValue:e.lock,realtimeLockValue:t,analyticsAnonymousId:(0,r.pp)()})}},[a,t]),n.useMemo(()=>{if("loaded"===a.status){let e=a.data?.lockClient;if(e&&(0,i.k)().livegraph_lock_clients_migration_full_reads)return e.lock}return t},[a,t])}},23895:(e,t,a)=>{a.d(t,{E:()=>i});var n=a(925040);let l=(0,n.Mz)(e=>e.dropdownShown,e=>e?.type),i=e=>(0,n.Mz)(l,t=>t===e)},862142:(e,t,a)=>{a.d(t,{d:()=>$});var n=a(848318),l=a(716544),i=a(425068),r=a(846153),o=a(792760),c=a(245405),s=a(224223),d=a(493554),u=a(303035),m=a(875856),_=a(782623),f=a(473889),p=a(575492),h=a(390709),k=a(483370),E=a(442313),w=a(500276),b=a(196484),g=a(170513),v=a(91635),y=a(604613),N=a(507720),C=a(892327),A=a(661780),T=a(635547),I=a(707717),P=a(572699),R=a(668249),F=a(830789),x=a(592659),D=a(688637),M=a(819382),S=a(803735),B=a(390280),L=a(798918),O=a(896641),q=a(649567);let U="quick_reply_thread_view--headerButton--wmkPJ",H=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},z=null,$=(0,n.forwardRef)((e,t)=>{let a=(0,d.Rs)(T.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return n.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},n.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},n.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},n.createElement("div",{className:U},!e.fileBrowser&&n.createElement(k.J,{"aria-label":(0,E.t)("quick_reply.navigate_back"),onClick:e.onClose},n.createElement(i.C,null))),n.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===a.status&&a.data.file&&a.data.file.name),n.createElement("div",{className:U},e.fileBrowser?n.createElement(k.J,{"aria-label":(0,E.t)("quick_reply.close"),onClick:e.onClose},n.createElement(r.A,null)):n.createElement("div",{style:{display:"none"}},n.createElement(k.J,{"aria-label":(0,E.t)("quick_reply.more")},n.createElement(o.J,null))))),n.createElement(V,{quickReplyInfo:e.quickReplyInfo,result:a,hideOverflowMenu:e.fileBrowser})))});function V(e){let t=(0,A.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?n.createElement(f.qc,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?n.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,E.t)("quick_reply.unable_to_load_thread")):n.createElement(Q,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function Q(e){let{quickReplyInfo:t,result:a,user:i}=e,{fileKey:r,threadId:o}=t,d=(0,v.dr)({args:{fileKey:r,rootId:o},subscription:a}),u=(0,l.wA)(),{file:m}=a.data,f=(0,P.ST)({component:"QuickReplyThreadViewWithProvider",migrationGroup:R.L.GROUP_1,attribute:"planUserPermission",legacy:e=>e?.file?.org?.currentOrgUser?.permission||"",migrated:e=>e?.file?.org?.currentPlanUser?.permission||"",lgQuery:a}),p=(0,n.useMemo)(()=>(0,I.mp)({currentOrgId:m.org?.id,teamId:m.teamId,fileKey:r,isOrgGuest:"guest"===f,users:[]}),[m.org?.id,m.teamId,r,f]),{mobileCommentThread:w}=m,{currentUserCommentReadStatus:y}=m,A=w.find(e=>e.id===o),{thumbnailUrl:T,onError:x}=function(e){let t=n.useMemo(()=>e.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[e]),{onError:a,thumbnailLoadError:l}=(0,h.b)(t);return{thumbnailUrl:l?null:t,onError:a}}(w),D=(0,l.d4)(e=>e.comments.savingCommentUuids),M=(0,l.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!A)return n.createElement("div",null,(0,E.t)("quick_reply.unable_to_load_thread"));let S=w.map(e=>(0,N.G9)(i.id,A,e,y??N.gj,D,M,e.attachments)),B={id:A.id,key:r,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:S,messageMeta:S[0].message_meta,page:A.clientMeta?.pageId||null,isActive:!0,replyCount:w.length-1,isCanvasMention:!1,pageName:A.clientMeta?.pageId||null,sidebarItemType:F.kT.COMMENT_THREAD},L={api:d,status:a.status,data:H,threads:{status:a.status,data:[B],errors:a.errors},errors:a.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return n.createElement(g.kR,{value:L},n.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=S.some(e=>e.isUnread);z=setTimeout(()=>{d.commentReceipts&&e&&(u(b.AY({receiptsAPI:d.commentReceipts,thread:B})),(0,s.sx)("Comment Thread Read",{commentThreadId:o,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{z&&clearTimeout(z)}},n.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},n.createElement(_.oW,{src:T||void 0,onError:x,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,C.C)(m.checkpointClientMeta)},alt:"thumbnail"}),n.createElement("div",{className:"quick_reply_thread_view--openFileButton--RBtVz"},n.createElement(k.J,{"aria-label":(0,E.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${r}?fuid=${i.id}&#${o}`;window.location.href=e}},n.createElement(c.V,null)))),n.createElement(j,{loadedComments:S,user:i,quickReplyInfo:t,commentMentionables:p,hideOverflowMenu:e.hideOverflowMenu})))}function Y(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.dropdownShown||null),a=(0,A.iZ)(),i=(0,x.v)();if(!t||t.type!==y.VJ)return null;let{comment:r,parentRect:o,thread:c,isUnread:s}=t.data;return n.createElement(S.V,{dispatch:e,comment:r,parentRect:o,currentUser:a,isUnread:s,thread:c,copyLink:i})}function j(e){let{loadedComments:t,user:a,quickReplyInfo:i,commentMentionables:r,hideOverflowMenu:o}=e,{fileKey:c,threadId:s}=i,d=(0,l.wA)();(0,n.useEffect)(()=>{d(b.Fm({threadId:s}))},[d,s]);let _=(0,l.d4)(e=>e.comments.typeahead),f=(0,l.d4)(e=>e.comments.editingComment),h=(0,l.d4)(e=>e.dropdownShown||null),k=(0,l.d4)(e=>e.comments.activeThread?.id),v=(0,l.d4)(e=>e.comments.threads),y=k&&v[k]||null,N=y?.reply.messageMeta||[],{submitReply:C,updateMessage:A,submitEdit:T}=function(e){let t=(0,l.wA)(),a=(0,g.I_)().writeAPI,i=g.GH()?.threads;return{submitReply:n.useCallback(e=>{if(!a){console.error("Calling submitReply with no write API");return}i&&"loaded"===i.status&&i.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,l,i,r)=>b.dB(a,t,n,l,i,r,e.uuid,O.y),t(b.lV({...e,commentsWriteApi:a,commentsConfiguration:O.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,i,a]),updateMessage:n.useCallback(a=>{t(b.k7({threadId:e,messageMeta:a}))},[t,e]),submitEdit:n.useCallback((e,a)=>{t(b._v({comment:e,messageMeta:a}))},[t])}}(s),I=(0,M._B)(),P=n.useRef(null),R=n.useRef(null),x=n.useRef(null),[U,H]=n.useState(null),[z,$]=n.useState(n.useRef(null)),V=n.useRef(null),Q=0,j=0,J=0;V.current&&V.current.offsetParent&&(Q=V.current.offsetWidth,j=V.current.offsetLeft,J=V.current.offsetParent.clientHeight-V.current.offsetTop);let W=e=>e||{x:0,y:0},X=n.useRef(null);(0,n.useEffect)(()=>{X.current&&X.current.scrollToBottom()},[]);let K=[...new Set(t.map(e=>e.user.handle))],G=t.find(e=>e.id===s);return G?n.createElement(n.Fragment,null,n.createElement("div",{style:w.sx.flex1.$}),n.createElement(p.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:X,enableScrollShadow:!0},n.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,l)=>n.createElement(S.I,{editorRef:x,key:`thread-comment-${e.id}`,dispatch:d,user:a,thread:{comments:t,key:c,id:s},setHyperlinkLocation:H,hyperlinkLocation:U,setHyperlinkEditorRef:$,comment:e,typeahead:_,mentionables:r,prevAuthor:0===l?null:t[l-1].user_id,index:l,editingComment:f,submitEdit:T,dropdownShown:h,viewportPositionFromClientPosition:W,editorOnInsert:I.editorOnInsert,editorOnClear:I.editorOnClear,threadPosition:{x:0,y:0},setIsEditorFocused:u.lQ,showEditedIndicator:!!e.edited_at,hideOverflowMenu:o,hideReactions:!1,hideEmojiPicker:!1,allowAttachments:!1,hideResolve:!1,setResolved:u.lQ,mountInputFocused:!0,editorType:"comment-editor-thread",isQuickReplyThreadView:!0})))),n.createElement(B.K,{editorRef:R,dispatch:d,user:a,typeahead:_,mentionables:r,threadPosition:null,messageMeta:N,submitText:(0,E.t)("comments.reply"),placeholderText:(0,E.t)("comments.reply"),setHyperlinkLocation:H,hyperlinkLocation:U,setHyperlinkEditorRef:$,onCancel:u.lQ,onSubmit:()=>{C({threadId:s,threadUuid:G.uuid||void 0,uuid:(0,m.g)()})},onComposeFocus:void 0,editorOnInsert:I.editorOnClear,editorOnClear:I.editorOnInsert,viewportPositionFromClientPosition:W,isDisabled:!1,mountInputFocused:!0,updateMessage:A,setIsEditorFocused:u.lQ,isEmojiPickerDisabled:null!==f,hideEmojiPicker:!1,allowAttachments:!1,recordingKey:F.Dw.quickReply,className:q.MJ,threadId:s,fileKey:c,editingExistingComment:!1,editorType:"comment-editor-reply",authorNames:K,replyContainerRef:V}),n.createElement(D.rf,{decoratorsRef:P,onClear:I.onClear,onInsert:I.onInsert,width:Q,direction:L.ri.UPWARDS,positionFromBottom:{left:j,bottom:J}}),n.createElement(Y,null)):null}},136132:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(848318),l=a(536384),i=a.n(l),r=a(166365),o=a(17755),c=a(364616);let s=n.forwardRef((e,t)=>{let a=o.s.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return n.createElement("button",{className:i()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,n.createElement(r.B,{svg:c.A,className:a}))})},483370:(e,t,a)=>{a.d(t,{J:()=>i});var n=a(848318),l=a(376025);let i=n.forwardRef(function({children:e,...t},a){return n.createElement(l.E,{...t,ref:a,className:"icon_button_32--iconButton--gFcI9"},n.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))})},902930:(e,t,a)=>{a.d(t,{H:()=>i});var n=a(848318),l=a(303035);let i=n.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:l.lQ,onMouseMove:l.lQ,onRemove:l.lQ})},949546:(e,t,a)=>{a.d(t,{IP:()=>eY,fd:()=>n,he:()=>eQ,ql:()=>eV});var n,l=a(848318),i=a(716544),r=a(551316),o=a(157907),c=a(536384),s=a.n(c),d=a(141039),u=a(217727),m=a(44509),_=a(463117),f=a(397579),p=a(757033),h=a(145015),k=a(473889),E=a(575492),w=a(442313),b=a(697714),g=a(790355),v=a(110979),y=a(732502),N=a(481540),C=a(787360),A=a(369600),T=a(87089),I=a(841747),P=a(661780),R=a(834111),F=a(902058),x=a(761669),D=a(608286),M=a(197638),S=a.n(M),B=a(586994),L=a(379338),O=a(753131),q=a(166365),U=a(280198),H=a(856480),z=a(576220),$=a(919546),V=a(832876),Q=a(937053),Y=a(902930);let j="block_kit_row--rowTop--4zNja",J="block_kit_row--metadataContainer--tcs33",W="block_kit_row--usersContainer--J5oFI",X="block_kit_row--usersContainerStructuredView--PUPYI",K="block_kit_row--quickReplyChevron--0rKX3",G="block_kit_row--chevronIcon--2uviD",Z="block_kit_row--imagePreview--CqQsi";var ee=a(987294);function et(e){return l.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:S().sanitize(e.block.html_text)}})}function ea(e){let t=(0,B.UF)(e.block.emoji_shortcode)[0];return t.meta?l.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):l.createElement(l.Fragment,null)}function en(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?l.createElement(et,{key:t,block:e}):l.createElement(ea,{key:t,block:e})):[]}function el(e){let{block:t,size:a}=e;return l.createElement(V.Ro,{entity:{...t,id:t.entity_id},size:a,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function ei(e){let{block:t}=e;return l.createElement("div",{className:`${Z} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,$.A)()})`}},l.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:a,blue:n,alpha:l}=e;return`rgba(${255*t|0}, ${255*a|0}, ${255*n|0}, ${l})`})(t.background_color)}},l.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function er(e){let{block:t}=e;return l.createElement("div",{className:"block_kit_row--square--vD5SO"},l.createElement("div",{className:Z,style:{backgroundImage:`url(${t.img_url})`}}))}function eo(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?l.createElement("div",{className:W},l.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},l.createElement(el,{block:t[1],size:z.Pf.MEDIUM})),l.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},l.createElement(el,{block:t[0],size:z.Pf.MEDIUM}))):l.createElement("div",{className:W},l.createElement(el,{block:t[0],size:z.Pf.LARGE}))}function ec(e){let{avatars:t,icon:a}=e;return 0===t.length?null:t.length>1?l.createElement("div",{className:X},l.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},l.createElement(el,{block:t[1],size:z.Pf.MEDIUM})),l.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},l.createElement(el,{block:t[0],size:z.Pf.MEDIUM})),a&&l.createElement(es,{icon:a})):l.createElement("div",{className:X},l.createElement(el,{block:t[0],size:z.Pf.LARGE}),a&&l.createElement(es,{icon:a}))}function es(e){let{icon:t}=e,a=new Set([(0,L.ck)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return l.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?l.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${a.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?l.createElement(ea,{block:t}):"AvatarBlock"===t._block_type?l.createElement(el,{block:t,size:z.Pf.SMALL16}):void 0)}function ed(e){let t=(0,i.wA)(),{block:a,callbacks:n,isPrimary:r=!0}=e,o=async()=>{let e=n.buildNotificationActionRequest(a.notification_action);await e.then(({data:e})=>{if(a.hide_after_action)n.hideNotification();else if(n.followLinkIfPossible(),e.meta.updated_notification_blob){let t=e.meta.updated_notification_blob;n.updateNotification(t.notification_id,t)}},e=>{let n=e.message||("resolve"===a.notification_action?(0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,w.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(U.s.error(n))})},c=en([a.text]);return r?l.createElement(h.$$,{className:"block_kit_row--acceptButton--1Fa1c",onClick:o},c):l.createElement(h.nR,{className:"block_kit_row--rejectButton--Hu8KY",onClick:o},c)}function eu(e){let{block:t,actionBlockCallbacks:a}=e;return l.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},l.createElement(ed,{block:t.secondary_action,callbacks:a,isPrimary:!1}),l.createElement(ed,{block:t.primary_action,callbacks:a,isPrimary:!0}))}function em(e){let{block:t,plan:a,shouldShowChevron:n,userLastViewedTimestamp:i}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return l.createElement(e_,{block:t,plan:a,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return l.createElement(ef,{block:t,shouldShowChevron:n,userLastViewedTimestamp:i})}}function e_(e){let{block:t,plan:a,shouldShowChevron:n}=e;return l.createElement(l.Fragment,null,l.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},l.createElement("div",{className:"block_kit_row--content--52-rY"},l.createElement("div",null,en(t.title)),l.createElement("div",{className:J},l.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&l.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},en(t.description)),l.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},a&&l.createElement(l.Fragment,null,l.createElement(Q.H,{entityId:a.id.toString(),entityName:a.name,imgUrl:a.img_url||void 0}),(0,F.gN)(a.name,21),l.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),l.createElement(O.h1,{date:t.created_at,style:"short"}))),n&&l.createElement("div",{className:K},l.createElement(q.B,{svg:ee.A,className:G}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return l.createElement(el,{block:e,size:z.Pf.XLARGE});case"ImageThumbnailBlock":return l.createElement(er,{block:e});case"FileThumbnailBlock":return l.createElement(ei,{block:e})}})())}function ef(e){let{block:t,shouldShowChevron:a,userLastViewedTimestamp:n}=e;return l.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},l.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},l.createElement("div",{className:"block_kit_row--title--gqwu-"},en(t.title)),l.createElement(eb,{createdAt:t.created_at,lastSeenTimestamp:n})),l.createElement("div",{className:J},l.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},en(t.subtitle)),t.description&&l.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},en(t.description)),a&&l.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},l.createElement("div",{className:K},l.createElement(q.B,{svg:ee.A,className:G})))))}function ep(e){let{notification:t}=e;return(0,y.ro)()?l.createElement(eh,{notification:t,children:e.children}):l.createElement("div",{className:j},t.is_unread?l.createElement("div",{className:"block_kit_row--unreadDot--e-8EJ"}):null,l.createElement(eo,{avatars:t.avatars}),e.children)}function eh(e){let{notification:t}=e;return l.createElement("div",{className:j},t.is_unread?l.createElement("div",{className:"block_kit_row--unreadDotStructuredView--WluAp"}):null,l.createElement(ec,{avatars:t.avatars,icon:t.icon}),e.children)}function ek(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e;return l.createElement(ep,{notification:a},l.createElement(em,{block:t.body,plan:!0===n?void 0:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function eE(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e,{shouldShowChevron:i}=l.useContext(Y.H);return l.createElement(ep,{notification:a},l.createElement(em,{block:t.body,plan:!0===n?void 0:a.plan,shouldShowChevron:i(a),userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function ew(e){let{attachment:t,notification:a,actionBlockCallbacks:n}=e;return l.createElement(l.Fragment,null,l.createElement(ep,{notification:a},l.createElement(em,{block:t.body,plan:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp})),l.createElement(eu,{block:t.actions,actionBlockCallbacks:n}))}function eb(e){let{createdAt:t,lastSeenTimestamp:a}=e,n=eg(t,a),i=(0,O.Ak)(t,"narrow");if("today"!==n&&"new"!==n){let e=new Date(t),a={};a=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},i=new Intl.DateTimeFormat((0,H.Gq)().getPrimaryLocale(!1),a).format(e)}return l.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},i)}function eg(e,t){let a=new Date(e),n=new Date,l=new Date(n);return(l.setDate(n.getDate()-1),t&&new Date(t)<a)?"new":ev(a,n)?"today":ev(a,l)?"yesterday":a>=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7)?"last_week":"older"}function ev(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var ey=(e=>(e.NEW="new",e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(ey||{});let eN={new:(0,w.tx)("user_notifications.new"),today:(0,w.tx)("user_notifications.today"),yesterday:(0,w.tx)("user_notifications.yesterday"),last_week:(0,w.tx)("user_notifications.last_7_days"),older:(0,w.tx)("user_notifications.older")};function eC(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eA=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eA||{});let eT={actionable:(0,w.tx)("user_notifications.pending"),actioned:(0,w.tx)("user_notifications.done")};var eI=a(224223),eP=a(143179);function eR(e){let t=e.preferred_attachments.find(e=>eP.p.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eF(e){let t;let a=(0,i.wA)(),[n,r]=(0,l.useState)(!1),o=(0,i.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:s,onMouseMove:d,onRemove:u}=l.useContext(Y.H),m=(0,y.ro)(),_=e.notification;l.useEffect(()=>()=>{u(_)},[u,_]);try{t=eR(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let f=e=>{e.stopPropagation()},p=()=>{r(!0),e.onHide&&e.onHide()},h=(e,t=o)=>x.sr.updateNotification({notification_id:_.notification_id,notification_action:e,currentView:t});return!n&&l.createElement("div",{className:m?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:n=>{(0,eI.sx)("file_browser_notification_clicked",{notification_id:_.notification_id,notification_type:_.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),f(n);let l=c(_);"ActionableAttachment"!==t._block_type&&h("resolve").then(({data:t})=>{if(l||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}},e=>{a(U.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},onMouseDown:f,onMouseEnter:t=>{s(t,_,()=>{h("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}})})},onMouseMove:e=>{d(e)},"data-testid":"notification-row"},((t,a)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:p,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:h};return l.createElement(ew,{attachment:t,notification:a,actionBlockCallbacks:n})}case"ClientActionableAttachment":return l.createElement(eE,{attachment:t,notification:a});case"BodyAndThumbnailAttachment":case"BodyAttachment":return l.createElement(ek,{attachment:t,notification:a,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),p()}})(t,_))||null}var ex=a(19679),eD=a(287011),eM=a(303035),eS=a(701780),eB=a(862142),eL=a(10347);let eO=class e{constructor(){this.circularBuffer=new ex.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,a){a-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=a)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eS.Mi(window.innerWidth,window.innerHeight)}};function eq(e){let[t,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(0),r=(0,A.q5)(),c=l.useRef(eM.lQ),s=l.useRef(eM.lQ),d=l.useRef(null),u=l.useRef(null),m=(0,y.ro)(),_=(0,eL.zr)(r,t),f=l.useRef({notificationId:"",mouseLocationHistory:new eO,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,l.useEffect)(()=>{u.current&&u.current.addEventListener("mouseover",e=>{clearTimeout(f.current?.scheduledShowQuickReply)})},[t]);let p=()=>{clearTimeout(f.current?.scheduledMarkAsRead),f.current.scheduledMarkAsRead=setTimeout(()=>{s.current=c.current},1e3)},h=l.useMemo(()=>{function e(e,t,n){let l=window.innerWidth>900&&window.innerHeight>650;f.current.notificationId=e.notification_id,l&&(0,eL.UC)(e)?(a((0,eL.AS)(e)),i(t),c.current=n):(a(null),c.current=eM.lQ),f.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,a,n)=>{let l=!1;if(a.notification_id!==f.current.notificationId&&u.current){let e=u.current.getBoundingClientRect(),a=new eS.Mi(e.left,e.top),n=new eS.Mi(e.left,e.bottom),i=[f.current.mouseLocationHistory.getLocation50msAgo(),a,n];l=(0,eD.y)(new eS.Mi(t.clientX,t.clientY),i)}let i=t.target;if(l){var r;r=()=>{e(a,i.getBoundingClientRect().bottom,n)},clearTimeout(f.current?.scheduledShowQuickReply),f.current&&(f.current.scheduledShowQuickReply=setTimeout(r,500))}else clearTimeout(f.current?.scheduledShowQuickReply),e(a,i.getBoundingClientRect().bottom,n)},onMouseMove:e=>{f.current.mouseLocationHistory.push(new eS.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===f.current.notificationId&&a(null)}}},[u]);if(!((0,o.k)().desktop_quickreply_filebrowser&&m))return l.createElement(l.Fragment,null,e.children);let k=Math.max(0,n-(d.current?.getBoundingClientRect().y??0)-(u.current?.getBoundingClientRect().height??640));return l.createElement(l.Fragment,null,l.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:d},t&&!_&&l.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:k,maxHeight:640,minHeight:450},onMouseEnter:()=>{p()},onMouseLeave:()=>{clearTimeout(f.current?.scheduledMarkAsRead),s.current(),s.current=eM.lQ,c.current=eM.lQ}},l.createElement(eB.d,{quickReplyInfo:t,onClose:()=>a(null),fileBrowser:!0,ref:u}))),l.createElement(Y.H.Provider,{value:h},e.children))}eO.BUFFER_CAPACITY=10,eO.DESIRED_DURATION_MS=50,eO.THROTTLE_DURATION_MS=eO.DESIRED_DURATION_MS/eO.BUFFER_CAPACITY;let eU="user_notifications_dropdown--filterToggleButton--ekpSd",eH="user_notifications_dropdown--filterToggleButtonSelected--qrMA-",ez="user_notifications_dropdown--dateHeader---l8oH",e$="user_notifications_dropdown--link--BC2j9 text--fontPos11--2LvXf text--_fontBase--QdLsd";function eV(e,t){let a=(0,i.wA)(),n=(0,i.d4)(e=>e.user.id),o=(0,i.d4)(e=>e.user.community_profile_id),c=(0,i.d4)(e=>e.authedUsers.byId[n]?.plans),s=l.useMemo(()=>void 0!==c&&(new Map(c.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[c,t]),u=(0,i.d4)(e=>e.userNotifications.communityProfileBellStates),m=(0,i.d4)(e=>e.selectedView.view),[f,h]=(0,l.useState)(new Map),[k,E]=(0,l.useState)(!0),[v,N]=(0,l.useState)(!1),C=(0,y.Ow)(),A=(0,_.F)(u);l.useEffect(()=>{let l=(0,r.s)(()=>{e?o&&(A.current[o]&&a((0,F.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:o})),x.sr.getCommunityServerDriven({currentView:m}).then(({data:e})=>{T(e.meta)}).catch(e=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),a(g.oB())})):((0,F.Zo)(!1,F.td,n),x.sr.getServerDrivenPlan({currentPlanId:t,currentView:m,isPlanOrg:s}).then(({data:e})=>{T(e.meta)}).catch(e=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),a(g.oB())}))},800,!0);E(!0),l()},[t,A,m,a,e,s,o,n]);let T=e=>{let t=new Map,a=!1;e.forEach(e=>{t.set(e.notification_id,e),!a&&e.filters.is_priority&&(a=!0)}),N(a),h(t),E(!1)},I=l.useMemo(()=>{if(C){let e=(0,F.Dd)();return k||v||"priority"!==e||((0,F.hI)("all"),e="all"),e}return"all"},[v,C,k]);return{notificationFeedMap:f,isFetchingNotifications:k,initFilter:I,markAllAsReadFn:()=>{(e?p.Ay.post("/api/user_notifications/community/mark_read",{currentView:m,source:d.S8?"desktopbell":"web"}):p.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:m,is_plan_org:s,source:d.S8?"desktopbell":"web"})).then(()=>{h(new Map(Array.from(f,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{a(b.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{h(new Map(f.set(e,t)))}}}function eQ(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eY(e){let t;let[a,i]=(0,l.useState)(F.td),{notificationFeedMap:r,isFetchingNotifications:o,markAllAsReadFn:c,updateNotification:d,initFilter:u}=eV(!!e.inCommunity,a),[m,_]=(0,l.useState)([]),[p,h]=(0,l.useState)(u),k=(0,f.ZC)(p),E=(0,y.ro)(),w=a===F.td?D.a:a,b=eQ([...r.values()],m);l.useEffect(()=>{h(u)},[u]),l.useEffect(()=>{let e=(0,F.Dd)();p!==k&&p===e&&(0,N.qD)({name:"user_notifications_filter_viewed",filter_type:p,dropdown_location:"web"})},[k,p]);let g=e=>{e.stopPropagation()},v=e=>{e===D.a&&(e=F.td),(0,N.FE)(e,"notifications",void 0),i(e)};switch(p){case"unread":t=b.filter(e=>e.is_unread);break;case"priority":t=b.filter(e=>e.filters.is_priority);break;default:t=b}return l.createElement("div",{className:s()(0!==r.size||o?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:g,onClick:g},l.createElement(eq,null,l.createElement(n.Header,{selectedPlan:a,onPlanFilterUpdate:e=>v(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:ej(o,b)&&!E,markAllAsReadFn:c,inDesktopTray:!1}),!!E&&l.createElement(n.FilterToggle,{notificationFilter:p,toggleNotificationFilter:e=>{(0,N.Cu)({filter_type:e},"user_notifications_filter_clicked"),(0,F.hI)(e),h(e)},isFetchingNotifications:o,notifications:b,markAllAsReadFn:c}),l.createElement(n.Feed,{notifications:t,currentPlanFilter:w,currentNotificationFilter:p,hiddenNotificationIds:m,setHiddenNotificationIds:_,isFetchingNotifications:o,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:d})))}function ej(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,y.ro)()?l.createElement("div",{className:ez},eN[e.notificationDateGroup]):null}function a(e){return(0,y.Ow)()?l.createElement("div",{className:ez},eT[e.notificationPriorityGroup]):null}e.Feed=function(e){let n=(0,P.Pc)(),r=(0,i.d4)(e=>n?e.authedUsers.byId[n.id]?.plans:null),o=(0,i.Pj)(),c=(0,i.wA)(),s=(0,I.FC)(),_=(0,A.q5)(),f=(0,T.sZ)(),p=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},h=!1;if(n&&!e.inCommunity&&r?.length===1&&(h=!0,e.currentPlanFilter===D.a)){let t=r[0].plan_id;for(let a of e.notifications)if(a.plan?.id.toString()!==t){h=!1;break}}let b=l.useCallback(t=>()=>{var a,n;if(!t.deeplink)return;let l=new URL(t.deeplink.href),i=l.pathname;if(i.includes("project"))a=i.split("project/")[1],(0,N.xr)("file_browser_folder_click",a,null,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===D.a?null:e.currentPlanFilter});else if(i.includes("team"))n=i.split("team/")[1],(0,N._J)("file_browser_team_click",n,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===D.a?null:e.currentPlanFilter});else if((0,u.ek)(i)){let t=(0,u.zv)(i);t&&c(v.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===D.a?void 0:e.currentPlanFilter||void 0}}))}c(g.oB());let r=!!_&&_.key===(0,u.zv)(l.pathname);if(!d.eD&&r)c((0,C.H)({params:l.searchParams.toString(),hash:l.hash}));else if(t.deeplink.use_unsafe)m.Ay.unsafeRedirect(l.href,d.eD?void 0:"_blank");else if(e.inDesktopTray)m.Ay.redirect(l.href);else try{let e=(0,R.vU)(o.getState(),i);if("teamFeed"===e.view){f&&t.plan?.id.toString()===f.id?c(g.$T(e)):m.Ay.redirect(l.href,d.eD?void 0:"_blank");return}m.Ay.redirect(l.href,d.eD?void 0:"_blank");return}catch{m.Ay.redirect(l.href,d.eD?void 0:"_blank")}},[c,_,e.currentPlanFilter,e.inDesktopTray,s,o,f]);if(e.isFetchingNotifications)return l.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},l.createElement(k.kt,null));if(0===e.notifications.length)return l.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,w.tx)("user_notifications.dropdown.no_notifications"));{var y;let n,i;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eC(t))-Number(eC(e)));let r=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=eg((y=e.notifications)[0].preferred_attachments[0].body.created_at,y[0].filters.user_last_viewed_timestamp)===eg(y[y.length-1].preferred_attachments[0].body.created_at,y[0].filters.user_last_viewed_timestamp),c=e=>{let a;let i=null;if(!o)try{a=eR(e);let r=eg(a.body.created_at,e.filters.user_last_viewed_timestamp);r!==n&&(n=r,i=l.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:r}))}catch(e){console.error("Skipping date header, unsupported notification")}return i},s=e=>{let t=null,n=eC(e)?"actionable":"actioned";return n!==i&&(i=n,t=l.createElement(a,{key:`priority-${e.notification_id}`,notificationPriorityGroup:n})),t};return l.createElement(E.P,{className:`${e.fillParent?"":r}`},l.createElement("div",null,e.notifications.map(t=>{let a=null;return a="priority"===e.currentNotificationFilter?s(t):c(t),l.createElement(l.Fragment,{key:`row-container-${t.notification_id}`},a,l.createElement(eF,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:h,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>p(t.notification_id),followLinkOnClickCallback:b(t)}))})))}},e.UnreadBar=function(e){return ej(e.isFetchingNotifications,e.notifications)?l.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return l.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,w.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),ej(e.isFetchingNotifications,e.notifications)&&l.createElement(h.N_,{onClick:e.markAllAsReadFn,className:e$,trusted:!0},(0,w.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=a,e.Header=function(e){let t=(0,A.q5)(),a=!e.inDesktopTray&&(!!t||!!(0,o.k)().notif_settings_button);return l.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?l.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.t)("user_notification.community_notifications")):l.createElement(l.Fragment,null,l.createElement(D.j,{currentPlanFilter:e.selectedPlan===F.td?D.a:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:a})),e.children,e.showMarkAllAsRead&&l.createElement(h.N_,{onClick:e.markAllAsReadFn,className:e$,trusted:!0},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=(0,y.Ow)(),a=e.notifications.some(e=>e.filters.is_priority);return e.isFetchingNotifications?null:l.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},l.createElement("div",{className:"user_notifications_dropdown--filterToggleButtons--Erg5A"},l.createElement("button",{className:s()({[eU]:!0,[eH]:"all"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("all")}},(0,w.t)("user_notification.all")),!!t&&a&&l.createElement("button",{className:s()({[eU]:!0,[eH]:"priority"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("priority")}},function(e){let t=e.reduce((e,t)=>e+Number(eC(t)),0);return 0===t?(0,w.t)("user_notifications.requests_empty"):(0,w.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),l.createElement("button",{className:s()({[eU]:!0,[eH]:"unread"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("unread")}},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,w.t)("user_notifications.unread_empty"):(0,w.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications))),ej(e.isFetchingNotifications,e.notifications)&&l.createElement(h.N_,{onClick:e.markAllAsReadFn,className:e$,trusted:!0},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))}})(n||(n={}))},608286:(e,t,a)=>{a.d(t,{a:()=>I,j:()=>P});var n=a(848318),l=a(716544),i=a(764932),r=a(708788),o=a(376025),c=a(897378),s=a(435254),d=a(493080),u=a(157907),m=a(166365),_=a(442313),f=a(790355),p=a(449737),h=a(481540),k=a(369600),E=a(661780),w=a(111693),b=a(902058),g=a(430330),v=a(503024),y=a(26501);let N="notifs_plan_filter--boldTitle--ZUcpT",C="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var A=a(364616),T=a(824007);let I="ALL_PLANS_FILTER";function P(e){let{currentPlanFilter:t,onPlanFilterUpdate:a}=e,P=(0,l.wA)(),R=(0,k.q5)(),F=(0,n.useRef)(null),x=!!(0,u.k)().limited_plan_spaces,{getTriggerProps:D,manager:M}=i.b(),S=(0,E.iZ)(),B=(0,l.d4)(e=>x?e.plans:S?e.authedUsers.byId[S.id]?.plans:null),L=(0,l.d4)(w.P),O=(0,l.d4)(e=>e.orgById);if(!S||!B||B.length<=1)return n.createElement("span",{className:N},(0,_.t)("user_notification.all_notifications"));let q=B.map(e=>e.plan_id);q.unshift(I);let U=(e,t)=>e===I?(0,_.t)("user_notification.all_notifications"):t[e],H=B.reduce((e,t)=>{if(x&&"plan_type"in t){let a="";if(t.plan_type===g.O.ORG){let e=O[t.plan_id];a=e?.name??a}else{let e=L[t.plan_id];a=e?.name??a}e[t.plan_id]=a}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),z=(e,t)=>{e.stopPropagation(),a(t)},$=q.map(e=>n.createElement(i.q7,{key:e,onClick:t=>{z(t,e)}},e===t&&n.createElement("span",{className:"notifs_plan_filter--fillMenu--Ar-HO"},n.createElement(m.B,{svg:T.A})),n.createElement("span",{className:`${e===t?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${C}`},U(e,H))));return n.createElement("div",{className:"notifs_plan_filter--planFilterContainer--E2TSh",ref:F},n.createElement(r.nK,null,n.createElement(i.bL,{manager:M},n.createElement(o.E,{className:"notifs_plan_filter--dropdownButton--hQgHc",...D()},n.createElement("span",{className:[N,C].join(" ")},(0,b.gN)(U(t,H),35)),n.createElement(m.B,{svg:A.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),n.createElement(d.J,null,n.createElement(i.mc,null,$)))),e.displaySettings&&n.createElement(c.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":v.Ib.TEXT,"data-tooltip-show-above":!0},onClick:()=>{P(f.oB()),(0,h.Cu)({userId:S?.id,fileKey:R?.key,eventName:"Notification Settings Button Clicked"}),P(p.to({type:y.s,data:{tab:y.c.NOTIFICATIONS}}))}},n.createElement(s.I,null)))}},3198:(e,t,a)=>{a.d(t,{dV:()=>$});var n=a(848318),l=a(716544),i=a(777611),r=a(575013),o=a(776402),c=a(208720),s=a(741419),d=a(39773),u=a(536384),m=a.n(u),_=a(980399),f=a(543072),p=a(875856),h=a(282424),k=a(166365),E=a(882439),w=a(442313),b=a(775038),g=a(449737),v=a(155651),y=a(235441),N=a(744149),C=a(51910),A=a(661780),T=a(922030),I=a(390119),P=a(241917),R=a(503024),F=a(229424),x=a(464012),D=a(614214),M=a(295915),S=a(8601),B=a(382179),L=a(189996),O=a(410693);let q="edit_color_palette_modal--modalLabel--AVogh text--fontPos11--2LvXf text--_fontBase--QdLsd",U="edit_color_palette_modal--colorCircleOuter--ZJqke";var H=a(209810);function z({onSave:e,onCancel:t,palette:a,enableSubmitWithNoChanges:o,manager:u,isPaletteEyedropperActive:v}){let C=(0,l.wA)(),[F,x]=n.useState(a?.name||""),[z,V]=(0,d.fp)(O.Jq),Q=n.useMemo(()=>a?.baseColors||(0,M.Vk)(),[a?.baseColors]),[Y,j]=(0,d.fp)(O.rN),J=(0,d.Xr)(D.B),W="whiteboard"===(0,y.lg)(),X="dark"!==(0,N.DP)()||W?"light":"dark",K=!(0,f.$K)(Q,Y)||o,[G,Z]=n.useState(!1);n.useEffect(()=>(V(-1),j(Q),J(s.cxo.EDIT_PALETTE_MODAL),()=>{V(-1),j(Q),J(s.cxo.SELECTION)}),[V,j,J,Q]);let ee=(0,l.d4)(e=>{let t=e.selectedView;return"fullscreen"!==t.view||t.editorType!==P.nT.Whiteboard}),et=n.useCallback(e=>{j([...Y,e])},[Y,j]),ea=n.useCallback((e,t)=>{j([...Y.slice(0,e),t,...Y.slice(e+1)])},[Y,j]),en=e=>{j([...Y.slice(0,e),...Y.slice(e+1)])},el=()=>{V(-1)},ei=n.useCallback(e=>{C(g.$O({type:$.type,data:{palette:{uuid:e,name:F,baseColors:Y},enableSubmitWithNoChanges:!0}}))},[C,F,Y]),er=(0,T.cD)(),eo=(0,A.TA)(),ec=(0,L.Bw)(),es=n.useCallback(()=>{let t=Y.some((e,t)=>Y.some((a,n)=>t!==n&&(0,f.DA)(e,a)));if(Z(t),t)return;let n=Y.map(e=>(0,_.colorToHex)(e,1));if(F&&eo&&n.length){let t=a?.uuid||(0,p.g)();a?(0,O.NK)({name:F,teamId:er,baseColors:n,uuid:t},C,()=>ei(t)):((0,O.cl)({name:F,teamId:er,uuid:t,baseColors:n,creatorId:eo,isTeamDefault:!1,canRead:!0},C,()=>ei(t)),ec(t,n.length,!0)),e()}},[Y,F,eo,a,e,er,C,ei,ec]),ed=n.useMemo(()=>Array(Y.length).fill(null).map(e=>n.createRef()),[Y.length]),eu=n.createRef();ed.push(eu);let em=function(e){let t=(0,f.tK)(f.ol.MULTIPLAYER_PURPLE)||f.Uv;if(!e)return t;let a=(0,c.oB)(e),n=360*a.h,l={...a,h:(n+40)%360/360};return(0,c.In)(l)}(Y.length>0?Y[Y.length-1]:null),e_=Y.length>=I.I_,ef=F&&F.trim()&&Y.length>0&&(!a||K||F!==a.name),ep=a?(0,w.t)("whiteboard.color_palettes.modal.edit_palette"):(0,w.t)("whiteboard.color_palettes.modal.create_palette");return n.createElement(i.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(r.vo,{allowOverflow:!0},n.createElement(r.Y9,null,n.createElement(r.hE,null,ep)),n.createElement(r.nB,null,n.createElement("p",{className:q},(0,w.tx)("whiteboard.color_palettes.modal.name")),n.createElement("div",{className:"edit_color_palette_modal--nameInput--iRWoM text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(h.L,{placeholder:(0,w.t)("whiteboard.color_palettes.modal.palette_name"),value:F||"",onChange:e=>{x(e.target.value)},maxLength:100,height:16,dataTestId:"palette-name-input"})),n.createElement("div",{className:"edit_color_palette_modal--colorsContainer--VNvss"},n.createElement("p",{className:q},(0,w.tx)("whiteboard.color_palettes.modal.colors")),n.createElement("p",{className:"edit_color_palette_modal--modalDescription--SeVmv text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.tx)("whiteboard.color_palettes.modal.choose_up_to_9_colors")),G&&n.createElement("p",{className:"edit_color_palette_modal--modalDescriptionError--W6hs7 text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.tx)("whiteboard.color_palettes.modal.duplicate_colors")),n.createElement("div",{className:"edit_color_palette_modal--colorPaletteContainer--aQ-En"},Y.map((e,t)=>n.createElement("div",{className:U,ref:ed[t],key:"wrapper"+e+"-"+t},n.createElement("button",{className:m()({"edit_color_palette_modal--deleteColorButton--rWqOY":!0,"edit_color_palette_modal--deleteColorButtonDisabled--dwsFr":z===t}),onClick:()=>en(t),"data-testid":`delete-color-button-${t}`},n.createElement(k.B,{svg:H.A,height:"16px",width:"16px",autosize:!0})),n.createElement(B.v,{target:n.createElement(S.cd,{key:e+"-"+t,size:"large",value:e,selectionState:z===t?"selected":"unselected",onClick:()=>{V(t)},paletteType:"base",background:"light"}),color:e,onColorChange:e=>ea(z,e),theme:X,isOpen:!v&&z===t,onClose:()=>el(),dropperDisabled:ee}))),!e_&&n.createElement("div",{className:U,ref:eu,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,w.t)("whiteboard.color_palettes.modal.add_color")},n.createElement(S.HL,{size:"large",value:S.WW,swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"},onClick:()=>{V(Y.length),et(em)},dataTestId:"add-color-button",fallbackSvg:S.xY}))))),n.createElement(r.wi,null,n.createElement(r.jk,null,n.createElement(b.E,{color:"secondary"},(0,w.tx)("whiteboard.color_palettes.modal.palettes_visible_to_everyone")),n.createElement(E.$z,{variant:"secondary",onClick:t},(0,w.tx)("whiteboard.color_palettes.modal.cancel")),n.createElement(E.$z,{variant:"primary",disabled:!ef,type:"submit",onClick:es,htmlAttributes:{"data-testid":"save-button"}},(0,w.tx)("whiteboard.color_palettes.modal.save_palette"))))))}let $=(0,x.Ju)(function({palette:e,enableSubmitWithNoChanges:t,...a}){let i=(0,l.wA)(),r=(0,A.TA)(),c=(0,T.cD)(),u=o.hS(a),_=(0,C.dH)(),f=(0,d.md)(D.B),p=_===s.NLJ.DROPPER_COLOR&&f===s.cxo.EDIT_PALETTE_MODAL,h=n.useCallback(()=>{i(g.Lo())},[i]);return n.createElement("div",{className:m()("edit_color_palette_modal--headerModalTransitionContainer--C-CFV",{"edit_color_palette_modal--hidden--EDk-H":p})},n.createElement(v.fu,{name:F.e0.FIGJAM_EDIT_PALETTE_MODAL,properties:{userId:r,teamId:c,type:e?"edit palette":"new palette"}},n.createElement(z,{onSave:h,onCancel:h,palette:e,enableSubmitWithNoChanges:t,manager:u,isPaletteEyedropperActive:p})))},"EditColorPaletteModal")},149204:(e,t,a)=>{a.d(t,{j:()=>L});var n=a(848318),l=a(716544),i=a(776402),r=a(777611),o=a(575013),c=a(468189),s=a(897378),d=a(726521),u=a(493324),m=a(278599),_=a(653959),f=a(882439),p=a(442313),h=a(895104),k=a(449737),E=a(155651),w=a(129102),b=a(661780),g=a(635547),v=a(922030),y=a(390119),N=a(503024),C=a(229424),A=a(464012),T=a(117592),I=a(410693),P=a(639088);let R=(0,A.Ju)(function({paletteUuid:e}){let t=(0,l.wA)();return n.createElement(T.Rw,{size:300,confirmText:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_button"),confirmationTitle:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_title"),popStack:!0,destructive:!0,onConfirm:()=>{(0,I.RN)(e,t)}},n.createElement("div",{className:P.jE},(0,p.tx)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_content")))},"DeleteColorPaletteConfirmationModal");var F=a(295915),x=a(8601),D=a(189996),M=a(3198);let S=(0,A.Ju)(function({paletteName:e,paletteUuid:t}){let a=(0,l.wA)(),i=(0,v.cD)(),r=(0,l.d4)(e=>e.teams[i]?.name);return r||console.error("No team name found for team id",i),n.createElement(T.Rw,{size:360,confirmationTitle:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.title"),confirmText:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.confirm_button"),content:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.description",{teamName:r,paletteName:e||(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.this_palette")}),onConfirm:()=>{t===y.fJ?(0,I.In)(i,a):(0,I.dq)(i,t,a)},popStack:!0})},"MakePaletteTeamDefaultConfirmationModal");function B({palette:e,showMakeDefaultButton:t}){let a=(0,l.wA)(),i=e.uuid===y.fJ,r=e.name||(0,p.t)("whiteboard.color_palettes.unnamed_palette");return n.createElement(h.Y,{width:"fill-parent",direction:"vertical",spacing:"4px"},n.createElement(h.Y,{direction:"horizontal",spacing:"8px"},n.createElement("div",null,r),e.isTeamDefault&&n.createElement(d.E,{variant:"brandOutline"},(0,p.t)("whiteboard.color_palettes.manage_modal.default"))),n.createElement(h.Y,{direction:"horizontal",width:"fill-parent",horizontalAlignItems:"space-between"},n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"0px"},e.baseColors.map(e=>n.createElement(x.cd,{key:e,value:w.z5.parse(e),paletteType:"base",background:"light"}))),n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"8px"},!i&&n.createElement(n.Fragment,null,n.createElement(s.K,{onClick:()=>{a(k.$O({type:M.dV.type,data:{palette:{uuid:e.uuid,name:e.name,baseColors:(0,D.$v)(e?.baseColors),isTeamDefault:e.isTeamDefault}}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip"),htmlAttributes:{"data-testid":"edit-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip")}},n.createElement(u.L,null)),n.createElement(s.K,{onClick:()=>{a(k.$O({type:R.type,data:{paletteUuid:e.uuid}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip"),htmlAttributes:{"data-testid":"delete-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip")}},n.createElement(m.i,null))),t&&n.createElement(f.$z,{variant:"secondary",disabled:e.isTeamDefault,onClick:()=>{a(k.$O({type:S.type,data:{paletteUuid:e.uuid,paletteName:e.name}}))},htmlAttributes:{"data-testid":"make-palette-team-default-button-"+e.uuid}},(0,p.tx)("whiteboard.color_palettes.modal.set_default")))))}let L=(0,A.Ju)(function({showMakeDefaultButton:e,entryPoint:t,...a}){let s=(0,b.TA)(),d=(0,v.cD)(),u=i.hS(a),m=(0,l.wA)(),[h]=(0,_.IT)((0,g.iP2)({teamId:d}),{enabled:!!d});return n.createElement(E.fu,{name:C.e0.FIGJAM_MANAGE_PALETTES_MODAL,properties:{entryPoint:t,userId:s,teamId:d}},n.createElement(r.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(o.vo,null,n.createElement(o.Y9,null,n.createElement(o.hE,null,(0,p.t)("whiteboard.color_palettes.manage_modal.color_palettes"))),n.createElement(o.nB,{padding:16},n.createElement("div",{className:"manage_color_palettes_modal--subheader--2Aol7"},n.createElement("div",{className:"manage_color_palettes_modal--manageText---c1Ro"},(0,p.tx)("whiteboard.color_palettes.manage_modal.manage_your_teams_color_palettes")),n.createElement(f.$z,{variant:"primary",onClick:()=>{m(k.$O({type:M.dV.type}))},htmlAttributes:{"data-testid":"create-color-palette-button"}},(0,p.tx)("whiteboard.color_palettes.manage_modal.create_new_palette"))),n.createElement("div",{className:"manage_color_palettes_modal--paletteRowsOuter--d2OIk"},"loaded"===h.status&&h.data.colorPalettesForTeam?n.createElement(n.Fragment,null,n.createElement(B,{key:y.fJ,palette:{uuid:y.fJ,name:(0,p.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,F.TS)("base").map(e=>w.z5.format(e)),isTeamDefault:h.data.colorPalettesForTeam.every(e=>!e.isTeamDefault)},showMakeDefaultButton:e}),h.data.colorPalettesForTeam.map(t=>n.createElement(B,{key:t.uuid,palette:t,showMakeDefaultButton:e}))):n.createElement(c.k,{size:"lg",htmlAttributes:{"data-testid":"loading-spinner"}}))))))},"ManageColorPalettesModal")},506092:(e,t,a)=>{a.d(t,{V:()=>l});var n=a(749214);let l=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 6A1.5 1.5 0 0 0 6 7.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 0-1 0v1A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm4.146 3.146a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708l1.647-1.646H9.5a.5.5 0 0 1 0-1h3.793l-1.647-1.646a.5.5 0 0 1 0-.708",clipRule:"evenodd"})})})},493324:(e,t,a)=>{a.d(t,{L:()=>l});var n=a(749214);let l=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4.008 5.124a1 1 0 0 1 1.116-1.116l3.66.457-.124.992-2.636-.329L5 5l.128 1.024.33 2.636a1 1 0 0 0 .285.583l7.403 7.403 3.5-3.5-7.403-7.403a1 1 0 0 0-.583-.286l.124-.992a2 2 0 0 1 1.166.57l9.55 9.55a2 2 0 0 1 0 2.83L17.414 19.5a2 2 0 0 1-2.828 0l-9.55-9.55a2 2 0 0 1-.57-1.166zm13.346 8.73-3.5 3.5 1.439 1.439a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414z",clipRule:"evenodd"})})})}}]);

//# debugId=0fce0420-3a74-5a38-8e05-b6de7ec2b2ff

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/e30ad4d72d18247f583805c8d03b9140341d1073/3890-49810d7a00bfc3b4.min.js.map